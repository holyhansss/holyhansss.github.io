{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/CTFs/17_recovery_ethernaut/17_recovery_ethernaut/",
    "result": {"data":{"cur":{"id":"74eb4c1f-af90-58f5-8759-65d3172e91e4","html":"<h1 id=\"-1-recovery\" style=\"position:relative;\"><a href=\"#-1-recovery\" aria-label=\" 1 recovery permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ 1. Recovery</h1>\n<p><strong>Difficulty 6/10</strong></p>\n<ul>\n<li>ìŠ¹ë¦¬ ì¡°ê±´</li>\n<li>ì½”ë“œ ë¶„ì„</li>\n<li>í’€ì´</li>\n</ul>\n<p>ìˆœì„œë¡œ ì§„í–‰ ë  ê²ƒì´ë‹¤.</p>\n<hr>\n<h2 id=\"ìŠ¹ë¦¬-ì¡°ê±´\" style=\"position:relative;\"><a href=\"#%EC%8A%B9%EB%A6%AC-%EC%A1%B0%EA%B1%B4\" aria-label=\"ìŠ¹ë¦¬ ì¡°ê±´ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ìŠ¹ë¦¬ ì¡°ê±´</h2>\n<ul>\n<li>ìƒì–´ë²„ë¦° CAì˜ ì£¼ì†Œë¥¼ ì°¾ê³  CAê°€ ê°€ì§€ê³  ìˆëŠ” Ether ì „ë¶€ íšŒìˆ˜í•˜ê¸°</li>\n</ul>\n<hr>\n<h2 id=\"ì½”ë“œ-ë¶„ì„\" style=\"position:relative;\"><a href=\"#%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D\" aria-label=\"ì½”ë“œ ë¶„ì„ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì½”ë“œ ë¶„ì„</h2>\n<p>ì´ë¯¸ ì˜ ì„¤ëª…ë˜ì–´ìˆì–´ ê°„ë‹¨í•œ ë¶„ì„ë§Œ ì£¼ì„ì— ì ì—ˆë‹¤!</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">contract</span> <span class=\"token class-name\">Recovery</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">//generate tokens</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">generateToken</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span> <span class=\"token keyword\">memory</span> _name<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint256</span> _initialSupply<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">SimpleToken</span><span class=\"token punctuation\">(</span>_name<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">,</span> _initialSupply<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">contract</span> <span class=\"token class-name\">SimpleToken</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">using</span> <span class=\"token class-name\">SafeMath</span> <span class=\"token keyword\">for</span> <span class=\"token builtin\">uint256</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// public variables</span>\n    <span class=\"token builtin\">string</span> <span class=\"token keyword\">public</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">mapping</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">uint</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> balances<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// constructor</span>\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span> <span class=\"token keyword\">memory</span> _name<span class=\"token punctuation\">,</span> <span class=\"token builtin\">address</span> _creator<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint256</span> _initialSupply<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\n        name <span class=\"token operator\">=</span> _name<span class=\"token punctuation\">;</span>\n        balances<span class=\"token punctuation\">[</span>_creator<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> _initialSupply<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// collect ether in return for tokens</span>\n    <span class=\"token function\">receive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> <span class=\"token keyword\">payable</span> <span class=\"token punctuation\">{</span>\n        balances<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span><span class=\"token function\">mul</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// allow transfers of tokens</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">transfer</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> _to<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint</span> _amount<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span> \n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>balances<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span> <span class=\"token operator\">>=</span> _amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        balances<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> balances<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">sub</span><span class=\"token punctuation\">(</span>_amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        balances<span class=\"token punctuation\">[</span>_to<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> _amount<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// clean up after ourselves</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">destroy</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> <span class=\"token keyword\">payable</span> _to<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">selfdestruct</span><span class=\"token punctuation\">(</span>_to<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h2 id=\"í’€ì´\" style=\"position:relative;\"><a href=\"#%ED%92%80%EC%9D%B4\" aria-label=\"í’€ì´ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í’€ì´</h2>\n<p>ì´ ë¬¸ì œì—ì„œ ìš°ë¦¬ì˜ ëª©í‘œëŠ” ìƒì–´ë²„ë¦° CAì˜ ì£¼ì†Œë¥¼ ì°¾ê³  CAì•ˆì— ìˆëŠ” Etherë¥¼ íšŒìˆ˜í•˜ëŠ” ê²ƒì´ë‹¤.\nì„¤ëª…ì„ ì½ì–´ë³´ë©´ Recovery contractë¥¼ ì´ìš©í•´ SimpleToken contractì˜ instanceë¥¼ ë§Œë“¤ì—ˆë‹¤. í•˜ì§€ë§Œ instanceì˜ ì£¼ì†ŒëŠ” ì €ì¥ë˜ì§€ ì•Šì•˜ê³  ìƒì–´ë²„ë¦¬ê²Œ ë˜ì—ˆë‹¤ê³  í•œë‹¤. ê·¸ë¦¬ê³  ìƒì–´ë²„ë¦¬ê¸° ì „ì— 0.5 Etherë¥¼ ë³´ëƒˆë‹¤ê³  í•œë‹¤.</p>\n<p>ê·¸ë ‡ë‹¤ë©´ ìš°ë¦¬ëŠ” ì–´ë–»ê²Œí•˜ë©´ ì°¾ì„ ìˆ˜ ìˆì„ê¹Œ?</p>\n<p>ì£¼ì†Œë¥¼ ì°¾ëŠ” ë°©ë²•ì€ 2ê°€ì§€ê°€ ì¡´ì¬í•œë‹¤.</p>\n<ol>\n<li>Etherscanì„ í†µí•´ í™•ì¸í•˜ëŠ” ë°©ë²•</li>\n<li>nonceì™€ ìƒì„±ì ì£¼ì†Œë¥¼ ì‚¬ìš©í•´ í™•ì¸í•˜ëŠ” ë°©ë²•</li>\n</ol>\n<p>í•„ìëŠ” Etherscanì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ë¬¸ì œë¥¼ í’€ì—ˆë‹¤.</p>\n<h4 id=\"1-etherscan-ì‚¬ìš©í•˜ì—¬-í’€ê¸°\" style=\"position:relative;\"><a href=\"#1-etherscan-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-%ED%92%80%EA%B8%B0\" aria-label=\"1 etherscan ì‚¬ìš©í•˜ì—¬ í’€ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Etherscan ì‚¬ìš©í•˜ì—¬ í’€ê¸°</h4>\n<p>ìš°ë¦¬ê°€ Ethernautë¥¼ í†µí•´ instanceë¥¼ ë§Œë“¤ ë‹¹ì‹œ ì£¼ì†Œ ì£¼ì–´ì§€ê³ , ê·¸ ì£¼ì†Œë¥¼ í†µí•´ ëª¨ë“  ìƒí˜¸ì‘ìš©ì´ ì¼ì–´ë‚œë‹¤.\nê·¸ëŸ¼ìœ¼ë¡œ instanceì˜ ì£¼ì†Œë¥¼ etherscanì—ì„œ ê²€ìƒ‰í•˜ì—¬ ì¼ì–´ë‚œ transactionì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>\n<p>ê·¸ëŸ¼ ë°”ë¡œ í™•ì¸í•´ë³´ì!\nìˆœì„œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤</p>\n<ol>\n<li>rinkeby testnetì˜ Etherscanì— ì ‘ì†</li>\n<li>instance ì£¼ì†Œ ê²€ìƒ‰</li>\n<li>transaction í™•ì¸</li>\n<li>transactionì—ì„œ SimpleToken ì£¼ì†Œ í™•ì¸</li>\n<li>SimpleTokenì—ì„œ destroy() ì‹¤í–‰</li>\n</ol>\n<p>ìš°ì„  Etherscan rinkeby testnetì— ì ‘ì†í•œë‹¤.\nì´í›„ instance ì£¼ì†Œë¥¼ ê²€ìƒ‰í•œë‹¤. ê²€ìƒ‰ í›„ internal transactionì„ í™•ì¸í•´ë³´ë©´ ë§¨ ìœ„ì— ë§ˆì§€ë§‰ìœ¼ë¡œ ìƒì„±ëœ transactionì—ì„œ SimpleTokenì´ ìƒì„±ëœë‹¤.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABJ0AAASdAHeZh94AAABS0lEQVQoz31RW27EMAjM/b97qN6kWnU3cfzAGIyngk3zVdXSBAMOMMP29XihVMJ/p1PHGAIeA8wD3dE5fLOFtRbUDB+fT2zfzxeOlNGoo9SG2ijgTTw2RDGnxY86Z8Bj1DnQL8tD8KqC7bUfUcC7/SZ8isAQqM6YKJ0Zohq+iMR9Xg3cus/M2PwTx8dW/ZOyiCKldOeJejRZCzAzTFsXDFt0VMNQpyIxlRd4x2dYp+hyeCH3axdk0rCVGJkEhSTeb2dKeOwZe+mQS3Sn4EL7BDeCxHsB4V332wdC521PFaUxWh8oXUFDIfKeul7U2GNqkGkYMkGsGLog0xe1It+Ig/a214GTvNBEbgPnmdEawdZCLg1HKiit3zqx61kIZ+WQxhZCkpzrW8OjKRIpulhocqYDtdag4NocNFHYLmoAq+LY94BL48eXVUqJNz+N18BSk8cALgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"contract_creation_ethernaut_recov\"\n        title=\"contract_creation_ethernaut_recov\"\n        src=\"/static/8497d961941688a0e4216316aee113ec/37523/contract_creation_ethernaut_recov.png\"\n        srcset=\"/static/8497d961941688a0e4216316aee113ec/e9ff0/contract_creation_ethernaut_recov.png 180w,\n/static/8497d961941688a0e4216316aee113ec/f21e7/contract_creation_ethernaut_recov.png 360w,\n/static/8497d961941688a0e4216316aee113ec/37523/contract_creation_ethernaut_recov.png 720w,\n/static/8497d961941688a0e4216316aee113ec/302a4/contract_creation_ethernaut_recov.png 1080w,\n/static/8497d961941688a0e4216316aee113ec/07a9c/contract_creation_ethernaut_recov.png 1440w,\n/static/8497d961941688a0e4216316aee113ec/a303f/contract_creation_ethernaut_recov.png 1733w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ìƒì„±ëœ contract í´ë¦­í•´ ë“¤ì–´ê°€ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë‚˜ì˜¨ë‹¤.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABJ0AAASdAHeZh94AAABVUlEQVQoz11SW24cMQzz/Q/Uu/QzyEc3TbIzfsqyJLOQJrvAVgBhQ6OhTdLp7f0Pvu8nmBe89t74v1QVzAwRxVoCXgs0Z8B7DmzDr98Z6Za/cBwZuTaU2lFqQy4VuTTU1tE6BYmoYv0QOiYvDHJSjnVOjn46zjM2tjfWWnGamb1AzXCcGUQEFyAiWMyh5gkzTGYkZ/afvHxQ1Z5D9rM6YSkFtdYgJGKcdYCWXjdlRWeNf9MYhEGMoy/0uUCjQZggaiHz4dHDu9iLgp1s+SqB6baIIlX3LBccpcVpforZfsIjCuwLj1t791XJ9S3VPnHPA8SCOhhtKpZuiO4IxEPqg+JGSyxCqCQx573HnENtIxUS3DIjD0EhjaTP84CpohPjdm/4yiN89BpM+Pj8xt/Pe3ju1VtDqzX26fJqB7sjnsdakZpLFgPUrvfpQtVDivD09Z3KpeAf5kvBLBDBf/cAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"simpleToken_contract_creation_ethernaut_recov\"\n        title=\"simpleToken_contract_creation_ethernaut_recov\"\n        src=\"/static/b219bc3f010d73b8dcafaf6d05f60c9c/37523/simpleToken_contract_creation_ethernaut_recov.png\"\n        srcset=\"/static/b219bc3f010d73b8dcafaf6d05f60c9c/e9ff0/simpleToken_contract_creation_ethernaut_recov.png 180w,\n/static/b219bc3f010d73b8dcafaf6d05f60c9c/f21e7/simpleToken_contract_creation_ethernaut_recov.png 360w,\n/static/b219bc3f010d73b8dcafaf6d05f60c9c/37523/simpleToken_contract_creation_ethernaut_recov.png 720w,\n/static/b219bc3f010d73b8dcafaf6d05f60c9c/302a4/simpleToken_contract_creation_ethernaut_recov.png 1080w,\n/static/b219bc3f010d73b8dcafaf6d05f60c9c/07a9c/simpleToken_contract_creation_ethernaut_recov.png 1440w,\n/static/b219bc3f010d73b8dcafaf6d05f60c9c/adef7/simpleToken_contract_creation_ethernaut_recov.png 1716w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\në‚˜ëŠ” transactionì´ 3ê°œ ìˆëŠ”ë°, ë¬¸ì œë¥¼ í’€ì§€ ì•Šì•˜ë‹¤ë©´ 2ê°œì¼ ê²ƒì´ë‹¤.\n<del>ë¬¸ì œì—ì„œëŠ” 0.5 etherì´ë¼ê³  ë§í–ˆì§€ë§Œ ì‹¤ì œë¡œëŠ” 0.001 etherë°–ì— ì—†ë‹¤!</del></p>\n<p>ì´ì œ ì£¼ì†Œë¥¼ ì•Œì•˜ìœ¼ë‹ˆ destory()ë¥¼ ì‹¤í–‰ì‹œì¼œ etherë¥¼ ì°¾ì•„ì˜¤ë©´ ëë‚œë‹¤!</p>\n<p>ë‚˜ëŠ” remixë¥¼ ì‚¬ìš©í•˜ì—¬ transactionì„ ë³´ëƒˆë‹¤.</p>\n<p>ethernautì—ì„œ ì½”ë“œë¥¼ copyí•œ í›„ DEPLOY &#x26; RUN ë¶€ë¶„ì—ì„œ injected web3ë¥¼ ì„ íƒí•˜ê³  address atì— simpletoken ì£¼ì†Œë¥¼ ë„£ê³  ì‹¤í–‰ì‹œí‚¨ë‹¤.</p>\n<p>ê·¸ëŸ¼ ì•„ë˜ deploy contractì— contractê°€ ë‚˜ì˜¤ê³  ìì‹ ì˜ ì£¼ì†Œë¥¼ ë„£ì–´ destory()ë¥¼ ì‹¤í–‰ì‹œí‚¤ë©´ ì™„ë£Œëœë‹¤.</p>\n<p>ì™„ë£Œ í›„ ethernautìœ¼ë¡œ ëŒì•„ì™€ Submit instanceë¥¼ ëˆ„ë¥´ê³  ì¡°ê¸ˆ ê¸°ë‹¤ë¦¬ë©´ blockì´ mineë˜ê³ , ì•„ë˜ì™€ ê°™ì´ ëœ¨ë©° ë§ˆë¬´ë¦¬ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Ù©(- Ì®Ì®Ìƒ-Ìƒ)Û¶ Well done, You have completed this level!!!</code></pre></div>\n<hr>\n<h2 id=\"ë§ˆë¬´ë¦¬\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"ë§ˆë¬´ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë§ˆë¬´ë¦¬</h2>\n<p>ì´ë²ˆ ë¬¸ì œëŠ” í‰ì†Œì— Etherscanì„ ì‚¬ìš©í–ˆì–´ì„œ ì–´ë µì§€ ì•Šê²Œ í’€ ìˆ˜ ìˆì—ˆë‹¤. í•˜ì§€ë§Œ ì²˜ìŒì— ë¬¸ì œ ìì²´ê°€ ì´í•´ê°€ ì•ˆë˜ì„œ ë‚œì´ë„ì— ë¹„í•´ ì‹œê°„ì´ ë§ì´ ì§€ì²´ëœ ê²ƒ ê°™ì•˜ë‹¤. ê·¸ë¦¬ê³  ë¬¸ì œë¥¼ í’€ê³ ë‚˜ë‹ˆ etherscanì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ë§ê³  <code class=\"language-text\">keccack256(address, nonce)</code>ë¥¼ ì‚¬ìš©í•´ í‘¸ëŠ” ë°©ë²•ë„ ìˆë‹¤ê³  ì•Œë ¤ì£¼ì—ˆë‹¤. ì•„ë§ˆ contract creationì´ ì¼ì–´ë‚ ë•Œ ì–´ë–»ê²Œ ìƒì„±ë˜ëŠ”ì§€ì™€ nonceì˜ ì¤‘ìš”ì„±ì„ ì•Œë ¤ì£¼ë ¤ê³  í•œ ê²ƒ ê°™ë‹¤! Ethernaut ì‹œë¦¬ì¦ˆê°€ ëë‚˜ê³  nonceë¥¼ ì´ìš©í•´ ë‹¤ì‹œ í•œë²ˆ ë¬¸ì œë¥¼ í’€ì–´ë³´ë©´ ì¢‹ì„ê²ƒê°™ë‹¤:)!</p>\n<hr>\n<h2 id=\"ref\" style=\"position:relative;\"><a href=\"#ref\" aria-label=\"ref permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>REF</h2>\n<ul>\n<li>rinkeyb network ether faucet: <a href=\"https://faucets.chain.link/rinkeby\">https://faucets.chain.link/rinkeby</a></li>\n<li>ethernaut: <a href=\"https://ethernaut.openzeppelin.com/\">https://ethernaut.openzeppelin.com/</a></li>\n<li>remix IDE: <a href=\"https://remix.ethereum.org\">https://remix.ethereum.org</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EC%8A%B9%EB%A6%AC-%EC%A1%B0%EA%B1%B4\">ìŠ¹ë¦¬ ì¡°ê±´</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D\">ì½”ë“œ ë¶„ì„</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%92%80%EC%9D%B4\">í’€ì´</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"#1-etherscan-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-%ED%92%80%EA%B8%B0\">1. Etherscan ì‚¬ìš©í•˜ì—¬ í’€ê¸°</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">ë§ˆë¬´ë¦¬</a></p>\n</li>\n<li>\n<p><a href=\"#ref\">REF</a></p>\n</li>\n</ul>\n</div>","excerpt":"ğŸ‘‹ 1. Recovery Difficulty 6/10 ìŠ¹ë¦¬ ì¡°ê±´ ì½”ë“œ ë¶„ì„ í’€ì´ ìˆœì„œë¡œ ì§„í–‰ ë  ê²ƒì´ë‹¤. ìŠ¹ë¦¬ ì¡°ê±´ ìƒì–´ë²„ë¦° CAì˜ ì£¼ì†Œë¥¼ ì°¾ê³  CAê°€ ê°€ì§€ê³  ìˆëŠ” Ether ì „ë¶€ íšŒìˆ˜í•˜ê¸° ì½”ë“œ ë¶„ì„ ì´ë¯¸ ì˜ ì„¤ëª…ë˜ì–´ìˆì–´ ê°„ë‹¨í•œ ë¶„ì„ë§Œ ì£¼ì„ì— ì ì—ˆë‹¤! í’€ì´ ì´ ë¬¸ì œì—ì„œ ìš°ë¦¬ì˜ ëª©í‘œëŠ” ìƒì–´ë²„ë¦° CAì˜ ì£¼ì†Œë¥¼ ì°¾ê³  CAì•ˆì— ìˆëŠ” Etherë¥¼ íšŒìˆ˜í•˜ëŠ” ê²ƒì´ë‹¤.\nì„¤ëª…ì„ ì½ì–´ë³´ë©´ Recovery contractë¥¼ ì´ìš©í•´ SimpleToken contractì˜ instanceë¥¼ ë§Œë“¤ì—ˆë‹¤. í•˜ì§€ë§Œ instanceì˜ ì£¼ì†ŒëŠ” ì €ì¥ë˜ì§€ ì•Šì•˜ê³  ìƒì–´ë²„ë¦¬ê²Œ ë˜ì—ˆë‹¤ê³  í•œë‹¤. ê·¸ë¦¬ê³  ìƒì–´ë²„ë¦¬ê¸° ì „ì— 0.5 Etherë¥¼ ë³´ëƒˆë‹¤ê³  í•œë‹¤. ê·¸ë ‡ë‹¤ë©´ ìš°ë¦¬ëŠ” ì–´ë–»ê²Œí•˜ë©´ ì°¾ì„ ìˆ˜ ìˆì„ê¹Œ? ì£¼ì†Œë¥¼ ì°¾ëŠ” ë°©ë²•ì€ 2ê°€ì§€ê°€ ì¡´ì¬í•œë‹¤. Etherscanì„ í†µí•´ í™•ì¸í•˜ëŠ” ë°©ë²• nonceì™€ ìƒì„±ì ì£¼ì†Œë¥¼ ì‚¬ìš©í•´ í™•ì¸í•˜ëŠ” ë°©ë²• í•„ìëŠ” Etherscanì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ë¬¸ì œë¥¼ í’€ì—ˆë‹¤. 1. Etherscan ì‚¬ìš©í•˜ì—¬ í’€ê¸° ìš°ë¦¬ê°€â€¦","frontmatter":{"date":"January 25, 2022","title":"(Ethernaut ì·¨ì•½ì  17) Recovery","categories":"ì·¨ì•½ì ë¶„ì„","author":"í•œì„±ì›","emoji":"ğŸ§¢"},"fields":{"slug":"/CTFs/17_recovery_ethernaut/17_recovery_ethernaut/"}},"next":{"id":"1d32b786-58aa-5137-ad78-aca4b6850dc6","html":"<h1 id=\"-bored-ape-yacht-club---contract-review\" style=\"position:relative;\"><a href=\"#-bored-ape-yacht-club---contract-review\" aria-label=\" bored ape yacht club   contract review permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ Bored Ape Yacht Club - Contract Review</h1>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">contract</span> <span class=\"token class-name\">BoredApeYachtClub</span> <span class=\"token keyword\">is</span> ERC721<span class=\"token punctuation\">,</span> Ownable <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">using</span> <span class=\"token class-name\">SafeMath</span> <span class=\"token keyword\">for</span> <span class=\"token builtin\">uint256</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token builtin\">string</span> <span class=\"token keyword\">public</span> BAYC_PROVENANCE <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token builtin\">uint256</span> <span class=\"token keyword\">public</span> startingIndexBlock<span class=\"token punctuation\">;</span>\n\n    <span class=\"token builtin\">uint256</span> <span class=\"token keyword\">public</span> startingIndex<span class=\"token punctuation\">;</span>\n\n    <span class=\"token builtin\">uint256</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">constant</span> apePrice <span class=\"token operator\">=</span> <span class=\"token number\">80000000000000000</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//0.08 ETH</span>\n\n    <span class=\"token builtin\">uint</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">constant</span> maxApePurchase <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token builtin\">uint256</span> <span class=\"token keyword\">public</span> MAX_APES<span class=\"token punctuation\">;</span>\n\n    <span class=\"token builtin\">bool</span> <span class=\"token keyword\">public</span> saleIsActive <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token builtin\">uint256</span> <span class=\"token keyword\">public</span> REVEAL_TIMESTAMP<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span> <span class=\"token keyword\">memory</span> name<span class=\"token punctuation\">,</span> <span class=\"token builtin\">string</span> <span class=\"token keyword\">memory</span> symbol<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint256</span> maxNftSupply<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint256</span> saleStart<span class=\"token punctuation\">)</span> <span class=\"token function\">ERC721</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> symbol<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        MAX_APES <span class=\"token operator\">=</span> maxNftSupply<span class=\"token punctuation\">;</span>\n        REVEAL_TIMESTAMP <span class=\"token operator\">=</span> saleStart <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span><span class=\"token number\">86400</span> <span class=\"token operator\">*</span> <span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">withdraw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> onlyOwner <span class=\"token punctuation\">{</span>\n        <span class=\"token builtin\">uint</span> balance <span class=\"token operator\">=</span> <span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>balance<span class=\"token punctuation\">;</span>\n        msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">.</span><span class=\"token function\">transfer</span><span class=\"token punctuation\">(</span>balance<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n     * Set some Bored Apes aside\n     */</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">reserveApes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> onlyOwner <span class=\"token punctuation\">{</span>        \n        <span class=\"token builtin\">uint</span> supply <span class=\"token operator\">=</span> <span class=\"token function\">totalSupply</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token builtin\">uint</span> i<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">30</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">_safeMint</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">,</span> supply <span class=\"token operator\">+</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n     * DM Gargamel in Discord that you're standing right behind him.\n     */</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">setRevealTimestamp</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">uint256</span> revealTimeStamp<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> onlyOwner <span class=\"token punctuation\">{</span>\n        REVEAL_TIMESTAMP <span class=\"token operator\">=</span> revealTimeStamp<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> \n\n    <span class=\"token comment\">/*     \n    * Set provenance once it's calculated\n    */</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">setProvenanceHash</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span> <span class=\"token keyword\">memory</span> provenanceHash<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> onlyOwner <span class=\"token punctuation\">{</span>\n        BAYC_PROVENANCE <span class=\"token operator\">=</span> provenanceHash<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">setBaseURI</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span> <span class=\"token keyword\">memory</span> baseURI<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> onlyOwner <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">_setBaseURI</span><span class=\"token punctuation\">(</span>baseURI<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/*\n    * Pause sale if active, make active if paused\n    */</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">flipSaleState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> onlyOwner <span class=\"token punctuation\">{</span>\n        saleIsActive <span class=\"token operator\">=</span> <span class=\"token operator\">!</span>saleIsActive<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n    * Mints Bored Apes\n    */</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">mintApe</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span> numberOfTokens<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">payable</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>saleIsActive<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Sale must be active to mint Ape\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>numberOfTokens <span class=\"token operator\">&lt;=</span> maxApePurchase<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Can only mint 20 tokens at a time\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span><span class=\"token function\">totalSupply</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>numberOfTokens<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=</span> MAX_APES<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Purchase would exceed max supply of Apes\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>apePrice<span class=\"token punctuation\">.</span><span class=\"token function\">mul</span><span class=\"token punctuation\">(</span>numberOfTokens<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=</span> msg<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Ether value sent is not correct\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> numberOfTokens<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token builtin\">uint</span> mintIndex <span class=\"token operator\">=</span> <span class=\"token function\">totalSupply</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">totalSupply</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> MAX_APES<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">_safeMint</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">,</span> mintIndex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// If we haven't set the starting index and this is either 1) the last saleable token or 2) the first token to be sold after</span>\n        <span class=\"token comment\">// the end of pre-sale, set the starting index block</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>startingIndexBlock <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span><span class=\"token function\">totalSupply</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> MAX_APES <span class=\"token operator\">||</span> block<span class=\"token punctuation\">.</span>timestamp <span class=\"token operator\">>=</span> REVEAL_TIMESTAMP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            startingIndexBlock <span class=\"token operator\">=</span> block<span class=\"token punctuation\">.</span>number<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> \n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n     * Set the starting index for the collection\n     */</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">setStartingIndex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>startingIndex <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Starting index is already set\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>startingIndexBlock <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Starting index block must be set\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        startingIndex <span class=\"token operator\">=</span> <span class=\"token builtin\">uint</span><span class=\"token punctuation\">(</span><span class=\"token function\">blockhash</span><span class=\"token punctuation\">(</span>startingIndexBlock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span> MAX_APES<span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// Just a sanity case in the worst case if this function is called late (EVM only stores last 256 block hashes)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>block<span class=\"token punctuation\">.</span>number<span class=\"token punctuation\">.</span><span class=\"token function\">sub</span><span class=\"token punctuation\">(</span>startingIndexBlock<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">255</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            startingIndex <span class=\"token operator\">=</span> <span class=\"token builtin\">uint</span><span class=\"token punctuation\">(</span><span class=\"token function\">blockhash</span><span class=\"token punctuation\">(</span>block<span class=\"token punctuation\">.</span>number <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span> MAX_APES<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// Prevent default sequence</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>startingIndex <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            startingIndex <span class=\"token operator\">=</span> startingIndex<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n     * Set the starting index block for the collection, essentially unblocking\n     * setting starting index\n     */</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">emergencySetStartingIndexBlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> onlyOwner <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>startingIndex <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Starting index is already set\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        startingIndexBlock <span class=\"token operator\">=</span> block<span class=\"token punctuation\">.</span>number<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"a\" style=\"position:relative;\"><a href=\"#a\" aria-label=\"a permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>a</h2>\n<h2 id=\"b\" style=\"position:relative;\"><a href=\"#b\" aria-label=\"b permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>b</h2>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#a\">a</a></li>\n<li><a href=\"#b\">b</a></li>\n</ul>\n</div>","frontmatter":{"date":"January 24, 2022","title":"Bored Ape Yacht Club - Contract Review (Writing)","categories":"ethereum","author":"í•œì„±ì›","emoji":"ğŸ§¢"},"fields":{"slug":"/code_review/BoredApeYachtClub_codeReview/BoredApeYachtClub_codeReview/"}},"prev":{"id":"fa6d3ef1-e3fd-5cac-80a5-f8e590899c33","html":"<h1 id=\"-solidity-bytecode-and-opcode-basics\" style=\"position:relative;\"><a href=\"#-solidity-bytecode-and-opcode-basics\" aria-label=\" solidity bytecode and opcode basics permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ Solidity Bytecode and Opcode Basics</h1>\n<p>ì´ ê¸€ì€ ë‚´ê°€ ê³µë¶€í•˜ë©´ì„œ ì°¾ì€ <a href=\"https://medium.com/@blockchain101/solidity-bytecode-and-opcode-basics-672e9b1a88c2\">ì´ ê¸€</a>ì„ ë³€ì—­í•˜ì˜€ë‹¤. ì´ ê¸€ì€ ethernautì˜ magicnumberì˜ ì €ìê°€ ì‘ì„±í•œ ê¸€ì´ë©° bytecodeì™€ opcodeì˜ ê¸°ë³¸ê¸°ì— ëŒ€í•´ì„œ ë‹¤ë£¬ë‹¤. ë‚˜ëŠ” ethernaut ë¬¸ì œí’€ë©´ì„œ ì´ ê°œë…ì— ì ‘ê·¼í•˜ê²Œ ë˜ì—ˆìœ¼ë©° ê³µë¶€í•˜ê²Œ ë˜ì—ˆë‹¤. ê¸€ì—ëŠ” ë‚´ê°€ ìƒê°í•˜ëŠ” ë¶€ë¶„ì´ í¬í•¨ë˜ì–´ìˆì„ ìˆ˜ë„ ìˆê¸° ë•Œë¬¸ì—, ë‚´ ê¸€ì´ ì´í•´ê°€ ì˜ ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ <a href=\"https://medium.com/@blockchain101/solidity-bytecode-and-opcode-basics-672e9b1a88c2\">ì›ë¬¸</a>ì„ ì½ì–´ë³´ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤. ì´ë¯¸ì§€ ê°™ì€ ê²½ìš° ë‚´ê°€ ê³µë¶€í•˜ë©´ì„œ ì–»ì€ ìµœì‹ ì´ë¯¸ì§€ë¡œ ëŒ€ì²´í•˜ì˜€ë‹¤.</p>\n<h3 id=\"ì‹œì‘\" style=\"position:relative;\"><a href=\"#%EC%8B%9C%EC%9E%91\" aria-label=\"ì‹œì‘ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì‹œì‘</h3>\n<p>smart contractì— ëŒ€í•´ì„œ ê¹Šê²Œ ê³µë¶€í•˜ë©´ í•  ìˆ˜ë¡ <code class=\"language-text\">PUSH1</code>, <code class=\"language-text\">SSTORE</code>, <code class=\"language-text\">CALLVALUE</code> ë“±ê³¼ ê°™ì€ ìš©ì–´ë¥¼ ì‚¬ìš©í•˜ê²Œ ë  ê²ƒì´ë‹¤. ì´ëŸ¬í•œ ìš©ì–´ë“¤ì€ ë¬´ì—‡ì´ê³  ìš°ë¦¬ëŠ” ê·¸ ìš©ì–´ë“¤ì— ëŒ€í•´ ì•Œì•„ì•¼í• ê¹Œ?</p>\n<p>ì´ëŸ¬í•œ ìš©ì–´ë¥¼ ì•Œê¸° ìœ„í•´ì„œëŠ” ì´ë”ë¦¬ì›€ ê°€ìƒ ë¨¸ì‹ (EVM)ì— ë” ê¹Šì´ ë°°ì›Œì•¼ í•œë‹¤. ë‚˜ëŠ” ì´ ì£¼ì œì— ëŒ€í•´ êµ¬ê¸€ì— ê²€ìƒ‰í•´ ë³´ì•˜ì§€ë§Œ ê´€ë ¨ ìë£Œê°€ ë„ˆë¬´ ì ì–´ ë†€ëë‹¤. ì•„ë§ˆ ë„ˆ ê¸°ìˆ ì  ì´ì–´ì„œì¼ê¹Œ? ê·¸ë˜ì„œ ì´ ê¸€ì—ì„œëŠ” EVM ê¸°ì´ˆë¥¼ ìµœëŒ€í•œ ê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•´ ë³´ë ¤ê³  í•œë‹¤.</p>\n<p>ë‹¤ë¥¸ ìœ ëª…í•œ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë“¤(C, JAVA)ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ Solidityë„ ê³ ê¸‰ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì´ë‹¤. ìš°ë¦¬ëŠ” ê³ ê¸‰ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¥¼ ì´í•´í•˜ê³  ì‘ì„±í•˜ì§€ë§Œ, ê¸°ê³„ëŠ” ê³ ê¸‰ í”„ë¡œê·¸ë˜ë°ì–¸ì–´ë¥¼ ì´í•´í•˜ì§€ ëª»í•œë‹¤. ê·¸ë˜ì„œ solidity compilerë¥¼ ì‚¬ìš©í•´ EVM(ê¸°ê³„)ì´ ì´í•´í•  ìˆ˜ ìˆëŠ” ì–¸ì–´ë¡œ ë³€í™˜ì‹œí‚¨ë‹¤. ì´ë•Œ ê¸°ê³„ê°€ ì´í•´í•  ìˆ˜ ìˆëŠ” ì–¸ì–´ëŠ” Bytecodeì´ë‹¤.</p>\n<!-- ìš°ë¦¬ê°€ Gethì™€ ê°™ì€ ì´ë”ë¦¬ì›€ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì„¤ì¹˜í•˜ë©´ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ íŠ¹ë³„íˆ ë§Œë“¤ì–´ì§„ ê²½ëŸ‰ ìš´ì˜ì²´ì œì¸ ì´ë”ë¦¬ì›€ ë²„ì¶”ì–¼ ë¨¸ì‹ ë„ í•¨ê»˜ ë‚˜ì˜¨ë‹¤. -->\n<p>ë§¤ìš° ê°„ë‹¨í•œ contractë¥¼ ì˜ˆë¡œ ë“¤ì–´ ë³´ê² ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">pragma</span> <span class=\"token keyword\">solidity</span> <span class=\"token operator\">^</span><span class=\"token version number\">0.8.11</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">contract</span> <span class=\"token class-name\">MyContract</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">uint</span> i <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">10</span> <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a href=\"https://remix.ethereum.org\">Remix IDE</a>ì—ì„œ ì´ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê³  contract ë‚´ìš©ì„ í´ë¦­í•˜ë©´ ë§ì€ ì •ë³´ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 552px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 143.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAAACXBIWXMAABJ0AAASdAHeZh94AAACPklEQVRIx52WV3LbQBBEcRExAURmRM7MsmhTktP9j9KuHogQrXLA8mO0SxV28Cb1QsuLLzgcf2J/+IGyumA8iTDRY1lVjGeC8AjNsgtYTgFZ7aJ7QDcSTIxE1r42NTNo/FOWFxTlBbZToaxekOWf8TBYQTdieXNfI4jGjdDIP+LubcNRoBw6n9dMKxMiEibpEzx/g9X6gLp57ZyqmBAa0wR0PDVTGNPWTCvv3qrkkDmMk09I0rOs/hthmp3vI2S+bKeE45ZwvUryyL0/azAah+oOGd46OMLzGzHmk2RXZ6pha2wNEjFntPliK87o9LbSSiHTSRidpNNn8w0su5Q8Llc7DEeheg4Xyx2C8IR1cJDc6UaK1Wovzh8GayVKjS1DJzzMdbHcwvNrTPSWnOlQKY7G3mOobcgnRPGjOLKcUgrkuJVS+2i6HsOyc9hOAccpYduFULE/mQ7SKhWFB8PoURo5y84ygty7XiOkdfOCwTBQG72PMtSOYyrUg6FiUUwzEzKKQbN5RV2/YDbfilF4VaflN8LROBIHLBSJbun6E1q5VJN0bGbK13b3Da5X3zfL/3r7XfJFQlZ1t/8uAtteA8+y55S8q3mknsPbgxSN8SSUsG9vwh6EmRCRsKqf36r9VXqT+eT1yubuOy1dDj+StFdpKhUnfd/7WgSWc8yJSLMnOF4tdFl+lglRaZlOsV2/ljFjaFMzF0Ggev9piv5mTIkQXsO9yv7777D3vczn+ElD+dP+9yXQ52uB1ip9jl92Qm7bOUv+JgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"myContractDetail\"\n        title=\"myContractDetail\"\n        src=\"/static/b65d0aba2b4fb67f0f596ba0e8003621/08c0b/myContractDetail.png\"\n        srcset=\"/static/b65d0aba2b4fb67f0f596ba0e8003621/e9ff0/myContractDetail.png 180w,\n/static/b65d0aba2b4fb67f0f596ba0e8003621/f21e7/myContractDetail.png 360w,\n/static/b65d0aba2b4fb67f0f596ba0e8003621/08c0b/myContractDetail.png 552w\"\n        sizes=\"(max-width: 552px) 100vw, 552px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ì´ ê²½ìš° ì»´íŒŒì¼ëœ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.(RunTime Cdoe)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">6080604052600080fdfea26469706673582212208d96441222a360f13b82dab7729b766da71f9e974dfc161fad4d0f49fc65b64664736f6c634300080b0033</code></pre></div>\n<p>ì´ ê¸´ ê°’ë“¤ì€ ë°”ì´íŠ¸ì½”ë“œë¼ê³ ë„ ì•Œë ¤ì§„ ìµœì¢… ê³„ì•½ì˜ 16ì§„ìˆ˜ í‘œí˜„ì´ë‹¤. ë¦¬ë¯¹ìŠ¤ ë¸Œë¼ìš°ì €ì˜ â€œWeb3 Deployâ€ ì„¹ì…˜ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë‚˜ì™€ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> mycontractContract <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">web3<span class=\"token punctuation\">.</span>eth<span class=\"token punctuation\">.</span>Contract</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> mycontract <span class=\"token operator\">=</span> mycontractContract<span class=\"token punctuation\">.</span><span class=\"token function\">deploy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n     <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> <span class=\"token string\">'0x60806040526018600055348015601457600080fd5b50603f8060226000396000f3fe6080604052600080fdfea26469706673582212208d96441222a360f13b82dab7729b766da71f9e974dfc161fad4d0f49fc65b64664736f6c634300080b0033'</span><span class=\"token punctuation\">,</span> \n     <span class=\"token literal-property property\">arguments</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n     <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n     <span class=\"token literal-property property\">from</span><span class=\"token operator\">:</span> web3<span class=\"token punctuation\">.</span>eth<span class=\"token punctuation\">.</span>accounts<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> \n     <span class=\"token literal-property property\">gas</span><span class=\"token operator\">:</span> <span class=\"token string\">'4700000'</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e<span class=\"token punctuation\">,</span> contract</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">,</span> contract<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> contract<span class=\"token punctuation\">.</span>address <span class=\"token operator\">!==</span> <span class=\"token string\">'undefined'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n         console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Contract mined! address: '</span> <span class=\"token operator\">+</span> contract<span class=\"token punctuation\">.</span>address <span class=\"token operator\">+</span> <span class=\"token string\">' transactionHash: '</span> <span class=\"token operator\">+</span> contract<span class=\"token punctuation\">.</span>transactionHash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ê°„ë‹¨íˆ ë§í•´ ê³„ì•½ì„ êµ¬ì¶•í•  ë•Œ ê¶Œì¥ ê°€ìŠ¤ê°€ 4700,000ì¸ 16ì§„ìˆ˜ë¥¼ ë°ì´í„° í•„ë“œ ì•„ë˜ì— ë°°ì¹˜í•˜ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤.\nEVMê³¼ ëŒ€í™”í•˜ë ¤ë©´ 16ì§„ë²•ì„ ìƒê°í•´ë´ì•¼í•œë‹¤. ì™œ ì—¬ëŸ¬ë¶„ì˜ ì§€ê°‘ì´ë‚˜ transaction address ì•ì— â€œ0xâ€ê°€ ìˆëŠ”ì§€ ê¶ê¸ˆí•´ ë³¸ ì ì´ ìˆì§€ ì•Šì€ê°€? ë§ë‹¤, â€œ0xâ€ë¡œ ì‹œì‘í•˜ëŠ” ê²ƒì€ ë‹¨ìˆœíˆ ê°’ì´ 16ì§„ìˆ˜ë¼ëŠ” ê²ƒì„ ë‚˜íƒ€ë‚¸ë‹¤. 16ì§„ìˆ˜ ì•ì— â€œ0xâ€ë¥¼ ë‘ëŠ” ê²ƒì€ í•„ìˆ˜ëŠ” ì•„ë‹ˆë‹¤. ì™œëƒí•˜ë©´ EVMì€ ì–´ë–¤ ê°’ì´ë¼ë„ 16ì§„ìˆ˜ë¡œ ì·¨ê¸‰í•˜ê¸° ë•Œë¬¸ì´ë‹¤.</p>\n<p>ë˜í•œ opcodeê°€ í‘œì‹œëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PUSH1 0x80 PUSH1 0x40 MSTORE PUSH1 0x0 DUP1 REVERT INVALID LOG2 PUSH5 0x6970667358 0x22 SLT KECCAK256 DUP14 SWAP7 DIFFICULTY SLT 0x22 LOG3 PUSH1 0xF1 EXTCODESIZE DUP3 0xDA 0xB7 PUSH19 0x9B766DA71F9E974DFC161FAD4D0F49FC65B646 PUSH5 0x736F6C6343 STOP ADDMOD SIGNEXTEND STOP CALLER </code></pre></div>\n<p>opcodeëŠ” ì‚¬ëŒì´ ì½ì„ ìˆ˜ ìˆëŠ” low level instruction(ëª…ë ¹ì–´)ì´ë‹¤. ëª¨ë“  opcodeëŠ” 16ì§„ìˆ˜ë¡œ ë˜ì–´ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ <code class=\"language-text\">MSTORE</code>ëŠ” <code class=\"language-text\">0x52</code>, <code class=\"language-text\">SSTORE</code>ì€ <code class=\"language-text\">0x55</code> ë“±ì´ë‹¤. ì˜ˆì „ <a href=\"http://gavwood.com/paper.pdf\">Ethereum Yellow Paper</a>(ì´ë”ë¦¬ì›€ ê¸°ìˆ  ì •ì˜ì„œ)ì— ëª¨ë“  solidity opcodeì™€ 16ì§„ìˆ˜ ê°’ì— ëŒ€í•´ ë‚˜ì™€ìˆìœ¼ë‹ˆ í™•ì¸í•´ ë³´ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤.</p>\n<p>EVMì€ Stackê¸°ë°˜ì˜ Machineì´ë‹¤. ê°„ë‹¨íˆ ì„¤ëª…í•˜ìë©´ í”„ë§ê¸€ìŠ¤ í†µì— í”„ë§ê¸€ìŠ¤ ê³¼ìë¥¼ ë„£ëŠ”ë‹¤ê³  ìƒê°í•´ë³´ì. ë§ˆì§€ë§‰ìœ¼ë¡œ ë„£ì€ ê³¼ì ì¡°ê°ì´ ìš°ë¦¬ê°€ ì²«ë²ˆì§¸ë¡œ êº¼ë‚´ëŠ” ì¡°ê°ì´ ë  ê²ƒì´ë‹¤. ìš°ë¦¬ëŠ” ì»´í“¨í„° ê³µí•™ì ì¸ ìš©ì–´ë¡œ LIFO(First In Last Out)ë¼ê³  ë¶€ë¥¸ë‹¤.</p>\n<p>ì¼ë°˜ ì‚°ìˆ ì—ì„œ, ìš°ë¦¬ëŠ” ìˆ˜ì‹ì„ ë‹¤ìŒê³¼ ê°™ì´ ì“´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// Answer is 14. we do multiplication before addition.\n10 + 2 * 2</code></pre></div>\n<p>stack ê¸°ë°˜ì˜ machineì—ì„œëŠ” LIFO ì›ë¦¬ë¡œ ì‘ë™í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2 2 * 10 + </code></pre></div>\n<p>ì´ê²ƒì€ <code class=\"language-text\">2</code>ë¥¼ ë¨¼ì € ìŠ¤íƒì— ë„£ê³ , ê·¸ ë‹¤ìŒì— ë˜ ë‹¤ë¥¸ <code class=\"language-text\">2</code>ë¥¼ ë„£ê³ , ê·¸ ë‹¤ìŒì— ê³±ì…ˆì„ ìˆ˜í–‰í•˜ë¼ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ê²°ê³¼ëŠ” ìŠ¤íƒ ìœ„ì— <code class=\"language-text\">4</code>ê°€ ë†“ì…ë‹ˆë‹¤. ì´ì œ <code class=\"language-text\">4</code> ìœ„ì— ìˆ«ì <code class=\"language-text\">10</code>ì„ ë”í•˜ê³  ê²°êµ­ ë‘ ìˆ«ìë¥¼ ë”í•œë‹¤. ìŠ¤íƒì˜ ìµœì¢… ê°’ì€ <code class=\"language-text\">14</code>ê°€ ë©ë‹ˆë‹¤. ì´ëŸ¬í•œ ìœ í˜•ì˜ ì‚°ìˆ ì€ Postfix Notation ë˜ëŠ” <a href=\"https://en.wikipedia.org/wiki/Reverse_Polish_notation\">Reverse Polish Notation</a>.</p>\n<p>í•„ìëŠ” ë‹¤í–‰íˆ ì»´í“¨í„° ê³µí•™ ìˆ˜ì—…ì—ì„œ ë°°ìš´ ê²ƒì´ ê¸°ì–µë‚˜ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆì—ˆë‹¤. ì–´ë ¤ìš´ ê°œë…ì€ ì•„ë‹ˆê¸° ë•Œë¬¸ì—, ì˜ ëª¨ë¥´ê² ë‹¤ë©´ postfix notationì— ê´€í•œ youtube ì˜ìƒì„ ëª‡ê°œ ë³´ê³ ì™€ë„ ì˜ ì´í•´í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.</p>\n<p>ìŠ¤íƒì— ë°ì´í„°ë¥¼ ë„£ëŠ” í–‰ìœ„ë¥¼ PUSH ëª…ë ¹ì–´ë¼ê³  í•˜ë©° ìŠ¤íƒì—ì„œ ë°ì´í„°ë¥¼ ì œê±°í•˜ëŠ” í–‰ìœ„ë¥¼ POP ëª…ë ¹ì–´ë¼ê³  í•œë‹¤. ìœ„ì˜ ì˜ˆì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” ê°€ì¥ ì¼ë°˜ì ì¸ opcodeëŠ” ìŠ¤íƒì— 1ë°”ì´íŠ¸ì˜ ë°ì´í„°ë¥¼ ë„£ëŠ” ê²ƒì„ ì˜ë¯¸í•˜ëŠ” â€œPUSH1â€ì…ë‹ˆë‹¤.</p>\n<p>ëª…ë ¹ì–´ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì“°ì¸ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PUSH1 0x80</code></pre></div>\n<p>ìŠ¤íƒì— â€œ0x80â€ì˜ 1ë°”ì´íŠ¸ ê°’ì„ ë„£ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ê³µêµë¡­ê²Œë„ â€œPUSH1â€ì˜ 16ì§„ìˆ˜ ê°’ë„ â€œ0x60â€ì´ ëœë‹¤. ì˜ë¬´ì  í‘œê¸°ê°€ ì•„ë‹Œ â€œ0xâ€ë¥¼ ì œê±°í•˜ë©´, ë°”ì´íŠ¸ì½”ë“œë¡œ ì´ ë…¼ë¦¬ë¥¼ â€œ6080â€ìœ¼ë¡œ ì“¸ ìˆ˜ ìˆë‹¤.</p>\n<p>ì¡°ê¸ˆ ë” ì‚´í´ë³´ì</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PUSH1 0x80 PUSH1 0x40 MSTORE</code></pre></div>\n<p>ìš°ì„  MSTORE(0x52)ëŠ” 2ê°œì˜ Inputì„ ë°›ê³  Outputì„ ë‚´ì§€ ì•ŠëŠ”ë‹¤. ìœ„ì˜ opcodeëŠ” ë‹¤ìŒì„ ì˜ë¯¸í•œë‹¤.</p>\n<ol>\n<li>PUSH1(0x60): 0x80ì„ ìŠ¤íƒì— ë„£ìŠµë‹ˆë‹¤.</li>\n<li>PUSH1(0x40): 0x40ì„ ìŠ¤íƒì— ë„£ìŠµë‹ˆë‹¤.</li>\n<li>MSTORE(0x52): 0x60 ë©”ëª¨ë¦¬ ê³µê°„ì„ í• ë‹¹í•˜ê³  0x40 ìœ„ì¹˜ë¡œ ì´ë™í•©ë‹ˆë‹¤.</li>\n</ol>\n<p>ê·¸ ê²°ê³¼ ë°”ì´íŠ¸ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">6080604052</code></pre></div>\n<p>ì‚¬ì‹¤ ìš°ë¦¬ëŠ” <code class=\"language-text\">6080604052</code>ì™€ ê°™ì€ ë§ˆë²•ê°™ì€ ìˆ«ìë¥¼ ì–´ëŠ solidity bytecodeì—ì„œë“  ë³¼ìˆ˜ ìˆë‹¤. í•„ìê°€ ì‹¤ì œë¡œ ethernautì— ì‚¬ìš©í–ˆë˜ codeë“¤ì„ ì „ë¶€ í™•ì¸í•´ ë³´ë‹ˆ ëª¨ë‘ <code class=\"language-text\">6080604052</code>ë¡œ ì‹œì‘í–ˆë‹¤.<del>ì‹ ê¸°ë°©ê¸°</del></p>\n<p>ì¢€ ë” ë³µì¡í•˜ê²Œ ë§Œë“¤ì–´ë³´ìë©´ <code class=\"language-text\">0x40</code> ì´ë‚˜ <code class=\"language-text\">0x80</code>ì€ ìš°ë¦¬ê°€ í‰ìƒì‹œ ì‚¬ìš©í•˜ëŠ” 40 ë˜ëŠ” 60ìœ¼ë¡œ í•´ì„í•  ìˆ˜ ì—†ë‹¤. ìœ„ì—í—ˆ ë§í–ˆë“¯ì´ ì´ëŠ” 16ì§„ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤. <code class=\"language-text\">0x40</code>ì€ 64, <code class=\"language-text\">0x60</code>ì€ 96ê³¼ ê°™ë‹¤.</p>\n<p>ê°„ë‹¨íˆ ë§í•´ì„œ, â€œPUSH1 0x80 PUSH1 0x40 MSTOREâ€ëŠ” 96ë°”ì´íŠ¸ì˜ ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•˜ê³  64ë°”ì´íŠ¸ì˜ ì‹œì‘ ë¶€ë¶„ìœ¼ë¡œ í¬ì¸í„°ë¥¼ ì´ë™í•˜ëŠ” ê²ƒì´ë‹¤. í˜„ì¬ ìŠ¤í¬ë˜ì¹˜ ê³µê°„ì€ 64ë°”ì´íŠ¸, ì„ì‹œ ë©”ëª¨ë¦¬ ì €ì¥ ê³µê°„ì€ 32ë°”ì´íŠ¸ì…ë‹ˆë‹¤.\n<del>í•„ìëŠ” ì´ ë¶€ë¶„ì´ ì˜ ì´í•´ê°€ ì•ˆëœë‹¤ã… ã…  ê´€ë ¨í•´ì„œ ê³µë¶€í•œ ê¸€ ë” ì“¸ ì˜ˆì •!</del></p>\n<p>EVMì—ëŠ” ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” 3ê°œì˜ ì¥ì†Œê°€ ìˆë‹¤. ì²«ë²ˆì§¸ë¡œ stackì´ë‹¤. ìœ„ì˜ ì˜ˆì™€ ê°™ì´ â€œPUSHâ€ opcodeë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì €ì¥í•œë‹¤. ë‘ ë²ˆì§¸ë¡œ, ë©”ëª¨ë¦¬(RAM)ì—ì„œëŠ” â€œMSTOREâ€ opcodeë¥¼ ì‚¬ìš©í•˜ê³ , ë§ˆì§€ë§‰ìœ¼ë¡œ storageì— â€œSSTOREâ€ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì €ì¥í•œë‹¤. ë°ì´í„°ë¥¼ storageì— ì €ì¥í•˜ëŠ”ë° í•„ìš”í•œ ê°€ìŠ¤ê°€ ê°€ì¥ ë¹„ì‹¸ê³  stackì„ ì´ìš©í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì €ë ´í•˜ë‹¤.</p>\n<h3 id=\"assembly-language\" style=\"position:relative;\"><a href=\"#assembly-language\" aria-label=\"assembly language permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Assembly Language</h3>\n<p>opcodeë¥¼ ì´ìš©í•´ ì „ì²´ smart contractë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤. ë°”ë¡œ ì—¬ê¸°ì„œ â€˜Solidity Assembly Languageâ€™ê°€ í•„ìš”í•©ë‹ˆë‹¤. ì´í•´í•˜ê¸° ì–´ë µê² ì§€ë§Œ ê°€ìŠ¤ë¥¼ ì ˆì•½í•˜ê³  solidityë§Œìœ¼ë¡œ í•  ìˆ˜ ì—†ëŠ” ì¼ì„ í•˜ê³  ì‹¶ë‹¤ë©´ ìœ ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<h3 id=\"summary\" style=\"position:relative;\"><a href=\"#summary\" aria-label=\"summary permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Summary</h3>\n<p>ìš°ë¦¬ëŠ” bytecodeì˜ ê¸°ë³¸ê³¼ ëª‡ ê°œì˜ opcodeë§Œ ë‹¤ë£¨ì—ˆë‹¤. ì•„ì§ ì´ì•¼ê¸°ë˜ì§€ ì•Šì€ ì•Šì€ opcodeê°€ ë„ˆë¬´ ë§ì§€ë§Œ, ìš°ë¦¬ëŠ” ì ì–´ë„ ì „ì²´ì ì¸ ì»¨ì…‰ì— ëŒ€í•´ì„œ íŒŒì•…í•  ìˆ˜ ìˆì—ˆë‹¤ê³  ìƒê°í•œë‹¤. ìš°ë¦¬ê°€ ì‹¬ì§€ì–´ solidity opcodeë¥¼ ë°°ìš°ëŠ” ë° ì‹ ê²½ì¨ì•¼ í•˜ëŠ”ì§€ì— ëŒ€í•œ ì›ë˜ ì§ˆë¬¸ì„ ê±°ìŠ¬ëŸ¬ ì˜¬ë¼ê°€ë©´- ì•„ë§ˆë„ ê·¸ë ‡ë‹¤, ì•„ë‹ˆë‹¤.</p>\n<p>smart contractë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•´ opcodeë¥¼ ì•Œ í•„ìš”ê°€ ì—†ë‹¤. ë°˜ë©´ì—, EVM ì˜¤ë¥˜ ì²˜ë¦¬ëŠ” ì—¬ì „íˆ ë§¤ìš° ì›ì‹œì ì´ë©° Errorê°€ ì¼ì–´ë‚¬ì„ ë•Œ opcodeë¥¼ ì‚´í´ë³´ëŠ”ê²Œ í¸ë¦¬í•˜ë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ë” ë°°ìš°ëŠ” ê²ƒì´ ë‚˜ì  ê²ƒì€ ì—†ë‹¤ê³  ìƒê°í•œë‹¤.</p>\n<!-- \n## a\n\na.sol -> a.abi, a.bin(bytecode) ->\nbytecode translated to opcode\nyellow paperì•ˆì— opcodeë“¤ì´ ì¨ìˆëŠ” ex) push, pop, mstore ë“±ë“±\n\ninitializeí• ë•Œ initial code ì™€ runtime codeë¡œ ë‚˜ëˆ„ì–´ì§, initial codeëŠ” constructorë“±ì„ ê°€ì§€ê³  ìˆìŒ, runtime codeì—ëŠ” function ë° stateë“¤ì´ ë“¤ì–´ê°€ ìˆìŒ\n\nEVMì€ stackê¸°ë°˜ì´ë‹¤. \n\n -->\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EC%8B%9C%EC%9E%91\">ì‹œì‘</a></li>\n<li><a href=\"#assembly-language\">Assembly Language</a></li>\n<li><a href=\"#summary\">Summary</a></li>\n</ul>\n</div>","frontmatter":{"date":"January 27, 2022","title":"Solidity Bytecode and Opcode Basics","categories":"EVM","author":"í•œì„±ì›","emoji":"ğŸ§¢"},"fields":{"slug":"/EVM/SolidityBytecodeandOpcodeBasics/"}},"site":{"siteMetadata":{"siteUrl":"https://holyhansss.github.io","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/CTFs/17_recovery_ethernaut/17_recovery_ethernaut/","nextSlug":"/code_review/BoredApeYachtClub_codeReview/BoredApeYachtClub_codeReview/","prevSlug":"/EVM/SolidityBytecodeandOpcodeBasics/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}