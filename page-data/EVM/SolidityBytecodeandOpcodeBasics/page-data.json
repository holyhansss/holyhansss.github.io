{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/EVM/SolidityBytecodeandOpcodeBasics/",
    "result": {"data":{"cur":{"id":"fa6d3ef1-e3fd-5cac-80a5-f8e590899c33","html":"<h1 id=\"-solidity-bytecode-and-opcode-basics\" style=\"position:relative;\"><a href=\"#-solidity-bytecode-and-opcode-basics\" aria-label=\" solidity bytecode and opcode basics permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👋 Solidity Bytecode and Opcode Basics</h1>\n<p>이 글은 내가 공부하면서 찾은 <a href=\"https://medium.com/@blockchain101/solidity-bytecode-and-opcode-basics-672e9b1a88c2\">이 글</a>을 변역하였다. 이 글은 ethernaut의 magicnumber의 저자가 작성한 글이며 bytecode와 opcode의 기본기에 대해서 다룬다. 나는 ethernaut 문제풀면서 이 개념에 접근하게 되었으며 공부하게 되었다. 글에는 내가 생각하는 부분이 포함되어있을 수도 있기 때문에, 내 글이 이해가 잘 되지 않는다면 <a href=\"https://medium.com/@blockchain101/solidity-bytecode-and-opcode-basics-672e9b1a88c2\">원문</a>을 읽어보는 것을 추천한다. 이미지 같은 경우 내가 공부하면서 얻은 최신이미지로 대체하였다.</p>\n<h3 id=\"시작\" style=\"position:relative;\"><a href=\"#%EC%8B%9C%EC%9E%91\" aria-label=\"시작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>시작</h3>\n<p>smart contract에 대해서 깊게 공부하면 할 수록 <code class=\"language-text\">PUSH1</code>, <code class=\"language-text\">SSTORE</code>, <code class=\"language-text\">CALLVALUE</code> 등과 같은 용어를 사용하게 될 것이다. 이러한 용어들은 무엇이고 우리는 그 용어들에 대해 알아야할까?</p>\n<p>이러한 용어를 알기 위해서는 이더리움 가상 머신(EVM)에 더 깊이 배워야 한다. 나는 이 주제에 대해 구글에 검색해 보았지만 관련 자료가 너무 적어 놀랐다. 아마 너 기술적 이어서일까? 그래서 이 글에서는 EVM 기초를 최대한 간단하게 설명해 보려고 한다.</p>\n<p>다른 유명한 프로그래밍 언어들(C, JAVA)과 마찬가지로 Solidity도 고급 프로그래밍 언어이다. 우리는 고급 프로그래밍 언어를 이해하고 작성하지만, 기계는 고급 프로그래밍언어를 이해하지 못한다. 그래서 solidity compiler를 사용해 EVM(기계)이 이해할 수 있는 언어로 변환시킨다. 이때 기계가 이해할 수 있는 언어는 Bytecode이다.</p>\n<!-- 우리가 Geth와 같은 이더리움 클라이언트를 설치하면 스마트 컨트랙트를 실행하기 위해 특별히 만들어진 경량 운영체제인 이더리움 버추얼 머신도 함께 나온다. -->\n<p>매우 간단한 contract를 예로 들어 보겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">pragma</span> <span class=\"token keyword\">solidity</span> <span class=\"token operator\">^</span><span class=\"token version number\">0.8.11</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">contract</span> <span class=\"token class-name\">MyContract</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">uint</span> i <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">10</span> <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a href=\"https://remix.ethereum.org\">Remix IDE</a>에서 이 코드를 실행하고 contract 내용을 클릭하면 많은 정보를 볼 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 552px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 143.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAAACXBIWXMAABJ0AAASdAHeZh94AAACPklEQVRIx52WV3LbQBBEcRExAURmRM7MsmhTktP9j9KuHogQrXLA8mO0SxV28Cb1QsuLLzgcf2J/+IGyumA8iTDRY1lVjGeC8AjNsgtYTgFZ7aJ7QDcSTIxE1r42NTNo/FOWFxTlBbZToaxekOWf8TBYQTdieXNfI4jGjdDIP+LubcNRoBw6n9dMKxMiEibpEzx/g9X6gLp57ZyqmBAa0wR0PDVTGNPWTCvv3qrkkDmMk09I0rOs/hthmp3vI2S+bKeE45ZwvUryyL0/azAah+oOGd46OMLzGzHmk2RXZ6pha2wNEjFntPliK87o9LbSSiHTSRidpNNn8w0su5Q8Llc7DEeheg4Xyx2C8IR1cJDc6UaK1Wovzh8GayVKjS1DJzzMdbHcwvNrTPSWnOlQKY7G3mOobcgnRPGjOLKcUgrkuJVS+2i6HsOyc9hOAccpYduFULE/mQ7SKhWFB8PoURo5y84ygty7XiOkdfOCwTBQG72PMtSOYyrUg6FiUUwzEzKKQbN5RV2/YDbfilF4VaflN8LROBIHLBSJbun6E1q5VJN0bGbK13b3Da5X3zfL/3r7XfJFQlZ1t/8uAtteA8+y55S8q3mknsPbgxSN8SSUsG9vwh6EmRCRsKqf36r9VXqT+eT1yubuOy1dDj+StFdpKhUnfd/7WgSWc8yJSLMnOF4tdFl+lglRaZlOsV2/ljFjaFMzF0Ggev9piv5mTIkQXsO9yv7777D3vczn+ElD+dP+9yXQ52uB1ip9jl92Qm7bOUv+JgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"myContractDetail\"\n        title=\"myContractDetail\"\n        src=\"/static/b65d0aba2b4fb67f0f596ba0e8003621/08c0b/myContractDetail.png\"\n        srcset=\"/static/b65d0aba2b4fb67f0f596ba0e8003621/e9ff0/myContractDetail.png 180w,\n/static/b65d0aba2b4fb67f0f596ba0e8003621/f21e7/myContractDetail.png 360w,\n/static/b65d0aba2b4fb67f0f596ba0e8003621/08c0b/myContractDetail.png 552w\"\n        sizes=\"(max-width: 552px) 100vw, 552px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>이 경우 컴파일된 코드는 다음과 같습니다.(RunTime Cdoe)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">6080604052600080fdfea26469706673582212208d96441222a360f13b82dab7729b766da71f9e974dfc161fad4d0f49fc65b64664736f6c634300080b0033</code></pre></div>\n<p>이 긴 값들은 바이트코드라고도 알려진 최종 계약의 16진수 표현이다. 리믹스 브라우저의 “Web3 Deploy” 섹션에는 다음과 같이 나와있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> mycontractContract <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">web3<span class=\"token punctuation\">.</span>eth<span class=\"token punctuation\">.</span>Contract</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> mycontract <span class=\"token operator\">=</span> mycontractContract<span class=\"token punctuation\">.</span><span class=\"token function\">deploy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n     <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> <span class=\"token string\">'0x60806040526018600055348015601457600080fd5b50603f8060226000396000f3fe6080604052600080fdfea26469706673582212208d96441222a360f13b82dab7729b766da71f9e974dfc161fad4d0f49fc65b64664736f6c634300080b0033'</span><span class=\"token punctuation\">,</span> \n     <span class=\"token literal-property property\">arguments</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n     <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n     <span class=\"token literal-property property\">from</span><span class=\"token operator\">:</span> web3<span class=\"token punctuation\">.</span>eth<span class=\"token punctuation\">.</span>accounts<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> \n     <span class=\"token literal-property property\">gas</span><span class=\"token operator\">:</span> <span class=\"token string\">'4700000'</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e<span class=\"token punctuation\">,</span> contract</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">,</span> contract<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> contract<span class=\"token punctuation\">.</span>address <span class=\"token operator\">!==</span> <span class=\"token string\">'undefined'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n         console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Contract mined! address: '</span> <span class=\"token operator\">+</span> contract<span class=\"token punctuation\">.</span>address <span class=\"token operator\">+</span> <span class=\"token string\">' transactionHash: '</span> <span class=\"token operator\">+</span> contract<span class=\"token punctuation\">.</span>transactionHash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>간단히 말해 계약을 구축할 때 권장 가스가 4700,000인 16진수를 데이터 필드 아래에 배치하기만 하면 됩니다.\nEVM과 대화하려면 16진법을 생각해봐야한다. 왜 여러분의 지갑이나 transaction address 앞에 “0x”가 있는지 궁금해 본 적이 있지 않은가? 맞다, “0x”로 시작하는 것은 단순히 값이 16진수라는 것을 나타낸다. 16진수 앞에 “0x”를 두는 것은 필수는 아니다. 왜냐하면 EVM은 어떤 값이라도 16진수로 취급하기 때문이다.</p>\n<p>또한 opcode가 표시된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PUSH1 0x80 PUSH1 0x40 MSTORE PUSH1 0x0 DUP1 REVERT INVALID LOG2 PUSH5 0x6970667358 0x22 SLT KECCAK256 DUP14 SWAP7 DIFFICULTY SLT 0x22 LOG3 PUSH1 0xF1 EXTCODESIZE DUP3 0xDA 0xB7 PUSH19 0x9B766DA71F9E974DFC161FAD4D0F49FC65B646 PUSH5 0x736F6C6343 STOP ADDMOD SIGNEXTEND STOP CALLER </code></pre></div>\n<p>opcode는 사람이 읽을 수 있는 low level instruction(명령어)이다. 모든 opcode는 16진수로 되어있다. 예를 들어 <code class=\"language-text\">MSTORE</code>는 <code class=\"language-text\">0x52</code>, <code class=\"language-text\">SSTORE</code>은 <code class=\"language-text\">0x55</code> 등이다. 예전 <a href=\"http://gavwood.com/paper.pdf\">Ethereum Yellow Paper</a>(이더리움 기술 정의서)에 모든 solidity opcode와 16진수 값에 대해 나와있으니 확인해 보는 것을 추천한다.</p>\n<p>EVM은 Stack기반의 Machine이다. 간단히 설명하자면 프링글스 통에 프링글스 과자를 넣는다고 생각해보자. 마지막으로 넣은 과자 조각이 우리가 첫번째로 꺼내는 조각이 될 것이다. 우리는 컴퓨터 공학적인 용어로 LIFO(First In Last Out)라고 부른다.</p>\n<p>일반 산술에서, 우리는 수식을 다음과 같이 쓴다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// Answer is 14. we do multiplication before addition.\n10 + 2 * 2</code></pre></div>\n<p>stack 기반의 machine에서는 LIFO 원리로 작동한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2 2 * 10 + </code></pre></div>\n<p>이것은 <code class=\"language-text\">2</code>를 먼저 스택에 넣고, 그 다음에 또 다른 <code class=\"language-text\">2</code>를 넣고, 그 다음에 곱셈을 수행하라는 것을 의미한다. 결과는 스택 위에 <code class=\"language-text\">4</code>가 놓입니다. 이제 <code class=\"language-text\">4</code> 위에 숫자 <code class=\"language-text\">10</code>을 더하고 결국 두 숫자를 더한다. 스택의 최종 값은 <code class=\"language-text\">14</code>가 됩니다. 이러한 유형의 산술은 Postfix Notation 또는 <a href=\"https://en.wikipedia.org/wiki/Reverse_Polish_notation\">Reverse Polish Notation</a>.</p>\n<p>필자는 다행히 컴퓨터 공학 수업에서 배운 것이 기억나 쉽게 이해할 수 있었다. 어려운 개념은 아니기 때문에, 잘 모르겠다면 postfix notation에 관한 youtube 영상을 몇개 보고와도 잘 이해할 수 있을 것이다.</p>\n<p>스택에 데이터를 넣는 행위를 PUSH 명령어라고 하며 스택에서 데이터를 제거하는 행위를 POP 명령어라고 한다. 위의 예에서 볼 수 있는 가장 일반적인 opcode는 스택에 1바이트의 데이터를 넣는 것을 의미하는 “PUSH1”입니다.</p>\n<p>명령어는 다음과 같이 쓰인다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PUSH1 0x80</code></pre></div>\n<p>스택에 “0x80”의 1바이트 값을 넣는 것을 의미한다. 공교롭게도 “PUSH1”의 16진수 값도 “0x60”이 된다. 의무적 표기가 아닌 “0x”를 제거하면, 바이트코드로 이 논리를 “6080”으로 쓸 수 있다.</p>\n<p>조금 더 살펴보자</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PUSH1 0x80 PUSH1 0x40 MSTORE</code></pre></div>\n<p>우선 MSTORE(0x52)는 2개의 Input을 받고 Output을 내지 않는다. 위의 opcode는 다음을 의미한다.</p>\n<ol>\n<li>PUSH1(0x60): 0x80을 스택에 넣습니다.</li>\n<li>PUSH1(0x40): 0x40을 스택에 넣습니다.</li>\n<li>MSTORE(0x52): 0x60 메모리 공간을 할당하고 0x40 위치로 이동합니다.</li>\n</ol>\n<p>그 결과 바이트코드는 다음과 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">6080604052</code></pre></div>\n<p>사실 우리는 <code class=\"language-text\">6080604052</code>와 같은 마법같은 숫자를 어느 solidity bytecode에서든 볼수 있다. 필자가 실제로 ethernaut에 사용했던 code들을 전부 확인해 보니 모두 <code class=\"language-text\">6080604052</code>로 시작했다.<del>신기방기</del></p>\n<p>좀 더 복잡하게 만들어보자면 <code class=\"language-text\">0x40</code> 이나 <code class=\"language-text\">0x80</code>은 우리가 평상시 사용하는 40 또는 60으로 해석할 수 없다. 위에허 말했듯이 이는 16진수를 사용하고 있기 때문이다. <code class=\"language-text\">0x40</code>은 64, <code class=\"language-text\">0x60</code>은 96과 같다.</p>\n<p>간단히 말해서, “PUSH1 0x80 PUSH1 0x40 MSTORE”는 96바이트의 메모리를 할당하고 64바이트의 시작 부분으로 포인터를 이동하는 것이다. 현재 스크래치 공간은 64바이트, 임시 메모리 저장 공간은 32바이트입니다.\n<del>필자는 이 부분이 잘 이해가 안된다ㅠㅠ 관련해서 공부한 글 더 쓸 예정!</del></p>\n<p>EVM에는 데이터를 저장하는 3개의 장소가 있다. 첫번째로 stack이다. 위의 예와 같이 “PUSH” opcode를 사용하여 데이터를 저장한다. 두 번째로, 메모리(RAM)에서는 “MSTORE” opcode를 사용하고, 마지막으로 storage에 “SSTORE”를 사용하여 데이터를 저장한다. 데이터를 storage에 저장하는데 필요한 가스가 가장 비싸고 stack을 이용하는 것이 가장 저렴하다.</p>\n<h3 id=\"assembly-language\" style=\"position:relative;\"><a href=\"#assembly-language\" aria-label=\"assembly language permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Assembly Language</h3>\n<p>opcode를 이용해 전체 smart contract를 작성하는 것도 가능하다. 바로 여기서 ‘Solidity Assembly Language’가 필요합니다. 이해하기 어렵겠지만 가스를 절약하고 solidity만으로 할 수 없는 일을 하고 싶다면 유용할 수 있습니다.</p>\n<h3 id=\"summary\" style=\"position:relative;\"><a href=\"#summary\" aria-label=\"summary permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Summary</h3>\n<p>우리는 bytecode의 기본과 몇 개의 opcode만 다루었다. 아직 이야기되지 않은 않은 opcode가 너무 많지만, 우리는 적어도 전체적인 컨셉에 대해서 파악할 수 있었다고 생각한다. 우리가 심지어 solidity opcode를 배우는 데 신경써야 하는지에 대한 원래 질문을 거슬러 올라가면- 아마도 그렇다, 아니다.</p>\n<p>smart contract를 작성하기 위해 opcode를 알 필요가 없다. 반면에, EVM 오류 처리는 여전히 매우 원시적이며 Error가 일어났을 때 opcode를 살펴보는게 편리하다. 그렇기 때문에 더 배우는 것이 나쁠 것은 없다고 생각한다.</p>\n<!-- \n## a\n\na.sol -> a.abi, a.bin(bytecode) ->\nbytecode translated to opcode\nyellow paper안에 opcode들이 써있는 ex) push, pop, mstore 등등\n\ninitialize할때 initial code 와 runtime code로 나누어짐, initial code는 constructor등을 가지고 있음, runtime code에는 function 및 state들이 들어가 있음\n\nEVM은 stack기반이다. \n\n -->\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EC%8B%9C%EC%9E%91\">시작</a></li>\n<li><a href=\"#assembly-language\">Assembly Language</a></li>\n<li><a href=\"#summary\">Summary</a></li>\n</ul>\n</div>","excerpt":"👋 Solidity Bytecode and Opcode Basics 이 글은 내가 공부하면서 찾은 이 글을 변역하였다. 이 글은 ethernaut의 magicnumber의 저자가 작성한 글이며 bytecode와 opcode의 기본기에 대해서 다룬다. 나는 ethernaut 문제풀면서 이 개념에 접근하게 되었으며 공부하게 되었다. 글에는 내가 생각하는 부분이 포함되어있을 수도 있기 때문에, 내 글이 이해가 잘 되지 않는다면 원문을 읽어보는 것을 추천한다. 이미지 같은 경우 내가 공부하면서 얻은 최신이미지로 대체하였다. 시작 smart contract에 대해서 깊게 공부하면 할 수록 , ,  등과 같은 용어를 사용하게 될 것이다. 이러한 용어들은 무엇이고 우리는 그 용어들에 대해 알아야할까? 이러한 용어를 알기 위해서는 이더리움 가상 머신(EVM)에 더 깊이 배워야 한다. 나는 이 주제에 대해 구글에 검색해 보았지만 관련 자료가 너무 적어 놀랐다. 아마 너 기술적 이어서일까? 그래서 …","frontmatter":{"date":"January 27, 2022","title":"Solidity Bytecode and Opcode Basics","categories":"EVM","author":"한성원","emoji":"🧢"},"fields":{"slug":"/EVM/SolidityBytecodeandOpcodeBasics/"}},"next":{"id":"74eb4c1f-af90-58f5-8759-65d3172e91e4","html":"<h1 id=\"-1-recovery\" style=\"position:relative;\"><a href=\"#-1-recovery\" aria-label=\" 1 recovery permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👋 1. Recovery</h1>\n<p><strong>Difficulty 6/10</strong></p>\n<ul>\n<li>승리 조건</li>\n<li>코드 분석</li>\n<li>풀이</li>\n</ul>\n<p>순서로 진행 될 것이다.</p>\n<hr>\n<h2 id=\"승리-조건\" style=\"position:relative;\"><a href=\"#%EC%8A%B9%EB%A6%AC-%EC%A1%B0%EA%B1%B4\" aria-label=\"승리 조건 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>승리 조건</h2>\n<ul>\n<li>잃어버린 CA의 주소를 찾고 CA가 가지고 있는 Ether 전부 회수하기</li>\n</ul>\n<hr>\n<h2 id=\"코드-분석\" style=\"position:relative;\"><a href=\"#%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D\" aria-label=\"코드 분석 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>코드 분석</h2>\n<p>이미 잘 설명되어있어 간단한 분석만 주석에 적었다!</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">contract</span> <span class=\"token class-name\">Recovery</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">//generate tokens</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">generateToken</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span> <span class=\"token keyword\">memory</span> _name<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint256</span> _initialSupply<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">SimpleToken</span><span class=\"token punctuation\">(</span>_name<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">,</span> _initialSupply<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">contract</span> <span class=\"token class-name\">SimpleToken</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">using</span> <span class=\"token class-name\">SafeMath</span> <span class=\"token keyword\">for</span> <span class=\"token builtin\">uint256</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// public variables</span>\n    <span class=\"token builtin\">string</span> <span class=\"token keyword\">public</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">mapping</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">uint</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> balances<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// constructor</span>\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span> <span class=\"token keyword\">memory</span> _name<span class=\"token punctuation\">,</span> <span class=\"token builtin\">address</span> _creator<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint256</span> _initialSupply<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\n        name <span class=\"token operator\">=</span> _name<span class=\"token punctuation\">;</span>\n        balances<span class=\"token punctuation\">[</span>_creator<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> _initialSupply<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// collect ether in return for tokens</span>\n    <span class=\"token function\">receive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> <span class=\"token keyword\">payable</span> <span class=\"token punctuation\">{</span>\n        balances<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span><span class=\"token function\">mul</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// allow transfers of tokens</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">transfer</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> _to<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint</span> _amount<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span> \n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>balances<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span> <span class=\"token operator\">>=</span> _amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        balances<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> balances<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">sub</span><span class=\"token punctuation\">(</span>_amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        balances<span class=\"token punctuation\">[</span>_to<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> _amount<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// clean up after ourselves</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">destroy</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> <span class=\"token keyword\">payable</span> _to<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">selfdestruct</span><span class=\"token punctuation\">(</span>_to<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h2 id=\"풀이\" style=\"position:relative;\"><a href=\"#%ED%92%80%EC%9D%B4\" aria-label=\"풀이 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>풀이</h2>\n<p>이 문제에서 우리의 목표는 잃어버린 CA의 주소를 찾고 CA안에 있는 Ether를 회수하는 것이다.\n설명을 읽어보면 Recovery contract를 이용해 SimpleToken contract의 instance를 만들었다. 하지만 instance의 주소는 저장되지 않았고 잃어버리게 되었다고 한다. 그리고 잃어버리기 전에 0.5 Ether를 보냈다고 한다.</p>\n<p>그렇다면 우리는 어떻게하면 찾을 수 있을까?</p>\n<p>주소를 찾는 방법은 2가지가 존재한다.</p>\n<ol>\n<li>Etherscan을 통해 확인하는 방법</li>\n<li>nonce와 생성자 주소를 사용해 확인하는 방법</li>\n</ol>\n<p>필자는 Etherscan을 사용하는 방법으로 문제를 풀었다.</p>\n<h4 id=\"1-etherscan-사용하여-풀기\" style=\"position:relative;\"><a href=\"#1-etherscan-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-%ED%92%80%EA%B8%B0\" aria-label=\"1 etherscan 사용하여 풀기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Etherscan 사용하여 풀기</h4>\n<p>우리가 Ethernaut를 통해 instance를 만들 당시 주소 주어지고, 그 주소를 통해 모든 상호작용이 일어난다.\n그럼으로 instance의 주소를 etherscan에서 검색하여 일어난 transaction을 확인할 수 있다.</p>\n<p>그럼 바로 확인해보자!\n순서는 다음과 같다</p>\n<ol>\n<li>rinkeby testnet의 Etherscan에 접속</li>\n<li>instance 주소 검색</li>\n<li>transaction 확인</li>\n<li>transaction에서 SimpleToken 주소 확인</li>\n<li>SimpleToken에서 destroy() 실행</li>\n</ol>\n<p>우선 Etherscan rinkeby testnet에 접속한다.\n이후 instance 주소를 검색한다. 검색 후 internal transaction을 확인해보면 맨 위에 마지막으로 생성된 transaction에서 SimpleToken이 생성된다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABJ0AAASdAHeZh94AAABS0lEQVQoz31RW27EMAjM/b97qN6kWnU3cfzAGIyngk3zVdXSBAMOMMP29XihVMJ/p1PHGAIeA8wD3dE5fLOFtRbUDB+fT2zfzxeOlNGoo9SG2ijgTTw2RDGnxY86Z8Bj1DnQL8tD8KqC7bUfUcC7/SZ8isAQqM6YKJ0Zohq+iMR9Xg3cus/M2PwTx8dW/ZOyiCKldOeJejRZCzAzTFsXDFt0VMNQpyIxlRd4x2dYp+hyeCH3axdk0rCVGJkEhSTeb2dKeOwZe+mQS3Sn4EL7BDeCxHsB4V332wdC521PFaUxWh8oXUFDIfKeul7U2GNqkGkYMkGsGLog0xe1It+Ig/a214GTvNBEbgPnmdEawdZCLg1HKiit3zqx61kIZ+WQxhZCkpzrW8OjKRIpulhocqYDtdag4NocNFHYLmoAq+LY94BL48eXVUqJNz+N18BSk8cALgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"contract_creation_ethernaut_recov\"\n        title=\"contract_creation_ethernaut_recov\"\n        src=\"/static/8497d961941688a0e4216316aee113ec/37523/contract_creation_ethernaut_recov.png\"\n        srcset=\"/static/8497d961941688a0e4216316aee113ec/e9ff0/contract_creation_ethernaut_recov.png 180w,\n/static/8497d961941688a0e4216316aee113ec/f21e7/contract_creation_ethernaut_recov.png 360w,\n/static/8497d961941688a0e4216316aee113ec/37523/contract_creation_ethernaut_recov.png 720w,\n/static/8497d961941688a0e4216316aee113ec/302a4/contract_creation_ethernaut_recov.png 1080w,\n/static/8497d961941688a0e4216316aee113ec/07a9c/contract_creation_ethernaut_recov.png 1440w,\n/static/8497d961941688a0e4216316aee113ec/a303f/contract_creation_ethernaut_recov.png 1733w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>생성된 contract 클릭해 들어가보면 다음과 같이 나온다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABJ0AAASdAHeZh94AAABVUlEQVQoz11SW24cMQzz/Q/Uu/QzyEc3TbIzfsqyJLOQJrvAVgBhQ6OhTdLp7f0Pvu8nmBe89t74v1QVzAwRxVoCXgs0Z8B7DmzDr98Z6Za/cBwZuTaU2lFqQy4VuTTU1tE6BYmoYv0QOiYvDHJSjnVOjn46zjM2tjfWWnGamb1AzXCcGUQEFyAiWMyh5gkzTGYkZ/afvHxQ1Z5D9rM6YSkFtdYgJGKcdYCWXjdlRWeNf9MYhEGMoy/0uUCjQZggaiHz4dHDu9iLgp1s+SqB6baIIlX3LBccpcVpforZfsIjCuwLj1t791XJ9S3VPnHPA8SCOhhtKpZuiO4IxEPqg+JGSyxCqCQx573HnENtIxUS3DIjD0EhjaTP84CpohPjdm/4yiN89BpM+Pj8xt/Pe3ju1VtDqzX26fJqB7sjnsdakZpLFgPUrvfpQtVDivD09Z3KpeAf5kvBLBDBf/cAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"simpleToken_contract_creation_ethernaut_recov\"\n        title=\"simpleToken_contract_creation_ethernaut_recov\"\n        src=\"/static/b219bc3f010d73b8dcafaf6d05f60c9c/37523/simpleToken_contract_creation_ethernaut_recov.png\"\n        srcset=\"/static/b219bc3f010d73b8dcafaf6d05f60c9c/e9ff0/simpleToken_contract_creation_ethernaut_recov.png 180w,\n/static/b219bc3f010d73b8dcafaf6d05f60c9c/f21e7/simpleToken_contract_creation_ethernaut_recov.png 360w,\n/static/b219bc3f010d73b8dcafaf6d05f60c9c/37523/simpleToken_contract_creation_ethernaut_recov.png 720w,\n/static/b219bc3f010d73b8dcafaf6d05f60c9c/302a4/simpleToken_contract_creation_ethernaut_recov.png 1080w,\n/static/b219bc3f010d73b8dcafaf6d05f60c9c/07a9c/simpleToken_contract_creation_ethernaut_recov.png 1440w,\n/static/b219bc3f010d73b8dcafaf6d05f60c9c/adef7/simpleToken_contract_creation_ethernaut_recov.png 1716w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n나는 transaction이 3개 있는데, 문제를 풀지 않았다면 2개일 것이다.\n<del>문제에서는 0.5 ether이라고 말했지만 실제로는 0.001 ether밖에 없다!</del></p>\n<p>이제 주소를 알았으니 destory()를 실행시켜 ether를 찾아오면 끝난다!</p>\n<p>나는 remix를 사용하여 transaction을 보냈다.</p>\n<p>ethernaut에서 코드를 copy한 후 DEPLOY &#x26; RUN 부분에서 injected web3를 선택하고 address at에 simpletoken 주소를 넣고 실행시킨다.</p>\n<p>그럼 아래 deploy contract에 contract가 나오고 자신의 주소를 넣어 destory()를 실행시키면 완료된다.</p>\n<p>완료 후 ethernaut으로 돌아와 Submit instance를 누르고 조금 기다리면 block이 mine되고, 아래와 같이 뜨며 마무리된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">٩(- ̮̮̃-̃)۶ Well done, You have completed this level!!!</code></pre></div>\n<hr>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p>이번 문제는 평소에 Etherscan을 사용했어서 어렵지 않게 풀 수 있었다. 하지만 처음에 문제 자체가 이해가 안되서 난이도에 비해 시간이 많이 지체된 것 같았다. 그리고 문제를 풀고나니 etherscan을 사용하는 방법말고 <code class=\"language-text\">keccack256(address, nonce)</code>를 사용해 푸는 방법도 있다고 알려주었다. 아마 contract creation이 일어날때 어떻게 생성되는지와 nonce의 중요성을 알려주려고 한 것 같다! Ethernaut 시리즈가 끝나고 nonce를 이용해 다시 한번 문제를 풀어보면 좋을것같다:)!</p>\n<hr>\n<h2 id=\"ref\" style=\"position:relative;\"><a href=\"#ref\" aria-label=\"ref permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>REF</h2>\n<ul>\n<li>rinkeyb network ether faucet: <a href=\"https://faucets.chain.link/rinkeby\">https://faucets.chain.link/rinkeby</a></li>\n<li>ethernaut: <a href=\"https://ethernaut.openzeppelin.com/\">https://ethernaut.openzeppelin.com/</a></li>\n<li>remix IDE: <a href=\"https://remix.ethereum.org\">https://remix.ethereum.org</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EC%8A%B9%EB%A6%AC-%EC%A1%B0%EA%B1%B4\">승리 조건</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D\">코드 분석</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%92%80%EC%9D%B4\">풀이</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"#1-etherscan-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-%ED%92%80%EA%B8%B0\">1. Etherscan 사용하여 풀기</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">마무리</a></p>\n</li>\n<li>\n<p><a href=\"#ref\">REF</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"January 25, 2022","title":"(Ethernaut 취약점 17) Recovery","categories":"취약점분석","author":"한성원","emoji":"🧢"},"fields":{"slug":"/CTFs/17_recovery_ethernaut/17_recovery_ethernaut/"}},"prev":{"id":"89ce1fd0-634f-5e5a-a8c9-643af1a24572","html":"<h1 id=\"-30개의-글을-쓰면서-느낀점\" style=\"position:relative;\"><a href=\"#-30%EA%B0%9C%EC%9D%98-%EA%B8%80%EC%9D%84-%EC%93%B0%EB%A9%B4%EC%84%9C-%EB%8A%90%EB%82%80%EC%A0%90\" aria-label=\" 30개의 글을 쓰면서 느낀점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👋 30개의 글을 쓰면서 느낀점</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.222222222222214%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABJ0AAASdAHeZh94AAAAqUlEQVQoz51Q0QqDMAz0/z/Af/ITBGG+demwVeucbdUbKUTEbQo7CEmuyeVohhOs67rV3nssy/LBH5GdiYlAURTI8xzW2v8F94tKKZRliRjjtaA8cj4Gg0WICHVdo23b01nO2dXFeZ5hjIHWGs65nw6F2xzyf4UQt4vcf1sUXmb2c8mhNMPwRFXdEEKAaSzortH3LvVED0yTR9f1aBqLcXylYF4pSrwIvgGqeyYrndaJMwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"post_개수\"\n        title=\"post_개수\"\n        src=\"/static/f77fc401845fd3f68695745ec36a8c0f/37523/post_%EA%B0%9C%EC%88%98.png\"\n        srcset=\"/static/f77fc401845fd3f68695745ec36a8c0f/e9ff0/post_%EA%B0%9C%EC%88%98.png 180w,\n/static/f77fc401845fd3f68695745ec36a8c0f/f21e7/post_%EA%B0%9C%EC%88%98.png 360w,\n/static/f77fc401845fd3f68695745ec36a8c0f/37523/post_%EA%B0%9C%EC%88%98.png 720w,\n/static/f77fc401845fd3f68695745ec36a8c0f/13e20/post_%EA%B0%9C%EC%88%98.png 741w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>블로그를 시작한지 약 한달 반이 지났다. 초보 블로거로서 약 30개 정도의 블로그 글을 적으며 글쓴이로써 부족한 점을 많이 느낀다. 그래서 글을 적으며 배운점 및 느낀점을 적어내려가보려고 한다.</p>\n<p>이 블로그의 최초 목적은 기술 블로그였다. 내가 배우고 있는 기술에 대해 기록하는 것이 목적인. 그렇기에 내가 공부한 것을 토대로 글을 쓴다. 글을 쓰다 문득 느끼는 점은 나는 무엇을 위해 글을 쓰는가였다. 생각해보면 나는 아래 두가지 목적을 위해 글을 쓰기 시작하는 것 같다.</p>\n<ol>\n<li>나의 발전을 위하여</li>\n<li>남의 발전을 위하여</li>\n</ol>\n<h4 id=\"1번-나의-발전을-위하여\" style=\"position:relative;\"><a href=\"#1%EB%B2%88-%EB%82%98%EC%9D%98-%EB%B0%9C%EC%A0%84%EC%9D%84-%EC%9C%84%ED%95%98%EC%97%AC\" aria-label=\"1번 나의 발전을 위하여 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1번 나의 발전을 위하여.</h4>\n<p>나는 공부를 하면서 내가 공부했던 것들을 돌아볼때가 많다. 문제들을 해결해가다보면 겹치는 부분이 있고, 내가 공부했던 내용을 보면 이해가 더 잘된다. 기록은 나의 발전에 있어서 큰 기어를 하고 있다고 느낀다.</p>\n<p>아직 한달밖에 지나지 않았기에 정말 많은 발전이 있었다고는 말하지 못하겠다. 하지만 일년이 지난다면 다른 기술 블로거들이 말했던 것처럼 분명히 내 발전에 큰 도움이 되었다고 자신있게 말할 수 있을 것이라고 굳게 믿는다.</p>\n<h4 id=\"2번-남의-발전을-위하여\" style=\"position:relative;\"><a href=\"#2%EB%B2%88-%EB%82%A8%EC%9D%98-%EB%B0%9C%EC%A0%84%EC%9D%84-%EC%9C%84%ED%95%98%EC%97%AC\" aria-label=\"2번 남의 발전을 위하여 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2번 남의 발전을 위하여</h4>\n<p>남의 발전을 위하여. 다른 사람들이 내 글을 읽고 도움이 되면 좋겠다라는 생각을 종종했다. 다른 개발 분야(Frontend, Backend등)는 정보를 구하기 너무 쉽다. 인강도 많을 뿐더러 깊게 다루기 때문에 노력만한다면 초심자가 발을 들이기 쉬울 것 같다라는 생각을 했다.</p>\n<p>하지만 블록체인, EVM, Smart Contract과 같은 경우에는 다른 개발 분야에 비해 한국어로 되어있는 자료가 많지 않다. 물론 예전에 비해 한국어로 된 자료는 훨씬 많아졌지만, 더 깊은 이해를 위해서는 영어 유투브와 영어로된 자료들을 찾아보게 된다. 나는 미국에서 5년정도 살다왔기 때문에 큰 문제는 없지만, 영어를 힘들어하는 사람에게는 이보다 높은 진입장벽이 없다. 그렇기에 나의 글이 그들의 발전에 기여할 수 있을 것이라는 생각이 들었다.</p>\n<h4 id=\"기록자로써의-장점과-단점\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%A1%9D%EC%9E%90%EB%A1%9C%EC%8D%A8%EC%9D%98-%EC%9E%A5%EC%A0%90%EA%B3%BC-%EB%8B%A8%EC%A0%90\" aria-label=\"기록자로써의 장점과 단점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기록자로써의 장점과 단점</h4>\n<p>기록자로써 현재 나의 장점은 많은 글을 올리는 것이다. 최대한 공부한 내용을 다 전달하려고 노력한다. 하지만 나는 아직까지 나만을 위한 글을 쓰고있다는 생각이 든다. 다른 사람들이 잘 알아볼 수 있을까? 생각했을때 아직은 아닌 것 같다ㅠㅠ 하루 공부한 내용을 매일 기록하려다보니 내가 지치고 질이 떨어진 것 같다.</p>\n<p>어떻게 좋은 글을 빠르게 쓸 수 있을까? 앞으로 글을 쓸때 꼭 생각해야하는 부분이다. 사람들은 좋은 글을 찾는다. 그렇기에 위 2가지 목적을 이루기 위해서는 좋은 글을 많이 읽는 것과 좋은 글쓰는 것을 연습하는 방법밖에 없다.</p>\n<h4 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h4>\n<p>나 자신 앞으로도 화이팅ㅎ</p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#1%EB%B2%88-%EB%82%98%EC%9D%98-%EB%B0%9C%EC%A0%84%EC%9D%84-%EC%9C%84%ED%95%98%EC%97%AC\">1번 나의 발전을 위하여.</a></li>\n<li><a href=\"#2%EB%B2%88-%EB%82%A8%EC%9D%98-%EB%B0%9C%EC%A0%84%EC%9D%84-%EC%9C%84%ED%95%98%EC%97%AC\">2번 남의 발전을 위하여</a></li>\n<li><a href=\"#%EA%B8%B0%EB%A1%9D%EC%9E%90%EB%A1%9C%EC%8D%A8%EC%9D%98-%EC%9E%A5%EC%A0%90%EA%B3%BC-%EB%8B%A8%EC%A0%90\">기록자로써의 장점과 단점</a></li>\n<li><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">마무리</a></li>\n</ul>\n</div>","frontmatter":{"date":"February 01, 2022","title":"30개의 글을 쓰면서 느낀점","categories":"나","author":"한성원","emoji":"🧢"},"fields":{"slug":"/about_me/impression_30posts/impression_1/"}},"site":{"siteMetadata":{"siteUrl":"https://holyhansss.github.io","comments":{"utterances":{"repo":"holyhansss/holyhansss.github.io"}}}}},"pageContext":{"slug":"/EVM/SolidityBytecodeandOpcodeBasics/","nextSlug":"/CTFs/17_recovery_ethernaut/17_recovery_ethernaut/","prevSlug":"/about_me/impression_30posts/impression_1/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}