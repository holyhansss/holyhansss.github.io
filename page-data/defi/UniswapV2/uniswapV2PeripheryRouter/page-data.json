{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/defi/UniswapV2/uniswapV2PeripheryRouter/",
    "result": {"data":{"cur":{"id":"46407ff2-61e2-5f35-952b-fb4a6ed61162","html":"<h1 id=\"-uniswap-v2-periphery-router\" style=\"position:relative;\"><a href=\"#-uniswap-v2-periphery-router\" aria-label=\" uniswap v2 periphery router permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ Uniswap V2 Periphery Router</h1>\n<p>Uniswap V2 Periphery Routerì—ëŠ” <code class=\"language-text\">UniswapV2Router01.sol</code>ì™€ <code class=\"language-text\">UniswapV2Router02.sol</code>, ë‘ê°€ì§€ Routerê°€ ì¡´ì¬í•œë‹¤. Router01ì—ì„œ ë¬¸ì œê°€ ë°œê²¬ë˜ì–´ Router02ë¥¼ ë§Œë“¤ì—ˆë‹¤ê³  í•œë‹¤. ê·¸ë˜ì„œ ì´ë²ˆ ê¸€ì—ì„œëŠ” Router02 contractë¥¼ ë‹¤ë£¨ë ¤ê³ í•œë‹¤.</p>\n<p>ìš°ì„  periphery contractëŠ” Core contractì˜ í•¨ìˆ˜ë“¤ì„ ë³´ë‹¤ ì‰½ê²Œ ì‚¬ìš©í•˜ê¸°ìœ„í•´ ë§Œë“¤ì–´ì¡Œë‹¤. ìš°ë¦¬ê°€ ì§€ê¸ˆ Uniswap ì›¹í˜ì´ì§€ì—ì„œ ì‚¬ìš©í•˜ëŠ” contractê°€ ë°”ë¡œ periphery contractì´ë‹¤.</p>\n<p>ì´ ê¸€ì„ ì½ê¸° ì „ Core contractë¥¼ ì–´ëŠì •ë„ëŠ” ì´í•´í•˜ì—¬ì•¼ Uniswapì˜ ì „ì²´ì ì¸ êµ¬ì¡°ë¥¼ íŒŒì•…í•˜ëŠ”ë° ë„ì›€ì´ ë  ê²ƒì´ë‹¤.</p>\n<h2 id=\"uniswap-v2-periphery-router-ì£¼ìš”-functions\" style=\"position:relative;\"><a href=\"#uniswap-v2-periphery-router-%EC%A3%BC%EC%9A%94-functions\" aria-label=\"uniswap v2 periphery router ì£¼ìš” functions permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Uniswap V2 Periphery Router ì£¼ìš” functions</h2>\n<p>Router02ì—ëŠ” 26ê°œì˜ functionì´ ì¡´ì¬í•œë‹¤. 26ê°œì˜ functionì„ ëª¨ë‘ ê¸€ë¡œ ì ê¸°ì—ëŠ” ì–‘ì´ ë„ˆë¬´ ë§ì•„ ê°€ì¥ ì¤‘ìš”í•œ ëª‡ê°€ì§€ í•¨ìˆ˜ë“¤ë§Œ ë‹¤ë£¨ë ¤ê³  í•œë‹¤.</p>\n<h3 id=\"addliquidity\" style=\"position:relative;\"><a href=\"#addliquidity\" aria-label=\"addliquidity permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>addLiquidity</h3>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\">    <span class=\"token keyword\">function</span> <span class=\"token function\">_addLiquidity</span><span class=\"token punctuation\">(</span>\n        <span class=\"token builtin\">address</span> tokenA<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">address</span> tokenB<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">uint</span> amountADesired<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">uint</span> amountBDesired<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">uint</span> amountAMin<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">uint</span> amountBMin\n    <span class=\"token punctuation\">)</span> <span class=\"token keyword\">internal</span> virtual <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span> amountA<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint</span> amountB<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// create the pair if it doesn't exist yet</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">IUniswapV2Factory</span><span class=\"token punctuation\">(</span>factory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getPair</span><span class=\"token punctuation\">(</span>tokenA<span class=\"token punctuation\">,</span> tokenB<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">IUniswapV2Factory</span><span class=\"token punctuation\">(</span>factory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">createPair</span><span class=\"token punctuation\">(</span>tokenA<span class=\"token punctuation\">,</span> tokenB<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span> reserveA<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint</span> reserveB<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> UniswapV2Library<span class=\"token punctuation\">.</span><span class=\"token function\">getReserves</span><span class=\"token punctuation\">(</span>factory<span class=\"token punctuation\">,</span> tokenA<span class=\"token punctuation\">,</span> tokenB<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>reserveA <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> reserveB <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token punctuation\">(</span>amountA<span class=\"token punctuation\">,</span> amountB<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>amountADesired<span class=\"token punctuation\">,</span> amountBDesired<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token builtin\">uint</span> amountBOptimal <span class=\"token operator\">=</span> UniswapV2Library<span class=\"token punctuation\">.</span><span class=\"token function\">quote</span><span class=\"token punctuation\">(</span>amountADesired<span class=\"token punctuation\">,</span> reserveA<span class=\"token punctuation\">,</span> reserveB<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>amountBOptimal <span class=\"token operator\">&lt;=</span> amountBDesired<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>amountBOptimal <span class=\"token operator\">>=</span> amountBMin<span class=\"token punctuation\">,</span> <span class=\"token string\">'UniswapV2Router: INSUFFICIENT_B_AMOUNT'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">(</span>amountA<span class=\"token punctuation\">,</span> amountB<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>amountADesired<span class=\"token punctuation\">,</span> amountBOptimal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token builtin\">uint</span> amountAOptimal <span class=\"token operator\">=</span> UniswapV2Library<span class=\"token punctuation\">.</span><span class=\"token function\">quote</span><span class=\"token punctuation\">(</span>amountBDesired<span class=\"token punctuation\">,</span> reserveB<span class=\"token punctuation\">,</span> reserveA<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">assert</span><span class=\"token punctuation\">(</span>amountAOptimal <span class=\"token operator\">&lt;=</span> amountADesired<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>amountAOptimal <span class=\"token operator\">>=</span> amountAMin<span class=\"token punctuation\">,</span> <span class=\"token string\">'UniswapV2Router: INSUFFICIENT_A_AMOUNT'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">(</span>amountA<span class=\"token punctuation\">,</span> amountB<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>amountAOptimal<span class=\"token punctuation\">,</span> amountBDesired<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">addLiquidity</span><span class=\"token punctuation\">(</span>\n        <span class=\"token builtin\">address</span> tokenA<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">address</span> tokenB<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">uint</span> amountADesired<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">uint</span> amountBDesired<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">uint</span> amountAMin<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">uint</span> amountBMin<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">address</span> to<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">uint</span> deadline\n    <span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> virtual override <span class=\"token function\">ensure</span><span class=\"token punctuation\">(</span>deadline<span class=\"token punctuation\">)</span> <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span> amountA<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint</span> amountB<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint</span> liquidity<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token punctuation\">(</span>amountA<span class=\"token punctuation\">,</span> amountB<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token function\">_addLiquidity</span><span class=\"token punctuation\">(</span>tokenA<span class=\"token punctuation\">,</span> tokenB<span class=\"token punctuation\">,</span> amountADesired<span class=\"token punctuation\">,</span> amountBDesired<span class=\"token punctuation\">,</span> amountAMin<span class=\"token punctuation\">,</span> amountBMin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token builtin\">address</span> pair <span class=\"token operator\">=</span> UniswapV2Library<span class=\"token punctuation\">.</span><span class=\"token function\">pairFor</span><span class=\"token punctuation\">(</span>factory<span class=\"token punctuation\">,</span> tokenA<span class=\"token punctuation\">,</span> tokenB<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        TransferHelper<span class=\"token punctuation\">.</span><span class=\"token function\">safeTransferFrom</span><span class=\"token punctuation\">(</span>tokenA<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">,</span> pair<span class=\"token punctuation\">,</span> amountA<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        TransferHelper<span class=\"token punctuation\">.</span><span class=\"token function\">safeTransferFrom</span><span class=\"token punctuation\">(</span>tokenB<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">,</span> pair<span class=\"token punctuation\">,</span> amountB<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        liquidity <span class=\"token operator\">=</span> <span class=\"token function\">IUniswapV2Pair</span><span class=\"token punctuation\">(</span>pair<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">mint</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<p>addLiquidityëŠ” <code class=\"language-text\">addLiquidity</code>ì™€ <code class=\"language-text\">_addLiqiudity</code>ë¡œ ë‚˜ëˆ„ì–´ì ¸ ìˆë‹¤. ìš°ì„  <code class=\"language-text\">addLiquidity</code> í•¨ìˆ˜ë¥¼ call í–ˆì„ë•Œ <code class=\"language-text\">_addLiquidity</code> í•¨ìˆ˜ê°€ ê°€ì¥ ë¨¼ì € ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì—, internal í•¨ìˆ˜ì¸ <code class=\"language-text\">_addLiquidity</code> í•¨ìˆ˜ë¥¼ ì‚´í´ë³´ì.</p>\n<p><code class=\"language-text\">_addLiquidity</code> í•¨ìˆ˜ëŠ” ìœ„ì— ë§í–ˆë“¯ì´ Core Contractì™€ ìƒí˜¸ì‘ìš©í•œë‹¤. line by lineìœ¼ë¡œ í•œë²ˆ ë³´ë„ë¡ í•˜ì.</p>\n<ol>\n<li>ì²˜ìŒ <code class=\"language-text\">_addLiquidity</code> ê°€ í˜¸ì¶œë˜ë©´ pair poolì´ ìƒì„±ë˜ì—ˆëŠ”ì§€ ì•„ë‹Œì§€ë¥¼ í™•ì¸í•œë‹¤. ë§Œì•½ pairê°€ ì—†ë‹¤ë©´ factory contractì˜ <code class=\"language-text\">createPair</code>ì„ í˜¸ì¶œí•´ ìƒˆë¡œìš´ pairë¥¼ ìƒì„±í•œë‹¤.</li>\n<li>ê·¸ í›„ í† í° pairì˜ reserve{0, 1} ê°’ì„ ë°›ì•„ì˜¤ê³ , ë§Œì•½ reserve{0, 1} ê°’ì´ 0ì´ë¼ë©´ pairê°€ ìƒì„±ë˜ì—ˆì§€ë§Œ ì•„ë¬´ tokenì´ ë“¤ì–´ìˆì§€ ì•Šê¸° ë•Œë¬¸ì— amount{A, B}Desiredì˜ ê°’ì„ Amount{0, 1} ê°’ìœ¼ë¡œ ì§€ì •í•´ì¤€ë‹¤.</li>\n<li>ë§Œì•½ reserve{0, 1}ì˜ ê°’ì´ 0ì´ ì•„ë‹ˆë¼ë©´ elseë¬¸ì´ ì‹¤í–‰ëœë‹¤.</li>\n<li>elseë¬¸ì—ì„œëŠ” amountBOptimalì˜ ê°’ ë˜ëŠ” amountAOptimalì„ ì°¾ëŠ”ë‹¤. ë¨¼ì € amountBOptimalì˜ ê°’ì„ ë¨¼ì € í™•ì¸í•´ë³´ê³  ì¡°ê±´ë¬¸ì— ë¶ˆë§Œì¡±í•œë‹¤ë©´ amountAOptimalë¥¼ ê³„ì‚°í•´ ì ìš©í•œë‹¤.</li>\n</ol>\n<p>ë³€ìˆ˜ ì¤‘ amount{A,B}Desiredì´ë¼ëŠ” ê°’ì´ ì¡´ì¬í•˜ëŠ”ë°, ì´ëŠ” poolì— ë„£ê³ ì‹¶ì€ ê° í† í°ì˜ ì–‘ì„ ëœ»í•œë‹¤. amount{A,B}Desired ê°’ì„ í† ëŒ€ë¡œ amount{A,B}Optimalì˜ ê°’ì„ êµ¬í•œë‹¤. ê¸€ê³  ì´ë•Œ <code class=\"language-text\">UniswapV2Library</code>ì˜ <code class=\"language-text\">quote</code> í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤. ì´ í•¨ìˆ˜ëŠ” amountADesiredì„ ì‚¬ìš©í•´ ë™ì¼í•œ ê°€ì¹˜ì˜ Token B(amountBOptimalì˜)ì˜ ê°’ì„ êµ¬í•œë‹¤.\n5. ë§Œì•½ êµ¬í•œ amount{A,B}Optimalì˜ ê°’ì´ amount{A,B}Desiredë³´ë‹¤ ì‘ë‹¤ë©´ assertë¥¼ í™œìš©í•´ transaction ì„ revertì‹œí‚¨ë‹¤.\n6. ì´í›„ amount{A,B}ë¥¼ ë™ì¼í•œ ê°€ì¹˜ì˜ ê°’ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ return í•œë‹¤.</p>\n<p>ê·¸í›„ <code class=\"language-text\">addLiquidity</code> í•¨ìˆ˜ë¡œ ëŒì•„ì™€ ë‚˜ë¨¸ì§€ codeë¥¼ ì‹¤í–‰í•œë‹¤.</p>\n<ol>\n<li><code class=\"language-text\">address pair</code>ë¼ëŠ” ë³€ìˆ˜ì— token Aì™€ Bì˜ Pool addressë¥¼ ê°€ì ¸ì˜¨ë‹¤.</li>\n<li>TansferHelperë¥¼ í†µí•´ pair contractì— ê° í† í°ì„ transferí•œë‹¤.</li>\n<li>ì´í›„ ì œê³µí•œ liquidityë§Œí¼ LP í† í°ì„ mint í•´ì¤€ë‹¤.</li>\n</ol>\n<br>\n<h3 id=\"removeliquidity\" style=\"position:relative;\"><a href=\"#removeliquidity\" aria-label=\"removeliquidity permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>removeLiquidity</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// **** REMOVE LIQUIDITY ****\n    function removeLiquidity(\n        address tokenA,\n        address tokenB,\n        uint liquidity,\n        uint amountAMin,\n        uint amountBMin,\n        address to,\n        uint deadline\n    ) public virtual override ensure(deadline) returns (uint amountA, uint amountB) {\n        address pair = UniswapV2Library.pairFor(factory, tokenA, tokenB);\n        IUniswapV2Pair(pair).transferFrom(msg.sender, pair, liquidity); // send liquidity to pair\n        (uint amount0, uint amount1) = IUniswapV2Pair(pair).burn(to);\n        (address token0,) = UniswapV2Library.sortTokens(tokenA, tokenB);\n        (amountA, amountB) = tokenA == token0 ? (amount0, amount1) : (amount1, amount0);\n        require(amountA >= amountAMin, 'UniswapV2Router: INSUFFICIENT_A_AMOUNT');\n        require(amountB >= amountBMin, 'UniswapV2Router: INSUFFICIENT_B_AMOUNT');\n    }</code></pre></div>\n<br>\n<p><code class=\"language-text\">removeLiquidity</code> í•¨ìˆ˜ëŠ” ìœ„ì—ì„œ add í—¸ë˜ liquidityë¥¼ ì—†ì•¨ ìˆ˜ ìˆë‹¤. line by lineìœ¼ë¡œ ì•Œì•„ë³´ì!</p>\n<ol>\n<li>ë‘ í† í°ì˜ pair addressë¥¼ ë°›ì•„ì˜¨ë‹¤.</li>\n<li>msg.senderê°€ ê°€ì§€ê³  ìˆë˜ lp ë„í°ì„ pair contractì— ë°˜í™˜í•œë‹¤.</li>\n<li>ê·¸ë¦¬ê³  ê·¸ ë¹„ìœ¨ì— ë§ëŠ” amountë§Œí¼ lp í† í°ì„ burn(ì†Œê°)í•œë‹¤.\nì´ í•¨ìˆ˜ì—ì„œ liquidityì— ë„£ì—ë˜ tokenì„ ë°˜í™˜ ë°›ëŠ” ì½”ë“œê°€ ì—†ì–´ ì˜ì•„í•  ìˆ˜ ìˆì§€ë§Œ pairì˜ burn í•¨ìˆ˜ì—ëŠ” burnê³¼ ë™ì‹œì— ê·¸ ë¹„ìœ¨ì— ë§ëŠ” tokenì˜ msg.senderì—ê²Œ ì†¡ê¸ˆí•´ì£¼ëŠ” ê¸°ëŠ¥ì´ ìˆë‹¤.</li>\n<li>TokenAì™€ TokenBì˜ ë” ì‘ì€ ì£¼ì†Œ ê°’ì„ token0ì— í• ë‹¹í•œë‹¤.</li>\n<li>ì´í›„ tokenAì™€ tokenBë¥¼ ì •ë ¹í•´ì¤€ë‹¤.</li>\n<li>requireë¬¸ì„ í†µí•´ amountAì™€ amountBì˜ ê°’ì´ ê° í† í°ì˜ ìµœì†Œê°’ë³´ë‹¤ ì‘ì€ì§€ í™•ì¸í•œ í›„ Amount{A,B}ê°€ returnëœë‹¤\nrequireë¬¸ì„ ì™œ ë’¤ì— ì¼ë‚˜ ê¶ê¸ˆí•  ìˆ˜ë„ ìˆë‹¤. ë§Œì•½ í•¨ìˆ˜ ì•ˆì—ì„œ requireë¬¸ì„ í†µê³¼í•˜ì§€ ëª»í•œë‹¤ë©´ ëª¨ë“  ì§„í–‰ ê³¼ì •ì„ ì´ˆê¸°í™” í•œë‹¤.</li>\n</ol>\n<br>\n<!-- ### swap\n```\n// **** SWAP ****\n    // requires the initial amount to have already been sent to the first pair\n    function _swap(uint[] memory amounts, address[] memory path, address _to) internal virtual {\n        for (uint i; i < path.length - 1; i++) {\n            (address input, address output) = (path[i], path[i + 1]);\n            (address token0,) = UniswapV2Library.sortTokens(input, output);\n            uint amountOut = amounts[i + 1];\n            (uint amount0Out, uint amount1Out) = input == token0 ? (uint(0), amountOut) : (amountOut, uint(0));\n            address to = i < path.length - 2 ? UniswapV2Library.pairFor(factory, output, path[i + 2]) : _to;\n            IUniswapV2Pair(UniswapV2Library.pairFor(factory, input, output)).swap(\n                amount0Out, amount1Out, to, new bytes(0)\n            );\n        }\n    }\n```\n\n<br/>\n\nperiphery contractëŠ” ë„ˆë¬´ ë§ì€ swapê´€ë ¨ í•¨ìˆ˜ë¥¼ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì—, swapì— ê³µí†µì ìœ¼ë¡œ ì“°ì´ëŠ” `_swap`ì— ëŒ€í•´ì„œ ë¶„ì„í•˜ë„ë¡ í•  ê²ƒì´ë‹¤.\nuniswapV2ì—ì„œëŠ” tokenì˜ pairì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì—¬ëŸ¬ê°œì˜ pairë“¤ì„ ê±¸ì³ tokenì„ swapí•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤. \n1. pathëŠ” tokenë“¤ì˜ ì£¼ì†Œë¥¼ ëœ»í•˜ë©°, pathë¥¼ í†µí•´ tokenì˜ ì£¼ì†Œê°’ì„ ë°›ì•„ì˜¨ë‹¤. \n2. tokenì„ libraryì˜ sortToken í•¨ìˆ˜ë¥¼ í†µí•´ ì •ë ¬í•œë‹¤.\n3. amountOut\n -->\n<!-- ## ë§ˆë¬´ë¦¬\nRouter contractì— ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì•Œì•„ë³´ì•˜ë‹¤. ì‚¬ìš©ìê°€ ì§ì ‘ interaction í•˜ëŠ” ë¶€ë¶„ì´ê¸° ë•Œë¬¸ì— ì˜ ì•Œì•„ë‘ì–´ì•¼ í•œë‹¤ê³  ìƒê°í•œë‹¤.\nìš”ì¦˜ì€ ë¶„ì„ë³´ë‹¤ ì§ì ‘ smart contractë¥¼ êµ¬ì¶•í•´ë³´ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤ê³  ëŠë‚€ë‹¤. Defi ì´ì™¸ì—ë„ ìš”ì¦˜ ìœ í–‰í•˜ëŠ” Stepnê³¼ ê°™ì€ ìƒˆë¡œìš´ ì½”ë“œë¥¼ ë¶„ì„í•´ë³´ê³  ì§ì ‘ ìš´ì˜í•´ë³´ê³ ì‹¶ë‹¤ -->\n<h2 id=\"ref\" style=\"position:relative;\"><a href=\"#ref\" aria-label=\"ref permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ref</h2>\n<ul>\n<li><a href=\"https://ethereum.org/en/developers/tutorials/uniswap-v2-annotated-code/#pair-external\">https://ethereum.org/en/developers/tutorials/uniswap-v2-annotated-code/#pair-external</a></li>\n<li><a href=\"https://docs.uniswap.org/protocol/V2/concepts/core-concepts/swaps\">https://docs.uniswap.org/protocol/V2/concepts/core-concepts/swaps</a></li>\n<li><a href=\"https://boohyunsik.tistory.com/9?category=922110\">https://boohyunsik.tistory.com/9?category=922110</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#uniswap-v2-periphery-router-%EC%A3%BC%EC%9A%94-functions\">Uniswap V2 Periphery Router ì£¼ìš” functions</a></p>\n<ul>\n<li><a href=\"#addliquidity\">addLiquidity</a></li>\n<li><a href=\"#removeliquidity\">removeLiquidity</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#ref\">Ref</a></p>\n</li>\n</ul>\n</div>","excerpt":"ğŸ‘‹ Uniswap V2 Periphery Router Uniswap V2 Periphery Routerì—ëŠ” ì™€ , ë‘ê°€ì§€ Routerê°€ ì¡´ì¬í•œë‹¤. Router01ì—ì„œ ë¬¸ì œê°€ ë°œê²¬ë˜ì–´ Router02ë¥¼ ë§Œë“¤ì—ˆë‹¤ê³  í•œë‹¤. ê·¸ë˜ì„œ ì´ë²ˆ ê¸€ì—ì„œëŠ” Router02 contractë¥¼ ë‹¤ë£¨ë ¤ê³ í•œë‹¤. ìš°ì„  periphery contractëŠ” Core contractì˜ í•¨ìˆ˜ë“¤ì„ ë³´ë‹¤ ì‰½ê²Œ ì‚¬ìš©í•˜ê¸°ìœ„í•´ ë§Œë“¤ì–´ì¡Œë‹¤. ìš°ë¦¬ê°€ ì§€ê¸ˆ Uniswap ì›¹í˜ì´ì§€ì—ì„œ ì‚¬ìš©í•˜ëŠ” contractê°€ ë°”ë¡œ periphery contractì´ë‹¤. ì´ ê¸€ì„ ì½ê¸° ì „ Core contractë¥¼ ì–´ëŠì •ë„ëŠ” ì´í•´í•˜ì—¬ì•¼ Uniswapì˜ ì „ì²´ì ì¸ êµ¬ì¡°ë¥¼ íŒŒì•…í•˜ëŠ”ë° ë„ì›€ì´ ë  ê²ƒì´ë‹¤. Uniswap V2 Periphery Router ì£¼ìš” functions Router02ì—ëŠ” 26ê°œì˜ functionì´ ì¡´ì¬í•œë‹¤. 26ê°œì˜ functionì„ ëª¨ë‘ ê¸€ë¡œ ì ê¸°ì—ëŠ” ì–‘ì´ ë„ˆë¬´ ë§ì•„ ê°€ì¥ ì¤‘ìš”í•œ ëª‡ê°€ì§€ í•¨ìˆ˜ë“¤ë§Œ ë‹¤ë£¨ë ¤ê³  í•œë‹¤. addLiquiâ€¦","frontmatter":{"date":"May 13, 2022","title":"Uniswap V2 Periphery Router Contract ë¶„ì„","categories":"Defi","author":"í•œì„±ì›","emoji":"ğŸ§¢"},"fields":{"slug":"/defi/UniswapV2/uniswapV2PeripheryRouter/"}},"next":{"id":"5f3d9179-298f-5954-adfe-cc478885adef","html":"<h1 id=\"-twap---time-weighted-average-price\" style=\"position:relative;\"><a href=\"#-twap---time-weighted-average-price\" aria-label=\" twap   time weighted average price permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ TWAP - Time Weighted Average Price</h1>\n<p>ìˆ˜í•™ì— ì¬ëŠ¥ì´ ì—†ëŠ” ë‚˜\nDefiì— ë“¤ì–´ê°€ ìˆëŠ” ìˆ˜ì‹ì— ëŒ€í•œ ì´í•´ë¥¼ ë”í•˜ê¸° ìœ„í•´ TWAPì— ëŒ€í•´ì„œ ë°°ìš°ê²Œ ë˜ì—ˆë‹¤.</p>\n<h2 id=\"twapì´ë€\" style=\"position:relative;\"><a href=\"#twap%EC%9D%B4%EB%9E%80\" aria-label=\"twapì´ë€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Twapì´ë€</h2>\n<p>TWAP(Time Weighted Average Price)ì´ë€ ë³¸ë˜ ë¯¸êµ­ ì£¼ì‹ ë§¤ìˆ˜ ì£¼ë¬¸ ì¢…ë¥˜ì¤‘ í•˜ë‚˜ë¡œ ì‹œê°„ì„ ë™ì¼í•˜ê²Œ ë‚˜ëˆ„ì–´ ë™ì¼í•œ ìˆ˜ëŸ‰ì„ ê¸°ê³„ì ìœ¼ë¡œ ì£¼ë¬¸í•˜ëŠ” ë°©ë²•ì´ë‹¤. ì¦‰ ì§€ì •ëœ ì‹œê°„ë™ì•ˆì˜ í‰ê·  ê°€ê²©ì¸ ê²ƒì´ë‹¤.</p>\n<p>ì£¼ì‹ì—ì„œì™€ ë‹¤ë¥´ê²Œ uniswapì€ On-Chain Oracleì„ ì œê³µí•˜ê¸° ìœ„í•´ Twapì„ ì‚¬ìš©í•˜ì˜€ë‹¤. ì´ë²ˆ ê¸€ì—ì„œëŠ” Twapì— ëŒ€í•´ì„œ ì•Œì•„ë³´ë„ë¡ í•  ê²ƒì´ê³ , UniswapV2ê°€ ì´ë¥¼ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ê³  ìˆëŠ”ì§€ ì•Œì•„ë³¼ ê²ƒì´ë‹¤.</p>\n<h2 id=\"twap-ì˜ˆì‹œ-1\" style=\"position:relative;\"><a href=\"#twap-%EC%98%88%EC%8B%9C-1\" aria-label=\"twap ì˜ˆì‹œ 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TWAP ì˜ˆì‹œ 1</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 466px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABJ0AAASdAHeZh94AAAB8UlEQVQ4y4VT2XbiMAzlZWaALLYTJ85WylJoCCSFGSgcepin+f9funMk6lCWtg+KJEu60ZXljnAFpCfhOz76v/pwug68vseafLIpbvO+kw59qCgzGTbrDdbNGkVaYP48x+ufV7Yt6D1g61vdAhZZgeV8ieq5wmgwQrNosNvsMMgHN12S9hyfWV3/pGMdt+dyl1RMNlG29O91kkYGiY5vQDsWmQqpK630p7TsrGOd4Pj3H1brPYSvID1xOUMLuCgXCGX4JSDZOoihlIEKEujQXHTfUv4MkGwrLSDn+CzX+XcA9bcrQmP5aAtX3lImkEVZIRAKft+DcPwr8VpNHdo66tC3MaJMNzqfzbH9vUXdbJA9TGGyUStJPkb8rtuzdHC+7WwIk41h0uGZcvj+x6pc8MB56DKEEiEibSB9BR3GCKSGFAHHbYdRECE1OUyUnCkTKHVaTkumrHzVXkQgAh4BaekKpmcvwjZziqvLGdJ+0aXQkI02DEDJaZyyHYcxx+gsiRK2Sci2eeR3LFie5Dgejqir+jTPqkazPD0/epJ0Rm+dlv+wO+Bl+YJVvcJ+u+dG3vZvmI6nl2tDB/Q3mgf5RP1p9ITezx4/y+HDkO3H4pFjVDebzND90cVkOGEWF2vDc/Jkm3zeM8FnNm61XZuPNf8BoMWKyIJaPesAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"TWAP_EX1\"\n        title=\"TWAP_EX1\"\n        src=\"/static/90747886e981fdc51ef69a690e01614f/fc1a1/TWAP_EX1.png\"\n        srcset=\"/static/90747886e981fdc51ef69a690e01614f/e9ff0/TWAP_EX1.png 180w,\n/static/90747886e981fdc51ef69a690e01614f/f21e7/TWAP_EX1.png 360w,\n/static/90747886e981fdc51ef69a690e01614f/fc1a1/TWAP_EX1.png 466w\"\n        sizes=\"(max-width: 466px) 100vw, 466px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ìœ„ ì‚¬ì§„ì„ ì˜ˆë¡œ ë“¤ì–´ë³´ê² ë‹¤. ì´ ì‚¬ì§„ì˜ Average PriceëŠ” ì–´ë–»ê²Œ êµ¬í• ê¹Œ?\nìˆ˜ì‹ìœ¼ë¡œ ë‚˜íƒ€ë‚´ë©´ <code class=\"language-text\">TWAP = (100*4/6) + (200*1/6) + (100*1/6)</code> ì¼ ê²ƒì´ê³  <code class=\"language-text\">TWAP = 700/6 = 116.666...</code>ìœ¼ë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆë‹¤.</p>\n<p>ì¡°ê¸ˆ ë” ë³µì¡í•œ ì˜ˆì‹œë¥¼ í†µí•´ ìˆ˜ì‹ì„ ë§Œë“¤ì–´ë³´ì</p>\n<h2 id=\"twap-ì˜ˆì‹œ-2\" style=\"position:relative;\"><a href=\"#twap-%EC%98%88%EC%8B%9C-2\" aria-label=\"twap ì˜ˆì‹œ 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TWAP ì˜ˆì‹œ 2</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 427px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABJ0AAASdAHeZh94AAACK0lEQVQ4y22T626jQAyF6VZqk8DAXLkTEkKATdJIRN2NKq3U93+qs7IpadT2hzUemPnsczCeFBJREHHM+f06x7wP/RBiJb6dDVYBwiCERxsVKo57yE+5v/Cxb1oM+4Hz+b3wBTzPQyhCeMEywHa9RZmVXJk6uK/8mYfQ0qKqB2zbE6xJEfnhDfr46xEPDw/wCNLUDYq0YNjpcIKO9I+SrXY3JVbZqaCYzpHk56fnCVhXNbI4QyQkmj0BDXfEIApfwNoMebmDijQ/Nx/Ar/Z41NW6rJHYhKsb7WCkgbyTS1IJQJ3TGQZKc5P8DdhsGr5A3RL4Mv5Bu+sRLH2WSZ3FcQEjP4HOJJCh5sLzByMWA9tti6Htsds0DEiLBmlWQywDBuiPoK5mD9N0DWcz7pIYx98npC6FF64Ehv6E4/mK/jDCmZg9M5FCnmRwepJKsBk4Sdaw0nAhetbuX5DlG3g0Q0Q3yiESCjEBRYTYZRgvV+x2w82zew8pz7MK4+Uvuu7Id8kyj7T3bc9ezMNKq5IOkYyhVHybRwqSR7PLP4R0UDqBNilkqCYPnXF4//eOtmnR7ToM3YB1ucamqlGkOaq85H2Zl6jyiue1Kips1huOMivYe3pPhTyS8nZ949/p0B8wnkfu+Hw680pfnWbUaYeu7XAcjmwLwV/HV3Rtz/FyeJmAq8UKaZwitjGstrwWWYHEJcjTHMvnJVtAKw01nV08LfjPIHUqUpzTPZL8H8axWilz34boAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"TWAP_EX2\"\n        title=\"TWAP_EX2\"\n        src=\"/static/5567ab7ad16e48a16579296b732949d7/a7c74/TWAP_EX2.png\"\n        srcset=\"/static/5567ab7ad16e48a16579296b732949d7/e9ff0/TWAP_EX2.png 180w,\n/static/5567ab7ad16e48a16579296b732949d7/f21e7/TWAP_EX2.png 360w,\n/static/5567ab7ad16e48a16579296b732949d7/a7c74/TWAP_EX2.png 427w\"\n        sizes=\"(max-width: 427px) 100vw, 427px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ìš°ë¦¬ëŠ” T0ì—ì„œ Tnê¹Œì§€ì˜ TWAPì„ êµ¬í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ìˆ˜ì‹ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 371px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 11.666666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABJ0AAASdAHeZh94AAAAbklEQVQI102MUQqEMAxEPYHaqmhXC6UlbZMtu/c/3UiDC/vxyEDezNC4oVJFThnnceLTvoghgiJBqkDqG5e7wIURfIDbHVJIkCLa4cza6/++Myzzgh+rWfXayarsXx6FCihlmNFgs5vSPXUf/vMNRKc1bb9t6GYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"TWAP_EX2-1\"\n        title=\"TWAP_EX2-1\"\n        src=\"/static/ffff431493a98893baeca56f5c1f9a0f/d4635/TWAP_EX2-1.png\"\n        srcset=\"/static/ffff431493a98893baeca56f5c1f9a0f/e9ff0/TWAP_EX2-1.png 180w,\n/static/ffff431493a98893baeca56f5c1f9a0f/f21e7/TWAP_EX2-1.png 360w,\n/static/ffff431493a98893baeca56f5c1f9a0f/d4635/TWAP_EX2-1.png 371w\"\n        sizes=\"(max-width: 371px) 100vw, 371px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\nì´ ìˆ˜ì‹ì„ Sigmaë¥¼ ì‚¬ìš©í•´ í‘œí˜„í•œë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ìˆ˜ì‹ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 147px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.70068027210885%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABJ0AAASdAHeZh94AAAB+UlEQVQoz3WSy27TQBSGDYteEtsztsfj8SVuaiVtU1rSNoCU9MYmFRVUBYkFqCAkumNXsWCBxCOwqcSa9+DhPjTjlAWCxS+P/2P/M/Od48lAEvoCLRUbVZ+9ZossSgn9EFv7n4Qv/ul5LrAbkseat4dnfJq/5mh7wvLyivvAKuiG+J3gz/tdWFsLXM1mWM8TgUCEkqWlFW7f3PDz+hvjepPaVBTKEIuIKs3p6QIlFZGISGTiQmxAmRrW8godt7fydushLyZHePfv8WrvlNurGzzP4910zvl4yropudifcTk5Zrqxy+WjE7aqdWpdOF1OTpjvPuHxcIfOqo+nRYKRCamM+fX5Ox+fvmS7P0AFEm19kVApg0kyh6WnDKlM0JEiCiSp1FQqp6dyd23Pcuh0Aso44+v5B368/8L18QW1KYnCqOXkh65x4YLn3xxDV18wdGYgqE1BkWhmzQ6ZVFzN5iiZ0F313c4Wvg1r122TrFo/IFg0zQXaEzSmYLw2ZNzbZFQNmPRHVImhnxY0WUmTVW5dqow151VO64tnY3ookeBJXxIGwnEpYk0eZRip2e4NONufslE3lDqn0gU79ZBnB4eM+gM3AfZG+Z3SzE2EJy0Pd8qWj2Vhu2V3nA0ecDo6oFCZG49a5RwOH/J874gszuiu2vlr/7tj+xt3GwcRmzphcwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"TWAP_EX2-2\"\n        title=\"TWAP_EX2-2\"\n        src=\"/static/a19a67f0ff9d77a6330c7b4ddbf8e270/a70ce/TWAP_EX2-2.png\"\n        srcset=\"/static/a19a67f0ff9d77a6330c7b4ddbf8e270/a70ce/TWAP_EX2-2.png 147w\"\n        sizes=\"(max-width: 147px) 100vw, 147px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ë§Œì•½ T0ë¶€í„° Tnê¹Œì§€ê°€ ì•„ë‹Œ Tkë¶€í„° Tnê¹Œì§€ì˜ TWAPì„ êµ¬í•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ìˆ˜ì‹ìœ¼ë¡œ ë³€ê²½í•˜ë©´ ëœë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 236px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABJ0AAASdAHeZh94AAAB+klEQVQoz3VTSW/TQBgdsTWeGe/2OLYT23ESJ7RZoSFqKkCRqICqhx5ohXrgwAFxQEhI/AQkTogDJ37tQ/O5jlAQh6f59uXNDLOlBVvasIQF13QQuQGqOIdvezBF7fsfLPmvn+lCjrQhuYkiTHA+e4LL5VMM2hm4IeBIh5pZ+8XFXvHbGKYVYUgYLQFTmPh18wU/bj7jZDQju27UJJncJN1ocUrWsj51nGM69YR6iqO0h5PhBIwxvD+9wPfrjyRfHT/HZjhDoVKcHR3j1XSNSTbEs9EC/XYXbS9E7Cq8nK6xffgI83wIxrlEqToYJQVMLvHz7Se8Xp5S13kxRhlniNwQ87zCIM7QjzMseiPEvkISKDiWTfZxp8AoyWsOdfLd+w9QqhS/333FtzcfcLnagt25Byn0mhLCEAS9UevAoHV1nqaJk09CcAlm3vLgSodW6EddbA9XqOICk2xAfJnc2vHXxDf6PlhzO7pTN4zpyYyTEuOkh001palC20Vg1dBPyxYWPNI9soWWtwPThepukibURVNfIQ0i9NsdLIoKnSBCrmJ0wzaqJMOyqFBGKTIVI1fJDlmUgEkhoaELNxzp86BloFQJXkxXeNw/hG/7iP0IHU/hYrbG+XwDw+AUX4MTiMNmwkZuoEn2LZcm17+CLpBLWrsbJDsu/8YfHS8W917pzb8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"TWAP_EX2-3\"\n        title=\"TWAP_EX2-3\"\n        src=\"/static/2a5c0e78c8e68247b708952f273e9695/a7bcd/TWAP_EX2-3.png\"\n        srcset=\"/static/2a5c0e78c8e68247b708952f273e9695/e9ff0/TWAP_EX2-3.png 180w,\n/static/2a5c0e78c8e68247b708952f273e9695/a7bcd/TWAP_EX2-3.png 236w\"\n        sizes=\"(max-width: 236px) 100vw, 236px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ë§ˆì§€ë§‰ìœ¼ë¡œ ìœ„ ìˆ˜ì‹ì€ ì•„ë˜ ìˆ˜ì‹ìœ¼ë¡œ êµ¬í•  ìˆ˜ë„ ìˆë‹¤.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 363px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABJ0AAASdAHeZh94AAABHklEQVQY03VQPU/DMBDNSuLv2HHSNk5bmhQUaCPBQhbE0AGVGSQG/gJiYeDPP3ROpwqGZ5/P7969u8QIjeN+xNLXSC8YBBPgmYBgMsYEySSMNHgZRqz84g+eBM84FFdI6Pg5fuCh22NTBeyaDn3YoC5maKsGfX2JXJpI/n5+x1N/j7VfYBda3IQWc1vGJsOyi00Srx2+Dq8YtwNymYPehbZRhOC1jUTNFT4Pb3i8vjvlHbxyoAnprzIFRCaQWGlix9vQojQFFNdRmG7NNYyY3NHfugoYVleYuwpK6ChsVQ6nJgNOWySkXlBCGDiVT7E02M6WcQU00tB00QFxyJGVOdwZqI7qE1rmObKUoaTRlYXiEoEccQmWsomTcrB/8Ausn5h73gbx2wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"TWAP_EX2-4\"\n        title=\"TWAP_EX2-4\"\n        src=\"/static/c2f7df7033d4e1b21269a6f7f793e1b9/4e786/TWAP_EX2-4.png\"\n        srcset=\"/static/c2f7df7033d4e1b21269a6f7f793e1b9/e9ff0/TWAP_EX2-4.png 180w,\n/static/c2f7df7033d4e1b21269a6f7f793e1b9/f21e7/TWAP_EX2-4.png 360w,\n/static/c2f7df7033d4e1b21269a6f7f793e1b9/4e786/TWAP_EX2-4.png 363w\"\n        sizes=\"(max-width: 363px) 100vw, 363px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"ì¶”ê°€-ì˜ê²¬\" style=\"position:relative;\"><a href=\"#%EC%B6%94%EA%B0%80-%EC%9D%98%EA%B2%AC\" aria-label=\"ì¶”ê°€ ì˜ê²¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì¶”ê°€ ì˜ê²¬</h2>\n<p>ì˜¤ëŠ˜ ë‹¤ë¤˜ë˜ TWAPì€ Uniswap Pair Contractì—ì„œ ë‹¤ë¤˜ë˜ Price{0,1}Cumulativeì— ì ìš©ëœë‹¤. ê·¸ë¦¬ê³  ì´ë¥¼ ì‚¬ìš©í•´ Oracleì„ ì œê³µí•œë‹¤.</p>\n<h2 id=\"ë§ˆì¹˜ë©°\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"ë§ˆì¹˜ë©° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë§ˆì¹˜ë©°</h2>\n<p>Defiì˜ ì¤‘ì‹¬ì¸ ìˆ˜í•™ ìˆ˜ì‹ì„ ë‹¤ë¤„ë´¤ë‹¤. ì•„ì§ê¹Œì§„ ì „ì²´ì ì¸ êµ¬ì¡°ì— ëŒ€í•´ ì™„ë ¥í•˜ê²Œ ì´í•´í•˜ì§€ëŠ” ëª»í–ˆì§€ë§Œ, UniswapV2ë¥¼ ëê¹Œì§€ ë¶„ì„í•´ë³¸ë‹¤ë©´ ë³´ë‹¤ ì™„ë²½í•œ ì´í•´ë¥¼ í•  ìˆ˜ ìˆì„ ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤.</p>\n<h3 id=\"ref\" style=\"position:relative;\"><a href=\"#ref\" aria-label=\"ref permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ref</h3>\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=FNpkUNHHn7c\">https://www.youtube.com/watch?v=FNpkUNHHn7c</a></li>\n<li><a href=\"https://docs.uniswap.org/protocol/V2/concepts/core-concepts/oracles\">https://docs.uniswap.org/protocol/V2/concepts/core-concepts/oracles</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#twap%EC%9D%B4%EB%9E%80\">Twapì´ë€</a></p>\n</li>\n<li>\n<p><a href=\"#twap-%EC%98%88%EC%8B%9C-1\">TWAP ì˜ˆì‹œ 1</a></p>\n</li>\n<li>\n<p><a href=\"#twap-%EC%98%88%EC%8B%9C-2\">TWAP ì˜ˆì‹œ 2</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%B6%94%EA%B0%80-%EC%9D%98%EA%B2%AC\">ì¶”ê°€ ì˜ê²¬</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">ë§ˆì¹˜ë©°</a></p>\n<ul>\n<li><a href=\"#ref\">Ref</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"April 28, 2022","title":"TWAP(Time Weighted Average Price) - Defi Math","categories":"Defi","author":"í•œì„±ì›","emoji":"ğŸ§¢"},"fields":{"slug":"/defi/Defi_Math/Defi_Math_TWAP/"}},"prev":{"id":"04f8cd91-009b-553e-8f2d-18e2f5f24b8b","html":"<h1 id=\"-saltë€-ë¬´ì—‡ì¸ê°€\" style=\"position:relative;\"><a href=\"#-salt%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80\" aria-label=\" saltë€ ë¬´ì—‡ì¸ê°€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ Saltë€ ë¬´ì—‡ì¸ê°€?</h1>\n<h2 id=\"saltë¥¼-ì•Œì•„ë³´ëŠ”-ì´ìœ \" style=\"position:relative;\"><a href=\"#salt%EB%A5%BC-%EC%95%8C%EC%95%84%EB%B3%B4%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"saltë¥¼ ì•Œì•„ë³´ëŠ” ì´ìœ  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Saltë¥¼ ì•Œì•„ë³´ëŠ” ì´ìœ </h2>\n<p>ê°œì¸ì ìœ¼ë¡œ Smart Contractë¥¼ ë¶„ì„í•˜ë‹¤ë³´ë©´ <code class=\"language-text\">salt</code>ë¼ëŠ” ë³€ìˆ˜ë¥¼ ë³¼ë•Œê°€ ë§ì•˜ë‹¤. ë‚´ê°€ ì²˜ìŒ saltë¥¼ ì ‘í•œ ê²ƒì€ <code class=\"language-text\">Uniswap Factory Contract</code>ì˜€ë‹¤. ì´ë•ŒëŠ” í•˜ë‚˜í•˜ë‚˜ì˜ ë³€ìˆ˜ì— ì§‘ì¤‘í•˜ê¸°ë³´ë‹¤ëŠ” Uniswapì˜ êµ¬ì¡°ì™€ ì£¼ìš” í•¨ìˆ˜ ë° ë³€ìˆ˜ë¥¼ ìœ„ì£¼ë¡œ ë´¤ê¸° ë•Œë¬¸ì— saltë¼ëŠ” ë³€ìˆ˜ëŠ” ë³„ìƒê° ì—†ì´ ë„˜ê²¼ì—ˆë‹¤. í•˜ì§€ë§Œ ë‹¤ë¥¸ Smart Contractì—ì„œë„ salt ë³€ìˆ˜ë¥¼ ë°˜ë³µì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ í™•ì¸í•˜ì˜€ê³ , Saltì— ëŒ€í•´ ì•Œì•„ë³¼ í•„ìš”ì„±ì„ ëŠê¼ˆë‹¤.</p>\n<hr>\n<h2 id=\"salt\" style=\"position:relative;\"><a href=\"#salt\" aria-label=\"salt permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Salt</h2>\n<p>ì¼ë°˜ì ìœ¼ë¡œ smart contractì„ ë°°í¬í• ë•ŒëŠ” ë°°í¬í• ë•Œë§ˆë‹¤ ì¦ê°€í•˜ëŠ” ì¹´ìš´í„°(nonce)ì˜ ê°’ì„ ì‚¬ìš©í•˜ì—¬ contractì˜ ì£¼ì†Œê°€ ê³„ì‚°ëœë‹¤. í•˜ì§€ë§Œ ì˜µì…˜ìœ¼ë¡œ saltê°’ì„ ì£¼ëŠ” ê²½ìš° ì¹´ìš´í„°(nonce)ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ë‹¤ë¥¸ ë©”ì»¤ë‹ˆì¦˜ì„ ì‚¬ìš©í•´ contractì˜ ì£¼ì†Œë¥¼ ê³„ì‚°í•œë‹¤.</p>\n<p>saltë¥¼ ì‚¬ìš©í•˜ì—¬ ì£¼ì†Œë¥¼ ê³„ì‚°í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì€ contractì˜ ì£¼ì†Œë¥¼ ì˜ˆì¸¡í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.</p>\n<p>ìœ„í‚¤ë°±ê³¼ì—ëŠ” saltë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ëª…í•˜ê³  ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">In cryptography, a salt is random data that is used as an additional input to a one-way function that hashes data, a password or passphrase.[1]\n[full citation needed] Salts are used to safeguard passwords in storage. Historically, only a cryptographic hash function of the password was stored \non a system, but over time, additional safeguards were developed to protect against duplicate or common passwords being identifiable (as their hashes \nare identical).[2] Salting is one such protection.</code></pre></div>\n<p>í•´ì„í•˜ë©´ saltëŠ” ì•”í˜¸í•™ì—ì„œ ë°ì´í„°ë‚˜ ì•”í˜¸ë¥¼ í•´ì‹œí•˜ëŠ” ë‹¨ë°©í–¥ í•¨ìˆ˜ì— ì¶”ê°€ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì„ì˜ì˜ ë°ì´í„°ì´ë‹¤. saltëŠ” ì €ì¥ì†Œ ì•ˆì— ìˆëŠ” ì•”í˜¸ë¥¼ ë³´í˜¸í•˜ëŠ”ë° ì‚¬ìš©ëœë‹¤. ê³¼ê±°ì—ëŠ” ì•”í˜¸ë¥¼ í•´ì‹œ í•¨ìˆ˜ì—ë§Œ ì˜ì¡´í•´ ì €ì¥ì†Œì— ì €ì¥í–ˆì§€ë§Œ ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ ì¤‘ë³µë˜ê±°ë‚˜ ê³µí†µì ì¸ ì•”í˜¸ì— ëŒ€í•œ ê°€ëŠ¥ì„±ì´ ìƒê²¼ê³  ì´ë¥¼ ë³´í˜¸í•˜ê¸° ìœ„í•œ ì¶”ê°€ ì•ˆì „ì¥ì¹˜ë¡œì¨ saltê°€ ê°œë°œë˜ì—ˆë‹¤.</p>\n<p>solidityì—ì„œ saltì˜ ì˜ˆì‹œëŠ” ë‘ê°€ì§€ ê²½ìš°ì—ì„œ ì°¾ì•„ë³¼ ìˆ˜ ìˆë‹¤.</p>\n<ol>\n<li>create2</li>\n</ol>\n<p>ì²«ë²ˆì§¸ ê²½ìš°ëŠ” solidity assemblyì˜ create2ì´ë‹¤. CREATE2 opcodeë¥¼ ì‚¬ìš©í•˜ë©´ contractê°€ ë°°í¬ë  ì£¼ì†Œë¥¼ ì˜ˆì¸¡í•  ìˆ˜ ìˆê³ , ì‚¬ìš©ì ì˜¨ë³´ë”© ë° í™•ì¥ì„±ì„ ê°œì„ í•  ìˆ˜ ìˆëŠ” ë§ì€ ê°€ëŠ¥ì„±ì´ ì—´ë¦½ë‹ˆë‹¤.(<a href=\"https://docs.openzeppelin.com/cli/2.8/deploying-with-create2\">openzeppelin</a>)</p>\n<hr>\n<h3 id=\"example-from-solidity-docs\" style=\"position:relative;\"><a href=\"#example-from-solidity-docs\" aria-label=\"example from solidity docs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Example from solidity docs</h3>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\">    <span class=\"token comment\">// SPDX-License-Identifier: GPL-3.0</span>\n    <span class=\"token keyword\">pragma</span> <span class=\"token keyword\">solidity</span> <span class=\"token operator\">>=</span><span class=\"token version number\">0.7.0</span> <span class=\"token operator\">&lt;</span><span class=\"token version number\">0.9.0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">contract</span> <span class=\"token class-name\">D</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token builtin\">uint</span> <span class=\"token keyword\">public</span> x<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span> a<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            x <span class=\"token operator\">=</span> a<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token keyword\">contract</span> <span class=\"token class-name\">C</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">function</span> <span class=\"token function\">createDSalted</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">bytes32</span> salt<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint</span> arg<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// This complicated expression just tells you how the address</span>\n            <span class=\"token comment\">// can be pre-computed. It is just there for illustration.</span>\n            <span class=\"token comment\">// You actually only need ``new D{salt: salt}(arg)``.</span>\n            <span class=\"token builtin\">address</span> predictedAddress <span class=\"token operator\">=</span> <span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">uint160</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span><span class=\"token punctuation\">(</span><span class=\"token function\">keccak256</span><span class=\"token punctuation\">(</span>abi<span class=\"token punctuation\">.</span><span class=\"token function\">encodePacked</span><span class=\"token punctuation\">(</span>\n                <span class=\"token builtin\">bytes1</span><span class=\"token punctuation\">(</span><span class=\"token number\">0xff</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                <span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                salt<span class=\"token punctuation\">,</span>\n                <span class=\"token function\">keccak256</span><span class=\"token punctuation\">(</span>abi<span class=\"token punctuation\">.</span><span class=\"token function\">encodePacked</span><span class=\"token punctuation\">(</span>\n                    <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>D<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>creationCode<span class=\"token punctuation\">,</span>\n                    abi<span class=\"token punctuation\">.</span><span class=\"token function\">encode</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n            D d <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">D</span><span class=\"token punctuation\">{</span>salt<span class=\"token punctuation\">:</span> salt<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> predictedAddress<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì˜ˆì‹œë¥¼ ë³´ë©´ CREATE2 opcodeì™€ saltë¥¼ ì‚¬ìš©í•´ ì£¼ì†Œë¥¼ ì˜ˆì¸¡í•˜ê³ , ì‹¤ì œë¡œ ë°°í¬í•¨ contractì™€ ì£¼ì†Œë¥¼ ë¹„êµí•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>\n<ol start=\"2\">\n<li>ì¤‘ë³µ ë³´í˜¸</li>\n</ol>\n<p><a href=\"https://www.damnvulnerabledefi.xyz/challenges/12.html\">Damn Vulnerable Defi</a> 12ë³¸ Climberì— ì‚¬ìš©ëœ saltì´ë‹¤. ì—¬ê¸°ì„œ saltëŠ” Id ì¤‘ë³µì„ ë³´í˜¸í•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœ ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤. ì•„ë˜ ì½”ë“œë¥¼ ë³´ë©´ salt ê°’ì„ ë„£ì–´ hash ê°’ì„ êµ¬í•¨ìœ¼ë¡œì¨ ì¤‘ë³µì„ ë°©ì§€í•˜ê³  ìˆëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\">   <span class=\"token keyword\">function</span> <span class=\"token function\">getOperationId</span><span class=\"token punctuation\">(</span>\n        <span class=\"token builtin\">address</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">calldata</span> targets<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">uint256</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">calldata</span> values<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">bytes</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">calldata</span> dataElements<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">bytes32</span> salt\n    <span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">pure</span> <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">bytes32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">keccak256</span><span class=\"token punctuation\">(</span>abi<span class=\"token punctuation\">.</span><span class=\"token function\">encode</span><span class=\"token punctuation\">(</span>targets<span class=\"token punctuation\">,</span> values<span class=\"token punctuation\">,</span> dataElements<span class=\"token punctuation\">,</span> salt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h2 id=\"ref\" style=\"position:relative;\"><a href=\"#ref\" aria-label=\"ref permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ref</h2>\n<p>openzeppelin docs: <a href=\"https://docs.openzeppelin.com/cli/2.8/deploying-with-create2\">https://docs.openzeppelin.com/cli/2.8/deploying-with-create2</a></p>\n<p>solidity docs: <a href=\"https://docs.soliditylang.org/en/v0.8.16/control-structures.html?highlight=create2#salted-contract-creations-create2\">https://docs.soliditylang.org/en/v0.8.16/control-structures.html?highlight=create2#salted-contract-creations-create2</a></p>\n<hr>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#salt%EB%A5%BC-%EC%95%8C%EC%95%84%EB%B3%B4%EB%8A%94-%EC%9D%B4%EC%9C%A0\">Saltë¥¼ ì•Œì•„ë³´ëŠ” ì´ìœ </a></p>\n</li>\n<li>\n<p><a href=\"#salt\">Salt</a></p>\n<ul>\n<li><a href=\"#example-from-solidity-docs\">Example from solidity docs</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#ref\">Ref</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"August 08, 2022","title":"Saltë€ ë¬´ì—‡ì¸ê°€?","categories":"solidity","author":"í•œì„±ì›","emoji":"ğŸ§¢"},"fields":{"slug":"/S.C/saltë€/"}},"site":{"siteMetadata":{"siteUrl":"https://holyhansss.github.io","comments":{"utterances":{"repo":"holyhansss/holyhansss.github.io"}}}}},"pageContext":{"slug":"/defi/UniswapV2/uniswapV2PeripheryRouter/","nextSlug":"/defi/Defi_Math/Defi_Math_TWAP/","prevSlug":"/S.C/saltë€/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}