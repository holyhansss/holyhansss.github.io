{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/defi/UniswapV2/uniswapV2CoreFactory/",
    "result": {"data":{"cur":{"id":"142fbebc-71eb-5d0e-ac35-d833fab2cf81","html":"<h1 id=\"-uniswap-v2-core-factory\" style=\"position:relative;\"><a href=\"#-uniswap-v2-core-factory\" aria-label=\" uniswap v2 core factory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ Uniswap V2 Core Factory</h1>\n<p>Uniswap V2ëŠ” Coreì™€ Peripheryë¡œ ë‚˜ë‰œë‹¤. Coreì€ Factory ì™€ Pairì„ ì¤‘ì‹¬ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆìœ¼ë©° Core ë§ ê·¸ëŒ€ë¡œ Uniswapì˜ ì‹¬ì¥ ì—­í• ì„ í•œë‹¤. PeripheryëŠ” ì§ì—­í•˜ë©´ ì£¼ë³€ë¶€ë¼ëŠ” ëœ»ìœ¼ë¡œ ì‹¤ì œ ìœ ì €ë“¤ì´ ìƒí˜¸ì‘ìš©ì„ í•˜ëŠ” contractì´ë‹¤.</p>\n<p>ì˜¤ëŠ˜ì€ Uniswap V2 Factory contract í•˜ë‚˜ì— ëŒ€í•´ì„œ ë¶„ì„ì„ í•´ë³¼ ê²ƒì´ë‹¤!</p>\n<h2 id=\"uniswap-v2-factory-interface\" style=\"position:relative;\"><a href=\"#uniswap-v2-factory-interface\" aria-label=\"uniswap v2 factory interface permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Uniswap V2 Factory Interface</h2>\n<p>ìš°ì„  UniswapV2 Factory Contractì˜ Interfaceë¥¼ ë³´ì.</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">pragma</span> <span class=\"token keyword\">solidity</span> <span class=\"token operator\">>=</span><span class=\"token version number\">0.5.0</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">IUniswapV2Factory</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">event</span> <span class=\"token function\">PairCreated</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> <span class=\"token keyword\">indexed</span> token0<span class=\"token punctuation\">,</span> <span class=\"token builtin\">address</span> <span class=\"token keyword\">indexed</span> token1<span class=\"token punctuation\">,</span> <span class=\"token builtin\">address</span> pair<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">feeTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> <span class=\"token keyword\">view</span> <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">feeToSetter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> <span class=\"token keyword\">view</span> <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">getPair</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> tokenA<span class=\"token punctuation\">,</span> <span class=\"token builtin\">address</span> tokenB<span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> <span class=\"token keyword\">view</span> <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> pair<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">allPairs</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> <span class=\"token keyword\">view</span> <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> pair<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">allPairsLength</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> <span class=\"token keyword\">view</span> <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">createPair</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> tokenA<span class=\"token punctuation\">,</span> <span class=\"token builtin\">address</span> tokenB<span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> pair<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">setFeeTo</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">setFeeToSetter</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<p>ì´ 8ê°œì˜ functionê³¼ 1ê°œì˜ eventê°€ ì¡´ì¬í•œë‹¤. ì´ë¦„ë§Œ ë³´ë©° ê°ê°ì˜ ê¸°ëŠ¥ë“¤ì„ ìœ ì¶”í•´ë³´ì!</p>\n<ul>\n<li>feeTo(): feeë¥¼ ì§€ë¶ˆí•  ì£¼ì†Œë¥¼ returní•œë‹¤.</li>\n<li>feeToSetter(): feeë¥¼ ì§€ë¶ˆí•  ì£¼ì†Œë¥¼ setí•œë‹¤.</li>\n<li>getPair(): tokenAì™€ tokenBì˜ pair ì£¼ì†Œë¥¼ returní•œë‹¤.</li>\n<li>allPairs(): indexë¥¼ ë°›ê³  ê·¸ì— í•´ë‹¹í•˜ëŠ” pair ì£¼ì†Œë¥¼ returní•œë‹¤.</li>\n<li>allPairsLength(): pair ì „ì²´ì˜ lengthë¥¼ returní•œë‹¤.</li>\n<li>createPair(): tokenAì™€ tokenBë¥¼ ì¸ìë¡œ ë°›ì•„ pairì„ ìƒì„±í•œë‹¤. (ê°€ì¥ ì¤‘ìš”í•œ í•¨ìˆ˜ê°™ë‹¤!)</li>\n<li>setFeeTo: feeToí•¨ìˆ˜ë¥¼ ì„¤ì¥í•˜ëŠ” í•¨ìˆ˜</li>\n<li>setFeeToSetter: setFeeTo()ë¥¼ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜</li>\n</ul>\n<p>ê°„ë‹¨í•˜ê²ŒëŠ” ê°ì´ ì˜¨ê²ƒ ê°™ë‹¤! ì´ì œ ì „ì²´ ì½”ë“œë¥¼ ë³´ë©° ë¶„ì„í•´ë³´ì!</p>\n<h2 id=\"uniswap-v2-factory-ì½”ë“œ-ë¶„ì„\" style=\"position:relative;\"><a href=\"#uniswap-v2-factory-%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D\" aria-label=\"uniswap v2 factory ì½”ë“œ ë¶„ì„ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Uniswap V2 Factory ì½”ë“œ ë¶„ì„</h2>\n<h3 id=\"ë³€ìˆ˜\" style=\"position:relative;\"><a href=\"#%EB%B3%80%EC%88%98\" aria-label=\"ë³€ìˆ˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë³€ìˆ˜</h3>\n<p>ìš°ì„  ì„ ì–¸ëœ ë³€ìˆ˜ë¶€í„° ì‚´í´ë³´ì!</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\">    <span class=\"token builtin\">address</span> <span class=\"token keyword\">public</span> feeTo<span class=\"token punctuation\">;</span>\n    <span class=\"token builtin\">address</span> <span class=\"token keyword\">public</span> feeToSetter<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">mapping</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">mapping</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">address</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> getPair<span class=\"token punctuation\">;</span>\n    <span class=\"token builtin\">address</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">public</span> allPairs<span class=\"token punctuation\">;</span></code></pre></div>\n<br>\n<p>ì´ 4ê°œì˜ ë³€ìˆ˜ê°€ ì„ ì–¸ë˜ì—ˆë‹¤.</p>\n<ul>\n<li>feeTo: feeë¥¼ ë°›ëŠ” addressì´ë‹¤.</li>\n<li>feeToSetter: feeToì˜ addressë¥¼ ì„¤ì •í•  ìˆ˜ ìˆëŠ” addressì´ë‹¤.</li>\n<li>getPair: ëª¨ë“  token pairê°€ ì €ì¥ë˜ì–´ìˆëŠ” mappingì´ë‹¤. ex) getPair[tokenA][tokenB] = Aì™€ Bì˜ pairì£¼ì†Œ</li>\n<li>allPairs: ëª¨ë“  pairì˜ ì£¼ì†Œë¥¼ ì €ì¥í•´ë†“ëŠ” ë°°ì—´ì´ë‹¤.</li>\n</ul>\n<br>\n<h3 id=\"í•¨ìˆ˜\" style=\"position:relative;\"><a href=\"#%ED%95%A8%EC%88%98\" aria-label=\"í•¨ìˆ˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í•¨ìˆ˜</h3>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\">    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> _feeToSetter<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\n        feeToSetter <span class=\"token operator\">=</span> _feeToSetter<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">allPairsLength</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> <span class=\"token keyword\">view</span> <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> allPairs<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<p>ìš°ì„  ë‘ê°€ì§€ì˜ í•¨ìˆ˜ë¥¼ ë³´ê² ë‹¤. ì²«ë²ˆì§¸ë¡œ constructorì´ë‹¤. constructorëŠ” contractê°€ ë°°í¬ë  ë‹¹ì‹œ ë”± í•œë²ˆ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜ì´ë‹¤. constructorì—ì„œëŠ” feeToSetterì„ ì§€ì •í•œë‹¤.\në‘ë²ˆì§¸ë¡œ allPairsLength í•¨ìˆ˜ì´ë‹¤. ì´ í•¨ìˆ˜ëŠ” í•¨ìˆ˜ ì´ë¦„ ê·¸ëŒ€ë¡œ allPairsì˜ ê¸¸ì´ë¥¼ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜ì´ë‹¤.</p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\">    <span class=\"token keyword\">function</span> <span class=\"token function\">createPair</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> tokenA<span class=\"token punctuation\">,</span> <span class=\"token builtin\">address</span> tokenB<span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> pair<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Token Aì™€ Bì˜ addressê°€ ë‹¤ë¥¸ ê²ƒì„ í™•ì¸í•œë‹¤.</span>\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>tokenA <span class=\"token operator\">!=</span> tokenB<span class=\"token punctuation\">,</span> <span class=\"token string\">'UniswapV2: IDENTICAL_ADDRESSES'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// ì£¼ì†Œì˜ ê°’ì´ ë” ì‘ì€ ê²ƒì„ token0ìœ¼ë¡œ ì§€ì •í•˜ê³  í° ì£¼ì†Œë¥¼ token1ë¡œ ì§€ì •í•œë‹¤.</span>\n        <span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> token0<span class=\"token punctuation\">,</span> <span class=\"token builtin\">address</span> token1<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> tokenA <span class=\"token operator\">&lt;</span> tokenB <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>tokenA<span class=\"token punctuation\">,</span> tokenB<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>tokenB<span class=\"token punctuation\">,</span> tokenA<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token comment\">// token0ì˜ addressê°€ zero addressê°€ ì•„ë‹Œ ê²ƒì„ í™•ì¸í•œë‹¤.</span>\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>token0 <span class=\"token operator\">!=</span> <span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'UniswapV2: ZERO_ADDRESS'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// token0ê³¼ token1ì˜ pairê°€ ì´ë¯¸ ì¡´ì¬í•˜ëŠ”ì§€ì˜ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ë‹¤.</span>\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>getPair<span class=\"token punctuation\">[</span>token0<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>token1<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'UniswapV2: PAIR_EXISTS'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// single check is sufficient</span>\n        \n        <span class=\"token comment\">// contract creation bytecodeë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤.</span>\n        <span class=\"token builtin\">bytes</span> <span class=\"token keyword\">memory</span> bytecode <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>UniswapV2Pair<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>creationCode<span class=\"token punctuation\">;</span>\n        \n        <span class=\"token comment\">// token0ì™€ token1ì˜ ì£¼ì†Œì˜ hashê°’ì„ saltë¼ëŠ” ë³€ìˆ˜ì— ì €ì¥í•œë‹¤.</span>\n        <span class=\"token builtin\">bytes32</span> salt <span class=\"token operator\">=</span> <span class=\"token function\">keccak256</span><span class=\"token punctuation\">(</span>abi<span class=\"token punctuation\">.</span><span class=\"token function\">encodePacked</span><span class=\"token punctuation\">(</span>token0<span class=\"token punctuation\">,</span> token1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token comment\">// opcode create2ë¥¼ ì‚¬ìš©í•´ contractë¥¼ ìƒì„±í•œë‹¤.</span>\n        <span class=\"token keyword\">assembly</span> <span class=\"token punctuation\">{</span>\n            pair <span class=\"token operator\">:=</span> <span class=\"token function\">create2</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span>bytecode<span class=\"token punctuation\">,</span> <span class=\"token number\">32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">mload</span><span class=\"token punctuation\">(</span>bytecode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> salt<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// ìƒì„±ëœ pair contractë¥¼ initializeí•œë‹¤.</span>\n        <span class=\"token function\">IUniswapV2Pair</span><span class=\"token punctuation\">(</span>pair<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span>token0<span class=\"token punctuation\">,</span> token1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// getPair mappingì— pairì˜ ì£¼ì†Œ ê°’ì„ ëŒ€ì…í•œë‹¤.</span>\n        getPair<span class=\"token punctuation\">[</span>token0<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>token1<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> pair<span class=\"token punctuation\">;</span>\n        getPair<span class=\"token punctuation\">[</span>token1<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>token0<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> pair<span class=\"token punctuation\">;</span> <span class=\"token comment\">// populate mapping in the reverse direction</span>\n        \n        <span class=\"token comment\">// allPairsì— pair ì£¼ì†Œë¥¼ ì¶”ê°€í•œë‹¤.</span>\n        allPairs<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>pair<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">emit</span> <span class=\"token function\">PairCreated</span><span class=\"token punctuation\">(</span>token0<span class=\"token punctuation\">,</span> token1<span class=\"token punctuation\">,</span> pair<span class=\"token punctuation\">,</span> allPairs<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>createPairì€ Factory Contractì˜ ê°€ì¥ ì¤‘ìš”í•œ í•¨ìˆ˜ë¼ê³  ìƒê°í•œë‹¤!\nê°„ë‹¨í•œ ë¶„ì„ì€ ì½”ë“œ ìì²´ì— ì£¼ì„ìœ¼ë¡œ ë‚¨ê²¨ë‘ì—ˆë‹¤.</p>\n<p>ì—¬ê¸°ì„œ ë‚˜ëŠ” create2ë¼ëŠ” opcodeë¥¼ ì²˜ìŒ ì ‘í–ˆë‹¤. createê³¼ ë˜‘ê°™ì´ contractë¥¼ ìƒì„±í•˜ì§€ë§Œ create2ëŠ” nonceê°’ì´ ë¹ ì ¸ìˆë‹¤ê³  í•œë‹¤.\nìš°ì„  <code class=\"language-text\">type(UniswapV2Pair).creationCode</code> ë¼ëŠ” ë¶€ë¶„ì—ì„œ ì²˜ìŒ ë§‰í˜”ë‹¤. typeì´ ë­”ê°€~ í•˜ê³  <a href=\"https://docs.soliditylang.org/en/v0.8.10/units-and-global-variables.html?highlight=type#type-information\">solidity docs</a>ë¥¼ ì°¾ì•„ ë³´ì•˜ë‹¤.</p>\n<blockquote>\n<p>type(C).creationCode: Memory byte array that contains the creation bytecode of the contract. This can be used in inline assembly to build custom creation routines, especially by using the create2 opcode. This property can not be accessed in the contract itself or any derived contract. It causes the bytecode to be included in the bytecode of the call site and thus circular references like that are not possible.</p>\n</blockquote>\n<p>ê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•˜ë©´ assemblyë¥¼ í™œìš©í•´ ì»¤ìŠ¤í…€ìœ¼ë¡œ contractë¥¼ ìƒì„±í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤. ê·¸ë¦¬ê³  íŠ¹íˆ create2 opcodeë¥¼ ì‚¬ìš©í•  ë•Œ <code class=\"language-text\">type(C).creationCode</code>ë¥¼ í™œìš© í•  ìˆ˜ ìˆë‹¤.</p>\n<p>create2ë¼ëŠ” opcodeë¥¼ í™œìš©í•˜ë©´ ë§Œë“¤ì–´ì§„ contractì˜ ì£¼ì†Œê°’ì„ ì–»ì„ ìˆ˜ ìˆê³ , ì´ë¥¼ ë°”ë¡œ í™œìš©í•˜ì—¬ <code class=\"language-text\">initialize</code> í•  ìˆ˜ ìˆë‹¤.</p>\n<h2 id=\"ë²ˆì™¸\" style=\"position:relative;\"><a href=\"#%EB%B2%88%EC%99%B8\" aria-label=\"ë²ˆì™¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë²ˆì™¸</h2>\n<p>ê·¸ë¦¬ê³  create2ë¥¼ ì°¾ì•„ë³´ë˜ ì¤‘ ì‹ ê¸°í•œ ê²ƒì„ ë°œê²¬í–ˆë‹¤. create2ëŠ” createì™€ ë‹¤ë¥´ê²Œ nonce ê°’ì´ ë¹ ì ¸ìˆê¸° ë–„ë¬¸ì— ì£¼ì†Œë¥¼ ì˜ˆì¸¡í•  ìˆ˜ ìˆë‹¤.\nì¦‰ createPair()ì—ì„œ ë“¤ì–´ê°€ëŠ” token0ì™€ token1ì˜ ì£¼ì†Œë¥¼ ì•ˆë‹¤ë©´ contractì˜ ì£¼ì†Œë¥¼ ì˜ˆì¸¡ í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.</p>\n<p>ê·¸ë¦¬ê³  ë§Œì•½ token0ì™€ token1ì˜ pair contarctì— selfdesturct ì •ì˜ ë˜ì–´ìˆê³ , ì´ê°€ ì‹¤í–‰ëœë‹¤ë©´ contractëŠ” ì‚­ì œë  ê²ƒì´ë‹¤. í•˜ì§€ë§Œ ìš°ë¦¬ëŠ” token0ì™€ token1ì˜ ì£¼ì†Œë¥¼ ì•Œê¸° ë•Œë¬¸ì— ì‚­ì œëœ contractì˜ ì£¼ì†Œì™€ ê°™ì€ ì£¼ì†Œë¡œ contractë¥¼ ë°°í¬í•  ìˆ˜ë„ ìˆë‹¤.</p>\n<p>í•˜ì§€ë§Œ ë‹¤í–‰íˆ contractê°€ ì´ë¯¸ ì¡´ì¬í•˜ê³  selfdesturctê°€ ë¶ˆë¦¬ì§€ ì•ŠëŠ”ë‹¤ë©´ contract ì£¼ì†Œë¥¼ ëºì–´ì˜¤ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•˜ë‹¤.</p>\n<p>create2ëŠ” ëª‡ê°€ì§€ ì·¨ì•½ì ì„ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì— í™•ì‹¤íˆ ì•Œê³  ì“°ì§€ ì•ŠëŠ”ë‹¤ë©´ ìœ„í—˜ í• ìˆ˜ë„ ìˆë‹¤. <del>(ë‹¤ìŒì—” create2 ì·¨ì•½ì ì— ëŒ€í•´ì„œ ë‹¤ë£¨ì–´ë³´ì!)</del></p>\n<h2 id=\"ë§ˆë¬´ë¦¬\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"ë§ˆë¬´ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë§ˆë¬´ë¦¬</h2>\n<p>ì‹œí—˜ê¸°ê°„ì´ë¼ ê·¸ëŸ°ì§€ í•™êµ ê³µë¶€ëŠ” ì§‘ì¤‘ì´ ì˜ ì•ˆë˜ì„œ ë¶„ì„ì„ í•´ë³´ì•˜ë‹¤!ã…‹ã…‹ã…‹ assemblyëŠ” ì•„ì§ ìµìˆ™í•˜ì§€ ì•Šì•„ì„œì¸ì§€ ì™„ì „íˆ ì´í•´í•˜ê¸°ê¹Œì§€ ì‹œê°„ì´ ê±¸ë ¸ë‹¤. <del>ì•„ì§ ê°ˆê¸¸ì´ ë©€ë‹¤ëŠ” ê²ƒã…œã…œ</del> ë‹¤ìŒ ë¶„ì„ì€ Pair contractë¥¼ í•´ë³´ë„ë¡ í•˜ê² ë‹¤!</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#uniswap-v2-factory-interface\">Uniswap V2 Factory Interface</a></p>\n</li>\n<li>\n<p><a href=\"#uniswap-v2-factory-%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D\">Uniswap V2 Factory ì½”ë“œ ë¶„ì„</a></p>\n<ul>\n<li><a href=\"#%EB%B3%80%EC%88%98\">ë³€ìˆ˜</a></li>\n<li><a href=\"#%ED%95%A8%EC%88%98\">í•¨ìˆ˜</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%B2%88%EC%99%B8\">ë²ˆì™¸</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">ë§ˆë¬´ë¦¬</a></p>\n</li>\n</ul>\n</div>","excerpt":"ğŸ‘‹ Uniswap V2 Core Factory Uniswap V2ëŠ” Coreì™€ Peripheryë¡œ ë‚˜ë‰œë‹¤. Coreì€ Factory ì™€ Pairì„ ì¤‘ì‹¬ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆìœ¼ë©° Core ë§ ê·¸ëŒ€ë¡œ Uniswapì˜ ì‹¬ì¥ ì—­í• ì„ í•œë‹¤. PeripheryëŠ” ì§ì—­í•˜ë©´ ì£¼ë³€ë¶€ë¼ëŠ” ëœ»ìœ¼ë¡œ ì‹¤ì œ ìœ ì €ë“¤ì´ ìƒí˜¸ì‘ìš©ì„ í•˜ëŠ” contractì´ë‹¤. ì˜¤ëŠ˜ì€ Uniswap V2 Factory contract í•˜ë‚˜ì— ëŒ€í•´ì„œ ë¶„ì„ì„ í•´ë³¼ ê²ƒì´ë‹¤! Uniswap V2 Factory Interface ìš°ì„  UniswapV2 Factory Contractì˜ Interfaceë¥¼ ë³´ì. ì´ 8ê°œì˜ functionê³¼ 1ê°œì˜ eventê°€ ì¡´ì¬í•œë‹¤. ì´ë¦„ë§Œ ë³´ë©° ê°ê°ì˜ ê¸°ëŠ¥ë“¤ì„ ìœ ì¶”í•´ë³´ì! feeTo(): feeë¥¼ ì§€ë¶ˆí•  ì£¼ì†Œë¥¼ returní•œë‹¤. feeToSetter(): feeë¥¼ ì§€ë¶ˆí•  ì£¼ì†Œë¥¼ setí•œë‹¤. getPair(): tokenAì™€ tokenBì˜ pair ì£¼ì†Œë¥¼ returní•œë‹¤. allPairs(): indexë¥¼ ë°›ê³ â€¦","frontmatter":{"date":"April 19, 2022","title":"Uniswap V2 Core Factory Contract ë¶„ì„","categories":"Defi","author":"í•œì„±ì›","emoji":"ğŸ§¢"},"fields":{"slug":"/defi/UniswapV2/uniswapV2CoreFactory/"}},"next":{"id":"6004aea0-10c9-582c-a907-40cb1006a5ea","html":"<h1 id=\"-eip-2981ì—-ëŒ€í•˜ì—¬-royalty-standard---ì¬íŒë§¤-ìˆ˜ìˆ˜ë£Œ\" style=\"position:relative;\"><a href=\"#-eip-2981%EC%97%90-%EB%8C%80%ED%95%98%EC%97%AC-royalty-standard---%EC%9E%AC%ED%8C%90%EB%A7%A4-%EC%88%98%EC%88%98%EB%A3%8C\" aria-label=\" eip 2981ì— ëŒ€í•˜ì—¬ royalty standard   ì¬íŒë§¤ ìˆ˜ìˆ˜ë£Œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ EIP-2981ì— ëŒ€í•˜ì—¬ (Royalty Standard) -> ì¬íŒë§¤ ìˆ˜ìˆ˜ë£Œ</h1>\n<h2 id=\"ë¬´ì—‡ì´ë©°-ì™œ-ë“±ì¥í•˜ì˜€ë‚˜\" style=\"position:relative;\"><a href=\"#%EB%AC%B4%EC%97%87%EC%9D%B4%EB%A9%B0-%EC%99%9C-%EB%93%B1%EC%9E%A5%ED%95%98%EC%98%80%EB%82%98\" aria-label=\"ë¬´ì—‡ì´ë©° ì™œ ë“±ì¥í•˜ì˜€ë‚˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë¬´ì—‡ì´ë©° ì™œ ë“±ì¥í•˜ì˜€ë‚˜?</h2>\n<p>EIP-2981ì€ NFT(Non-Furgable Token)ì— ëŒ€í•œ Royalty(ì¬íŒë§¤ ìˆ˜ìˆ˜ë£Œ) ì§€ê¸‰ ì •ë³´ë¥¼ ì €ì¥í•´ë‘ëŠ” í‘œì¤€ì´ë‹¤.</p>\n<p>í˜„ì¬ NFTì˜ Royalty ì¢€ ì´ìƒí•˜ë‹¤. ì§„ì§œ ë§ ê·¸ëŒ€ë¡œ ì´ìƒí•˜ë‹¤.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABJ0AAASdAHeZh94AAABt0lEQVQoz4VRZ2/iQBD1//9biA8ICDUkuBtwy9pxY826rN9p1odzkZBu7KcpmnlTVpNSQsoBwzCAhOyn/wqg/69+Be1yS6GbMT71CIYV4+p/4+McwrQZjh8+LJepBiQTqar9+f4VrZcSbdujaToI0aHrJIRoJ5/0uIWcisgenlvI35Nrv+gHoG1aVGWFmnPlN6JRuN85kiRBkRd4JUSsVv5p+yRsUPManNfo2k41oGR+5/B9H7quI/AD+Dcf7Ivhdr2hLMqJVHs8HiCQ5HkBy3ZH/k4iyzLYjjfdr65r5FmuUBQFqqpCnudTvVo5TVMQZC8RxV84Gxb6oQNvOFiS4lM3p8OXZanWjuMYjDGlCVTf9/34KEIINM14J7pdkqTIqgznUIeo7si+M1COeAilPc/DarWC67oKl8sFtu0om3MOjTpSt4QliKMYtmUgigLEYYTosAMLQyQsVfeinNPphNlsBtM0J1LLssbbBgE0CjiOA9dxYRgG3k/vcL1nbIw7tgPP9XA8HrFYLLBer9WU8/kcy+US18tVTUpcGiUpHP6P/W6P7WaL3Xan9Nv6DZvNBof9QYFy/gBDP0Bp4JJUOQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Royalty_System\"\n        title=\"Royalty_System\"\n        src=\"/static/dbe4c33284caa1f7b56906c9d23a46e3/37523/Royalty_System.png\"\n        srcset=\"/static/dbe4c33284caa1f7b56906c9d23a46e3/e9ff0/Royalty_System.png 180w,\n/static/dbe4c33284caa1f7b56906c9d23a46e3/f21e7/Royalty_System.png 360w,\n/static/dbe4c33284caa1f7b56906c9d23a46e3/37523/Royalty_System.png 720w,\n/static/dbe4c33284caa1f7b56906c9d23a46e3/8c857/Royalty_System.png 761w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\nìœ„ ì‚¬ì§„ì„ ë³´ë©´ ì•Œ ìˆ˜ ìˆë‹¤ì‹œí”¼, marketplaceë§ˆë‹¤ royalty ì§€ê¸‰ ê¸°ì¤€ì´ ë‹¤ë¥´ë‹¤. ê·¸ëŸ¬ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œê°€ ì¼ì–´ë‚  ìˆ˜ ìˆë‹¤.\n<p>ì˜ˆë¥¼ ë“¤ì— OpenSeaì—ì„œ Aê°€ ì‘í’ˆì„ ë¯¼íŒ…í•˜ì—¬ íŒë‹¤ê³  ê°€ì •í•´ë³´ì. ê·¸ë¦¬ê³  10%ì˜ royaltyë¥¼ ì ìš©í–ˆë‹¤ê³  ìƒê°í•´ë³´ì.</p>\n<ol>\n<li>AëŠ” Openseaë¥¼ ì‚¬ìš©í•´ Bì—ê²Œ ì‘í’ˆ íŒë§¤ë¥¼ í†µí•´ ëˆì„ ë²Œì—ˆë‹¤.</li>\n<li>BëŠ” Openseaì—ì„œ ë‹¤ì‹œ ì‘í’ˆì„ C íŒë§¤í•´ ìˆ˜ìµì˜ 90%ë¥¼ ì±™ê¸´ê³ , 10%ëŠ” Aì—ê²Œ ëŒì•„ê°„ë‹¤.</li>\n<li>CëŠ” Openseaê°€ ì•„ë‹Œ Raribleì—ê°€ì„œ ì‘í’ˆì„ ì¬íŒë§¤ í–ˆë‹¤.</li>\n<li>CëŠ” ëˆì„ ë°›ì§€ë§Œ AëŠ” ì‘í’ˆì— ëŒ€í•œ Royaltyë¥¼ ë°›ì§€ ëª»í•œë‹¤.</li>\n</ol>\n<p>í˜„ì¬ ëŒ€ë¶€ë¶„ì˜ marketplaceëŠ” Royaltyì— ëŒ€í•´ì„œ í˜¸í™˜ë˜ì§€ ì•ŠëŠ”ë‹¤.\nì´ ë¶€ë¶„ì„ ë³´ì•ˆí•˜ê¸° ìœ„í•´ì„œ EIP-2981ì´ ë“±ì¥í•˜ê²Œ ë˜ì—ˆë‹¤.</p>\n<br>\n<br>\n<h2 id=\"ì €ì¥ìˆ˜ì¥ì´ë¼ê³ \" style=\"position:relative;\"><a href=\"#%EC%A0%80%EC%9E%A5%EC%88%98%EC%9E%A5%EC%9D%B4%EB%9D%BC%EA%B3%A0\" aria-label=\"ì €ì¥ìˆ˜ì¥ì´ë¼ê³  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì €ì¥ìˆ˜ì¥ì´ë¼ê³ ?</h2>\n<p>ê·¸ë ‡ë‹¤ EIP-2981ì€ Royaltyì˜ ì •ë³´ë¥¼ ì €ì¥í•´ ë†“ëŠ” ë°©ë²•ì„ ë§í•œë‹¤.</p>\n<p>ê·¸ë ‡ë‹¤ë©´ ì™œ MarketPlaceëŠ” ì™œ royalty standardë¥¼ ì‚¬ìš©í• ê¹Œ?</p>\n<ul>\n<li>Royalty Standardë¥¼ ì‚¬ìš©í•˜ê²Œ ëœë‹¤ë©´ í”Œë«í¼ê°„ì˜ í˜¸í™˜ì„±ì´ ìƒê¸´ë‹¤. ì´ëŠ” ì›ì‘ìë¥¼ ë³´í˜¸í•  ìˆ˜ ìˆëŠ” í•˜ë‚˜ì˜ ìˆ˜ë‹¨ì´ ë˜ë©°, ë” ë§ì€ ì‚¬ìš©ìë¥¼ ëŒì–´ë“¤ì¼ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.</li>\n</ul>\n<br>\n<br>\n<h2 id=\"openseaëŠ”-ì–´ë–»ê²Œ-í•˜ê³ -ìˆëŠ”ê°€\" style=\"position:relative;\"><a href=\"#opensea%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%98%EA%B3%A0-%EC%9E%88%EB%8A%94%EA%B0%80\" aria-label=\"openseaëŠ” ì–´ë–»ê²Œ í•˜ê³  ìˆëŠ”ê°€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>OpenseaëŠ” ì–´ë–»ê²Œ í•˜ê³  ìˆëŠ”ê°€?</h2>\n<p>í˜„ì¬ëŠ” ê°ìì˜ í”Œë«í¼ ë§ˆë‹¤ royaltyë¥¼ ì ìš©í•˜ëŠ” ë°©ë²•ì´ ë‹¤ë¥´ë‹¤. Openseaì™€ ê°™ì€ ê²½ìš°ëŠ” smart contractì— contractURIë¥¼ ì •ì˜í•´ë†“ëŠ” ê²ƒìœ¼ë¡œ jsoníŒŒì¼ì˜ ë§í¬ë¥¼ ë„£ëŠ”ë‹¤. ê·¸ë¦¬ê³  json íŒŒì¼ì€ collectionì˜ ì´ë¦„, ì„¤ëª…, ë©”ì¸ ì´ë¯¸ì§€, Royalty Info ë“±ì„ ê°€ì§„ë‹¤.</p>\n<br>\n<br>\n<h2 id=\"marketplaceëŠ”-ì§€ê¸ˆ-royalty-standardë¥¼-ì ìš©í•˜ì˜€ë‚˜\" style=\"position:relative;\"><a href=\"#marketplace%EB%8A%94-%EC%A7%80%EA%B8%88-royalty-standard%EB%A5%BC-%EC%A0%81%EC%9A%A9%ED%95%98%EC%98%80%EB%82%98\" aria-label=\"marketplaceëŠ” ì§€ê¸ˆ royalty standardë¥¼ ì ìš©í•˜ì˜€ë‚˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MarketplaceëŠ” ì§€ê¸ˆ royalty standardë¥¼ ì ìš©í•˜ì˜€ë‚˜?</h2>\n<p>í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•´ë³¸ ê²°ê³¼ ì•„ì§ ì ìš©ì´ ë˜ì§€ëŠ” ì•Šì•˜ë‹¤. í•˜ì§€ë§ˆ ëª‡ë‹¬ ë‚´ì— ì ìš© ë  ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤</p>\n<hr>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EB%AC%B4%EC%97%87%EC%9D%B4%EB%A9%B0-%EC%99%9C-%EB%93%B1%EC%9E%A5%ED%95%98%EC%98%80%EB%82%98\">ë¬´ì—‡ì´ë©° ì™œ ë“±ì¥í•˜ì˜€ë‚˜?</a></li>\n<li><a href=\"#%EC%A0%80%EC%9E%A5%EC%88%98%EC%9E%A5%EC%9D%B4%EB%9D%BC%EA%B3%A0\">ì €ì¥ìˆ˜ì¥ì´ë¼ê³ ?</a></li>\n<li><a href=\"#opensea%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%98%EA%B3%A0-%EC%9E%88%EB%8A%94%EA%B0%80\">OpenseaëŠ” ì–´ë–»ê²Œ í•˜ê³  ìˆëŠ”ê°€?</a></li>\n<li><a href=\"#marketplace%EB%8A%94-%EC%A7%80%EA%B8%88-royalty-standard%EB%A5%BC-%EC%A0%81%EC%9A%A9%ED%95%98%EC%98%80%EB%82%98\">MarketplaceëŠ” ì§€ê¸ˆ royalty standardë¥¼ ì ìš©í•˜ì˜€ë‚˜?</a></li>\n</ul>\n</div>","frontmatter":{"date":"March 29, 2022","title":"EIP-2981ì— ëŒ€í•˜ì—¬ (Royalty Standard)","categories":"NFT","author":"í•œì„±ì›","emoji":"ğŸ§¢"},"fields":{"slug":"/NFT/EIP-2981ì—ëŒ€í•˜ì—¬/EIP-2981ì—ëŒ€í•˜ì—¬/"}},"prev":{"id":"46407ff2-61e2-5f35-952b-fb4a6ed61162","html":"<h1 id=\"-uniswap-v2-periphery-router\" style=\"position:relative;\"><a href=\"#-uniswap-v2-periphery-router\" aria-label=\" uniswap v2 periphery router permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ Uniswap V2 Periphery Router</h1>\n<p>Uniswap V2 Periphery Routerì—ëŠ” <code class=\"language-text\">UniswapV2Router01.sol</code>ì™€ <code class=\"language-text\">UniswapV2Router02.sol</code>, ë‘ê°€ì§€ Routerê°€ ì¡´ì¬í•œë‹¤. Router01ì—ì„œ ë¬¸ì œê°€ ë°œê²¬ë˜ì–´ Router02ë¥¼ ë§Œë“¤ì—ˆë‹¤ê³  í•œë‹¤. ê·¸ë˜ì„œ ì´ë²ˆ ê¸€ì—ì„œëŠ” Router02 contractë¥¼ ë‹¤ë£¨ë ¤ê³ í•œë‹¤.</p>\n<p>ìš°ì„  periphery contractëŠ” Core contractì˜ í•¨ìˆ˜ë“¤ì„ ë³´ë‹¤ ì‰½ê²Œ ì‚¬ìš©í•˜ê¸°ìœ„í•´ ë§Œë“¤ì–´ì¡Œë‹¤. ìš°ë¦¬ê°€ ì§€ê¸ˆ Uniswap ì›¹í˜ì´ì§€ì—ì„œ ì‚¬ìš©í•˜ëŠ” contractê°€ ë°”ë¡œ periphery contractì´ë‹¤.</p>\n<p>ì´ ê¸€ì„ ì½ê¸° ì „ Core contractë¥¼ ì–´ëŠì •ë„ëŠ” ì´í•´í•˜ì—¬ì•¼ Uniswapì˜ ì „ì²´ì ì¸ êµ¬ì¡°ë¥¼ íŒŒì•…í•˜ëŠ”ë° ë„ì›€ì´ ë  ê²ƒì´ë‹¤.</p>\n<h2 id=\"uniswap-v2-periphery-router-ì£¼ìš”-functions\" style=\"position:relative;\"><a href=\"#uniswap-v2-periphery-router-%EC%A3%BC%EC%9A%94-functions\" aria-label=\"uniswap v2 periphery router ì£¼ìš” functions permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Uniswap V2 Periphery Router ì£¼ìš” functions</h2>\n<p>Router02ì—ëŠ” 26ê°œì˜ functionì´ ì¡´ì¬í•œë‹¤. 26ê°œì˜ functionì„ ëª¨ë‘ ê¸€ë¡œ ì ê¸°ì—ëŠ” ì–‘ì´ ë„ˆë¬´ ë§ì•„ ê°€ì¥ ì¤‘ìš”í•œ ëª‡ê°€ì§€ í•¨ìˆ˜ë“¤ë§Œ ë‹¤ë£¨ë ¤ê³  í•œë‹¤.</p>\n<h3 id=\"addliquidity\" style=\"position:relative;\"><a href=\"#addliquidity\" aria-label=\"addliquidity permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>addLiquidity</h3>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\">    <span class=\"token keyword\">function</span> <span class=\"token function\">_addLiquidity</span><span class=\"token punctuation\">(</span>\n        <span class=\"token builtin\">address</span> tokenA<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">address</span> tokenB<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">uint</span> amountADesired<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">uint</span> amountBDesired<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">uint</span> amountAMin<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">uint</span> amountBMin\n    <span class=\"token punctuation\">)</span> <span class=\"token keyword\">internal</span> virtual <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span> amountA<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint</span> amountB<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// create the pair if it doesn't exist yet</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">IUniswapV2Factory</span><span class=\"token punctuation\">(</span>factory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getPair</span><span class=\"token punctuation\">(</span>tokenA<span class=\"token punctuation\">,</span> tokenB<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">IUniswapV2Factory</span><span class=\"token punctuation\">(</span>factory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">createPair</span><span class=\"token punctuation\">(</span>tokenA<span class=\"token punctuation\">,</span> tokenB<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span> reserveA<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint</span> reserveB<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> UniswapV2Library<span class=\"token punctuation\">.</span><span class=\"token function\">getReserves</span><span class=\"token punctuation\">(</span>factory<span class=\"token punctuation\">,</span> tokenA<span class=\"token punctuation\">,</span> tokenB<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>reserveA <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> reserveB <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token punctuation\">(</span>amountA<span class=\"token punctuation\">,</span> amountB<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>amountADesired<span class=\"token punctuation\">,</span> amountBDesired<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token builtin\">uint</span> amountBOptimal <span class=\"token operator\">=</span> UniswapV2Library<span class=\"token punctuation\">.</span><span class=\"token function\">quote</span><span class=\"token punctuation\">(</span>amountADesired<span class=\"token punctuation\">,</span> reserveA<span class=\"token punctuation\">,</span> reserveB<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>amountBOptimal <span class=\"token operator\">&lt;=</span> amountBDesired<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>amountBOptimal <span class=\"token operator\">>=</span> amountBMin<span class=\"token punctuation\">,</span> <span class=\"token string\">'UniswapV2Router: INSUFFICIENT_B_AMOUNT'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">(</span>amountA<span class=\"token punctuation\">,</span> amountB<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>amountADesired<span class=\"token punctuation\">,</span> amountBOptimal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token builtin\">uint</span> amountAOptimal <span class=\"token operator\">=</span> UniswapV2Library<span class=\"token punctuation\">.</span><span class=\"token function\">quote</span><span class=\"token punctuation\">(</span>amountBDesired<span class=\"token punctuation\">,</span> reserveB<span class=\"token punctuation\">,</span> reserveA<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">assert</span><span class=\"token punctuation\">(</span>amountAOptimal <span class=\"token operator\">&lt;=</span> amountADesired<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>amountAOptimal <span class=\"token operator\">>=</span> amountAMin<span class=\"token punctuation\">,</span> <span class=\"token string\">'UniswapV2Router: INSUFFICIENT_A_AMOUNT'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">(</span>amountA<span class=\"token punctuation\">,</span> amountB<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>amountAOptimal<span class=\"token punctuation\">,</span> amountBDesired<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">addLiquidity</span><span class=\"token punctuation\">(</span>\n        <span class=\"token builtin\">address</span> tokenA<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">address</span> tokenB<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">uint</span> amountADesired<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">uint</span> amountBDesired<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">uint</span> amountAMin<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">uint</span> amountBMin<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">address</span> to<span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">uint</span> deadline\n    <span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> virtual override <span class=\"token function\">ensure</span><span class=\"token punctuation\">(</span>deadline<span class=\"token punctuation\">)</span> <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span> amountA<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint</span> amountB<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint</span> liquidity<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token punctuation\">(</span>amountA<span class=\"token punctuation\">,</span> amountB<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token function\">_addLiquidity</span><span class=\"token punctuation\">(</span>tokenA<span class=\"token punctuation\">,</span> tokenB<span class=\"token punctuation\">,</span> amountADesired<span class=\"token punctuation\">,</span> amountBDesired<span class=\"token punctuation\">,</span> amountAMin<span class=\"token punctuation\">,</span> amountBMin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token builtin\">address</span> pair <span class=\"token operator\">=</span> UniswapV2Library<span class=\"token punctuation\">.</span><span class=\"token function\">pairFor</span><span class=\"token punctuation\">(</span>factory<span class=\"token punctuation\">,</span> tokenA<span class=\"token punctuation\">,</span> tokenB<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        TransferHelper<span class=\"token punctuation\">.</span><span class=\"token function\">safeTransferFrom</span><span class=\"token punctuation\">(</span>tokenA<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">,</span> pair<span class=\"token punctuation\">,</span> amountA<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        TransferHelper<span class=\"token punctuation\">.</span><span class=\"token function\">safeTransferFrom</span><span class=\"token punctuation\">(</span>tokenB<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">,</span> pair<span class=\"token punctuation\">,</span> amountB<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        liquidity <span class=\"token operator\">=</span> <span class=\"token function\">IUniswapV2Pair</span><span class=\"token punctuation\">(</span>pair<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">mint</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<p>addLiquidityëŠ” <code class=\"language-text\">addLiquidity</code>ì™€ <code class=\"language-text\">_addLiqiudity</code>ë¡œ ë‚˜ëˆ„ì–´ì ¸ ìˆë‹¤. ìš°ì„  <code class=\"language-text\">addLiquidity</code> í•¨ìˆ˜ë¥¼ call í–ˆì„ë•Œ <code class=\"language-text\">_addLiquidity</code> í•¨ìˆ˜ê°€ ê°€ì¥ ë¨¼ì € ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì—, internal í•¨ìˆ˜ì¸ <code class=\"language-text\">_addLiquidity</code> í•¨ìˆ˜ë¥¼ ì‚´í´ë³´ì.</p>\n<p><code class=\"language-text\">_addLiquidity</code> í•¨ìˆ˜ëŠ” ìœ„ì— ë§í–ˆë“¯ì´ Core Contractì™€ ìƒí˜¸ì‘ìš©í•œë‹¤. line by lineìœ¼ë¡œ í•œë²ˆ ë³´ë„ë¡ í•˜ì.</p>\n<ol>\n<li>ì²˜ìŒ <code class=\"language-text\">_addLiquidity</code> ê°€ í˜¸ì¶œë˜ë©´ pair poolì´ ìƒì„±ë˜ì—ˆëŠ”ì§€ ì•„ë‹Œì§€ë¥¼ í™•ì¸í•œë‹¤. ë§Œì•½ pairê°€ ì—†ë‹¤ë©´ factory contractì˜ <code class=\"language-text\">createPair</code>ì„ í˜¸ì¶œí•´ ìƒˆë¡œìš´ pairë¥¼ ìƒì„±í•œë‹¤.</li>\n<li>ê·¸ í›„ í† í° pairì˜ reserve{0, 1} ê°’ì„ ë°›ì•„ì˜¤ê³ , ë§Œì•½ reserve{0, 1} ê°’ì´ 0ì´ë¼ë©´ pairê°€ ìƒì„±ë˜ì—ˆì§€ë§Œ ì•„ë¬´ tokenì´ ë“¤ì–´ìˆì§€ ì•Šê¸° ë•Œë¬¸ì— amount{A, B}Desiredì˜ ê°’ì„ Amount{0, 1} ê°’ìœ¼ë¡œ ì§€ì •í•´ì¤€ë‹¤.</li>\n<li>ë§Œì•½ reserve{0, 1}ì˜ ê°’ì´ 0ì´ ì•„ë‹ˆë¼ë©´ elseë¬¸ì´ ì‹¤í–‰ëœë‹¤.</li>\n<li>elseë¬¸ì—ì„œëŠ” amountBOptimalì˜ ê°’ ë˜ëŠ” amountAOptimalì„ ì°¾ëŠ”ë‹¤. ë¨¼ì € amountBOptimalì˜ ê°’ì„ ë¨¼ì € í™•ì¸í•´ë³´ê³  ì¡°ê±´ë¬¸ì— ë¶ˆë§Œì¡±í•œë‹¤ë©´ amountAOptimalë¥¼ ê³„ì‚°í•´ ì ìš©í•œë‹¤.</li>\n</ol>\n<p>ë³€ìˆ˜ ì¤‘ amount{A,B}Desiredì´ë¼ëŠ” ê°’ì´ ì¡´ì¬í•˜ëŠ”ë°, ì´ëŠ” poolì— ë„£ê³ ì‹¶ì€ ê° í† í°ì˜ ì–‘ì„ ëœ»í•œë‹¤. amount{A,B}Desired ê°’ì„ í† ëŒ€ë¡œ amount{A,B}Optimalì˜ ê°’ì„ êµ¬í•œë‹¤. ê¸€ê³  ì´ë•Œ <code class=\"language-text\">UniswapV2Library</code>ì˜ <code class=\"language-text\">quote</code> í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤. ì´ í•¨ìˆ˜ëŠ” amountADesiredì„ ì‚¬ìš©í•´ ë™ì¼í•œ ê°€ì¹˜ì˜ Token B(amountBOptimalì˜)ì˜ ê°’ì„ êµ¬í•œë‹¤.\n5. ë§Œì•½ êµ¬í•œ amount{A,B}Optimalì˜ ê°’ì´ amount{A,B}Desiredë³´ë‹¤ ì‘ë‹¤ë©´ assertë¥¼ í™œìš©í•´ transaction ì„ revertì‹œí‚¨ë‹¤.\n6. ì´í›„ amount{A,B}ë¥¼ ë™ì¼í•œ ê°€ì¹˜ì˜ ê°’ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ return í•œë‹¤.</p>\n<p>ê·¸í›„ <code class=\"language-text\">addLiquidity</code> í•¨ìˆ˜ë¡œ ëŒì•„ì™€ ë‚˜ë¨¸ì§€ codeë¥¼ ì‹¤í–‰í•œë‹¤.</p>\n<ol>\n<li><code class=\"language-text\">address pair</code>ë¼ëŠ” ë³€ìˆ˜ì— token Aì™€ Bì˜ Pool addressë¥¼ ê°€ì ¸ì˜¨ë‹¤.</li>\n<li>TansferHelperë¥¼ í†µí•´ pair contractì— ê° í† í°ì„ transferí•œë‹¤.</li>\n<li>ì´í›„ ì œê³µí•œ liquidityë§Œí¼ LP í† í°ì„ mint í•´ì¤€ë‹¤.</li>\n</ol>\n<br>\n<h3 id=\"removeliquidity\" style=\"position:relative;\"><a href=\"#removeliquidity\" aria-label=\"removeliquidity permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>removeLiquidity</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// **** REMOVE LIQUIDITY ****\n    function removeLiquidity(\n        address tokenA,\n        address tokenB,\n        uint liquidity,\n        uint amountAMin,\n        uint amountBMin,\n        address to,\n        uint deadline\n    ) public virtual override ensure(deadline) returns (uint amountA, uint amountB) {\n        address pair = UniswapV2Library.pairFor(factory, tokenA, tokenB);\n        IUniswapV2Pair(pair).transferFrom(msg.sender, pair, liquidity); // send liquidity to pair\n        (uint amount0, uint amount1) = IUniswapV2Pair(pair).burn(to);\n        (address token0,) = UniswapV2Library.sortTokens(tokenA, tokenB);\n        (amountA, amountB) = tokenA == token0 ? (amount0, amount1) : (amount1, amount0);\n        require(amountA >= amountAMin, 'UniswapV2Router: INSUFFICIENT_A_AMOUNT');\n        require(amountB >= amountBMin, 'UniswapV2Router: INSUFFICIENT_B_AMOUNT');\n    }</code></pre></div>\n<br>\n<p><code class=\"language-text\">removeLiquidity</code> í•¨ìˆ˜ëŠ” ìœ„ì—ì„œ add í—¸ë˜ liquidityë¥¼ ì—†ì•¨ ìˆ˜ ìˆë‹¤. line by lineìœ¼ë¡œ ì•Œì•„ë³´ì!</p>\n<ol>\n<li>ë‘ í† í°ì˜ pair addressë¥¼ ë°›ì•„ì˜¨ë‹¤.</li>\n<li>msg.senderê°€ ê°€ì§€ê³  ìˆë˜ lp ë„í°ì„ pair contractì— ë°˜í™˜í•œë‹¤.</li>\n<li>ê·¸ë¦¬ê³  ê·¸ ë¹„ìœ¨ì— ë§ëŠ” amountë§Œí¼ lp í† í°ì„ burn(ì†Œê°)í•œë‹¤.\nì´ í•¨ìˆ˜ì—ì„œ liquidityì— ë„£ì—ë˜ tokenì„ ë°˜í™˜ ë°›ëŠ” ì½”ë“œê°€ ì—†ì–´ ì˜ì•„í•  ìˆ˜ ìˆì§€ë§Œ pairì˜ burn í•¨ìˆ˜ì—ëŠ” burnê³¼ ë™ì‹œì— ê·¸ ë¹„ìœ¨ì— ë§ëŠ” tokenì˜ msg.senderì—ê²Œ ì†¡ê¸ˆí•´ì£¼ëŠ” ê¸°ëŠ¥ì´ ìˆë‹¤.</li>\n<li>TokenAì™€ TokenBì˜ ë” ì‘ì€ ì£¼ì†Œ ê°’ì„ token0ì— í• ë‹¹í•œë‹¤.</li>\n<li>ì´í›„ tokenAì™€ tokenBë¥¼ ì •ë ¹í•´ì¤€ë‹¤.</li>\n<li>requireë¬¸ì„ í†µí•´ amountAì™€ amountBì˜ ê°’ì´ ê° í† í°ì˜ ìµœì†Œê°’ë³´ë‹¤ ì‘ì€ì§€ í™•ì¸í•œ í›„ Amount{A,B}ê°€ returnëœë‹¤\nrequireë¬¸ì„ ì™œ ë’¤ì— ì¼ë‚˜ ê¶ê¸ˆí•  ìˆ˜ë„ ìˆë‹¤. ë§Œì•½ í•¨ìˆ˜ ì•ˆì—ì„œ requireë¬¸ì„ í†µê³¼í•˜ì§€ ëª»í•œë‹¤ë©´ ëª¨ë“  ì§„í–‰ ê³¼ì •ì„ ì´ˆê¸°í™” í•œë‹¤.</li>\n</ol>\n<br>\n<!-- ### swap\n```\n// **** SWAP ****\n    // requires the initial amount to have already been sent to the first pair\n    function _swap(uint[] memory amounts, address[] memory path, address _to) internal virtual {\n        for (uint i; i < path.length - 1; i++) {\n            (address input, address output) = (path[i], path[i + 1]);\n            (address token0,) = UniswapV2Library.sortTokens(input, output);\n            uint amountOut = amounts[i + 1];\n            (uint amount0Out, uint amount1Out) = input == token0 ? (uint(0), amountOut) : (amountOut, uint(0));\n            address to = i < path.length - 2 ? UniswapV2Library.pairFor(factory, output, path[i + 2]) : _to;\n            IUniswapV2Pair(UniswapV2Library.pairFor(factory, input, output)).swap(\n                amount0Out, amount1Out, to, new bytes(0)\n            );\n        }\n    }\n```\n\n<br/>\n\nperiphery contractëŠ” ë„ˆë¬´ ë§ì€ swapê´€ë ¨ í•¨ìˆ˜ë¥¼ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì—, swapì— ê³µí†µì ìœ¼ë¡œ ì“°ì´ëŠ” `_swap`ì— ëŒ€í•´ì„œ ë¶„ì„í•˜ë„ë¡ í•  ê²ƒì´ë‹¤.\nuniswapV2ì—ì„œëŠ” tokenì˜ pairì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì—¬ëŸ¬ê°œì˜ pairë“¤ì„ ê±¸ì³ tokenì„ swapí•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤. \n1. pathëŠ” tokenë“¤ì˜ ì£¼ì†Œë¥¼ ëœ»í•˜ë©°, pathë¥¼ í†µí•´ tokenì˜ ì£¼ì†Œê°’ì„ ë°›ì•„ì˜¨ë‹¤. \n2. tokenì„ libraryì˜ sortToken í•¨ìˆ˜ë¥¼ í†µí•´ ì •ë ¬í•œë‹¤.\n3. amountOut\n -->\n<!-- ## ë§ˆë¬´ë¦¬\nRouter contractì— ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì•Œì•„ë³´ì•˜ë‹¤. ì‚¬ìš©ìê°€ ì§ì ‘ interaction í•˜ëŠ” ë¶€ë¶„ì´ê¸° ë•Œë¬¸ì— ì˜ ì•Œì•„ë‘ì–´ì•¼ í•œë‹¤ê³  ìƒê°í•œë‹¤.\nìš”ì¦˜ì€ ë¶„ì„ë³´ë‹¤ ì§ì ‘ smart contractë¥¼ êµ¬ì¶•í•´ë³´ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤ê³  ëŠë‚€ë‹¤. Defi ì´ì™¸ì—ë„ ìš”ì¦˜ ìœ í–‰í•˜ëŠ” Stepnê³¼ ê°™ì€ ìƒˆë¡œìš´ ì½”ë“œë¥¼ ë¶„ì„í•´ë³´ê³  ì§ì ‘ ìš´ì˜í•´ë³´ê³ ì‹¶ë‹¤ -->\n<h2 id=\"ref\" style=\"position:relative;\"><a href=\"#ref\" aria-label=\"ref permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ref</h2>\n<ul>\n<li><a href=\"https://ethereum.org/en/developers/tutorials/uniswap-v2-annotated-code/#pair-external\">https://ethereum.org/en/developers/tutorials/uniswap-v2-annotated-code/#pair-external</a></li>\n<li><a href=\"https://docs.uniswap.org/protocol/V2/concepts/core-concepts/swaps\">https://docs.uniswap.org/protocol/V2/concepts/core-concepts/swaps</a></li>\n<li><a href=\"https://boohyunsik.tistory.com/9?category=922110\">https://boohyunsik.tistory.com/9?category=922110</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#uniswap-v2-periphery-router-%EC%A3%BC%EC%9A%94-functions\">Uniswap V2 Periphery Router ì£¼ìš” functions</a></p>\n<ul>\n<li><a href=\"#addliquidity\">addLiquidity</a></li>\n<li><a href=\"#removeliquidity\">removeLiquidity</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#ref\">Ref</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"April 27, 2022","title":"Uniswap V2 Periphery Router Contract ë¶„ì„","categories":"Defi","author":"í•œì„±ì›","emoji":"ğŸ§¢"},"fields":{"slug":"/defi/UniswapV2/uniswapV2PeripheryRouter/"}},"site":{"siteMetadata":{"siteUrl":"https://holyhansss.github.io","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/defi/UniswapV2/uniswapV2CoreFactory/","nextSlug":"/NFT/EIP-2981ì—ëŒ€í•˜ì—¬/EIP-2981ì—ëŒ€í•˜ì—¬/","prevSlug":"/defi/UniswapV2/uniswapV2PeripheryRouter/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}