{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/smart_contract/over_under_flow/",
    "result": {"data":{"cur":{"id":"ceb741ae-a21f-57a0-bffc-8e06881969a9","html":"<h1 id=\"-over--underflow\" style=\"position:relative;\"><a href=\"#-over--underflow\" aria-label=\" over  underflow permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ Over &#x26; UnderFlow</h1>\n<h2 id=\"ë“¤ì–´ê°€ê¸°-ì „\" style=\"position:relative;\"><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0-%EC%A0%84\" aria-label=\"ë“¤ì–´ê°€ê¸° ì „ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë“¤ì–´ê°€ê¸° ì „</h2>\n<p>Overflowì™€ UnderflowëŠ” solidity 0.8.0 ë²„ì „ë¶€í„° ì•Œì•„ì„œ ì»¨íŠ¸ë¡¤ ë˜ê²Œ ë°”ë€Œì—ˆë‹¤.\r\n0.8.0 ì´í›„ ë²„ì „ì„ ì‚¬ìš©í•˜ì‹œëŠ” ë¶„ì€ ì•„ë˜ë¡œ ë‚´ë ¤ê°€ë„ ì¢‹ë‹¤.</p>\n<hr>\n<h2 id=\"overflowì™€-underflowë€\" style=\"position:relative;\"><a href=\"#overflow%EC%99%80-underflow%EB%9E%80\" aria-label=\"overflowì™€ underflowë€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>OverFlowì™€ UnderFlowë€</h2>\n<p>OverflowëŠ” ì§€ì •ëœ ì •ìˆ˜í˜•(int)ì˜ ìµœëŒ“ê°’ë³´ë‹¤ ì»¤ì¡Œì„ ë•Œ ë°œìƒí•œë‹¤.<br>\nUnderflowëŠ” ì§€ì •ëœ ì •ìˆ˜í˜•(uint)ì˜ ìµœì†Ÿê°’ë³´ë‹¤ ì‘ì•„ì¡Œì„ ë•Œ ë°œìƒí•œë‹¤.\r\nSolidityì—ì„œëŠ” unsigned Integer(uint)ë¥¼ ìì£¼ ì‚¬ìš©í•œë‹¤. uint256ì„ ê¸°ì¤€ìœ¼ë¡œ í–ˆì„ë•Œ ìµœëŒ€ê°’ì€ 2<sup>256</sup>-1ì´ê³  ìµœì†Œê°’ì€ 0ì´ë‹¤. ì¦‰ 2<sup>256</sup>-1ì— 1ì„ ë”í–ˆì„ë•Œ Overflow 0ì—ì„œ 1ì„ ëºì„ë•Œ underflowê°€ ì¼ì–´ë‚  ê²ƒì´ë‹¤.</p>\n<p>ExampleColdeë¥¼ ë³´ë©´ ë³´ë‹¤ ì‰½ê²Œ ì´í•´ í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.</p>\n<hr>\n<h2 id=\"example-code\" style=\"position:relative;\"><a href=\"#example-code\" aria-label=\"example code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Example Code</h2>\n<p>remix IDEì—ì„œ ì‹¤ìŠµì„ ì§„í–‰í•œë‹¤ë©´ ì´í•´ê°€ ë”ìš± ë¹ ë¥¼ê²ƒì´ë‹¤!</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token comment\">// SPDX-License-Identifier: MIT</span>\r\n<span class=\"token keyword\">pragma</span> <span class=\"token keyword\">solidity</span> <span class=\"token operator\">^</span><span class=\"token version number\">0.7.0</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 0.8.0 ì´ì „ ë²„ì „ì´ì–´ì•¼í•¨!</span>\r\n\r\n<span class=\"token keyword\">contract</span> <span class=\"token class-name\">OverflowUnderFlow</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token builtin\">int256</span> <span class=\"token keyword\">public</span> zero <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token builtin\">uint256</span> <span class=\"token keyword\">public</span> max <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token operator\">**</span><span class=\"token number\">256</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n    \r\n    <span class=\"token comment\">// zero will end up at 2**256-1</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">underflow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\r\n        zero <span class=\"token operator\">-=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n    <span class=\"token comment\">// max will end up at 0</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">overflow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">payable</span><span class=\"token punctuation\">{</span>\r\n        max <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><span style=\"color:grey\">ì¶œì²˜: <a href=\"https://medium.com/loom-network-korean/%EC%8A%A4%EB%A7%88%ED%8A%B8-%EC%BB%A8%ED%8A%B8%EB%9E%99%ED%8A%B8%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%B3%B4%ED%98%B8%ED%95%A0-%EA%B2%83%EC%9D%B8%EA%B0%80-%EC%86%94%EB%A6%AC%EB%94%94%ED%8B%B0%EC%9D%98-6%EA%B0%80%EC%A7%80-%EC%B7%A8%EC%95%BD%EC%A0%90-%EB%B0%8F-%EB%8C%80%EB%B9%84%EC%B1%85-1%EB%B6%80-c21d4e37034a\">https://medium.com/loom-network-korean/ìŠ¤ë§ˆíŠ¸-ì»¨íŠ¸ë™íŠ¸ë¥¼-ì–´ë–»ê²Œ-ë³´í˜¸í• -ê²ƒì¸ê°€-ì†”ë¦¬ë””í‹°ì˜-6ê°€ì§€-ì·¨ì•½ì -ë°-ëŒ€ë¹„ì±…-1ë¶€</a></span></p>\n<p>ìœ„ ì½”ë“œëŠ” 0.8.0 ì´ì „ ë²„ì „ë“¤ì—ê²ŒëŠ” ìœ„í—˜í•œ ì½”ë“œì´ë‹¤. zeroì—ì„œ underflow functionì„ ì‹¤í–‰ê¸°í‚¤ë©´ -1ë¡œ ë°”ë€ŒëŠ” ê²ƒì´ ì•„ë‹Œ 2<sup>256</sup>-1ë¡œ ë°”ë€Œê²Œ ëœë‹¤. ë§Œì•½ ì´ ì½”ë“œê°€ erc20ì™€ ê°™ì€ í† í°ì„ ë‹¤ë£¨ëŠ” ì½”ë“œì˜€ë‹¤ë©´ í° ì†ì‹¤ì„ ì…ì„ìˆ˜ë„ ìˆë‹¤.\r\nOverflowë„ ë§ˆì°¬ê°€ì§€ë¡œ max(2<sup>256</sup>-1) + 1ì„ í•˜ë©´ 2<sup>256</sup>ì´ ì•„ë‹Œ 0ìœ¼ë¡œ ë°”ë€Œê²Œ ëœë‹¤.</p>\n<hr>\n<h2 id=\"ì–´ë–»ê²Œ-overflowì™€-underflowë¥¼-ì˜ˆë°©í• -ìˆ˜-ìˆì„ê¹Œ\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EB%96%BB%EA%B2%8C-overflow%EC%99%80-underflow%EB%A5%BC-%EC%98%88%EB%B0%A9%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\" aria-label=\"ì–´ë–»ê²Œ overflowì™€ underflowë¥¼ ì˜ˆë°©í•  ìˆ˜ ìˆì„ê¹Œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì–´ë–»ê²Œ overflowì™€ underflowë¥¼ ì˜ˆë°©í•  ìˆ˜ ìˆì„ê¹Œ?</h2>\n<p>openzepplineì˜ SafeMath ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥ ë³´í¸í™”ë˜ì–´ìˆë‹¤.</p>\n<hr>\n<h2 id=\"080-ì´í›„-ë²„ì „ì—ì„œëŠ”-ì–´ë–»ê²Œ-ë‹¤ë¥¸ê°€\" style=\"position:relative;\"><a href=\"#080-%EC%9D%B4%ED%9B%84-%EB%B2%84%EC%A0%84%EC%97%90%EC%84%9C%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%8B%A4%EB%A5%B8%EA%B0%80\" aria-label=\"080 ì´í›„ ë²„ì „ì—ì„œëŠ” ì–´ë–»ê²Œ ë‹¤ë¥¸ê°€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>0.8.0 ì´í›„ ë²„ì „ì—ì„œëŠ” ì–´ë–»ê²Œ ë‹¤ë¥¸ê°€?</h2>\n<p>0.8.0 ì´í›„ ë²„ì „ì—ì„œëŠ” ìœ„ì™€ ê°™ì€ ì½”ë“œë¥¼ ì‘ì„±í•´ë„ ë¬¸ì œê°€ ë˜ì§€ ì•ŠëŠ”ë‹¤. 0.8.0 ì´í›„ ë²„ì „ì€ underflow ë˜ëŠ” overflowê°€ ì¼ì–´ë‚˜ë©´ ì¦‰ì‹œ revert í•´ë²„ë¦¬ê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ë˜ì„œ ë”°ë¡œ safe mathì™€ ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš© í•  í•„ìš”ê°€ ì—†ë‹¤.</p>\n<hr>\n<h2 id=\"ë§ˆë¬´ë¦¬\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"ë§ˆë¬´ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë§ˆë¬´ë¦¬</h2>\n<p>overflowì™€ underflowëŠ” ë‹¤ë¥¸ ì–¸ì–´ë¥¼ ë°°ìš°ë©´ì„œ ë°°ì› ë˜ ê²ƒì´ë¼ ê°œë… ìì²´ëŠ” ì‰¬ì› ë‹¤.\r\në‹¤ìŒ í¬ìŠ¤íŠ¸ì—ì„œëŠ” <strong>ì§§ì€ ì£¼ì†Œ ê³µê²©</strong> ì— ëŒ€í•´ì„œ ë‹¤ë£¨ì–´ ë³¼ ì˜ˆì •ì´ë‹¤.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0-%EC%A0%84\">ë“¤ì–´ê°€ê¸° ì „</a></li>\n<li><a href=\"#overflow%EC%99%80-underflow%EB%9E%80\">OverFlowì™€ UnderFlowë€</a></li>\n<li><a href=\"#example-code\">Example Code</a></li>\n<li><a href=\"#%EC%96%B4%EB%96%BB%EA%B2%8C-overflow%EC%99%80-underflow%EB%A5%BC-%EC%98%88%EB%B0%A9%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\">ì–´ë–»ê²Œ overflowì™€ underflowë¥¼ ì˜ˆë°©í•  ìˆ˜ ìˆì„ê¹Œ?</a></li>\n<li><a href=\"#080-%EC%9D%B4%ED%9B%84-%EB%B2%84%EC%A0%84%EC%97%90%EC%84%9C%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%8B%A4%EB%A5%B8%EA%B0%80\">0.8.0 ì´í›„ ë²„ì „ì—ì„œëŠ” ì–´ë–»ê²Œ ë‹¤ë¥¸ê°€?</a></li>\n<li><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">ë§ˆë¬´ë¦¬</a></li>\n</ul>\n</div>","excerpt":"ğŸ‘‹ Over & UnderFlow ë“¤ì–´ê°€ê¸° ì „ Overflowì™€ UnderflowëŠ” solidity 0.8.0 ë²„ì „ë¶€í„° ì•Œì•„ì„œ ì»¨íŠ¸ë¡¤ ë˜ê²Œ ë°”ë€Œì—ˆë‹¤.\r\n0.8.0 ì´í›„ ë²„ì „ì„ ì‚¬ìš©í•˜ì‹œëŠ” ë¶„ì€ ì•„ë˜ë¡œ ë‚´ë ¤ê°€ë„ ì¢‹ë‹¤. OverFlowì™€ UnderFlowë€ OverflowëŠ” ì§€ì •ëœ ì •ìˆ˜í˜•(int)ì˜ ìµœëŒ“ê°’ë³´ë‹¤ ì»¤ì¡Œì„ ë•Œ ë°œìƒí•œë‹¤. UnderflowëŠ” ì§€ì •ëœ ì •ìˆ˜í˜•(uint)ì˜ ìµœì†Ÿê°’ë³´ë‹¤ ì‘ì•„ì¡Œì„ ë•Œ ë°œìƒí•œë‹¤.\r\nSolidityì—ì„œëŠ” unsigned Integer(uint)ë¥¼ ìì£¼ ì‚¬ìš©í•œë‹¤. uint256ì„ ê¸°ì¤€ìœ¼ë¡œ í–ˆì„ë•Œ ìµœëŒ€ê°’ì€ 2256-1ì´ê³  ìµœì†Œê°’ì€ 0ì´ë‹¤. ì¦‰ 2256-1ì— 1ì„ ë”í–ˆì„ë•Œ Overflow 0ì—ì„œ 1ì„ ëºì„ë•Œ underflowê°€ ì¼ì–´ë‚  ê²ƒì´ë‹¤. ExampleColdeë¥¼ ë³´ë©´ ë³´ë‹¤ ì‰½ê²Œ ì´í•´ í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. Example Code remix IDEì—ì„œ ì‹¤ìŠµì„ ì§„í–‰í•œë‹¤ë©´ ì´í•´ê°€ ë”ìš± ë¹ ë¥¼ê²ƒì´ë‹¤! ì¶œì²˜: https://medium.com/loom-network-koâ€¦","frontmatter":{"date":"December 21, 2021","title":"(ì·¨ì•½ì  ì‹œë¦¬ì¦ˆ 2) Over & Under Flow?","categories":"ì·¨ì•½ì ë¶„ì„","author":"í•œì„±ì›","emoji":"ğŸ§¢"},"fields":{"slug":"/smart_contract/over_under_flow/"}},"next":{"id":"bbced782-f109-5c42-9522-c570827ac521","html":"<h1 id=\"-reentrancy-attack-ì¬ì§„ì…-ê³µê²©\" style=\"position:relative;\"><a href=\"#-reentrancy-attack-%EC%9E%AC%EC%A7%84%EC%9E%85-%EA%B3%B5%EA%B2%A9\" aria-label=\" reentrancy attack ì¬ì§„ì… ê³µê²© permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ Reentrancy Attack (ì¬ì§„ì… ê³µê²©)</h1>\n<h2 id=\"ë“¤ì–´ê°€ê¸°ì „\" style=\"position:relative;\"><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0%EC%A0%84\" aria-label=\"ë“¤ì–´ê°€ê¸°ì „ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë“¤ì–´ê°€ê¸°ì „</h2>\n<h3 id=\"fallback-í•¨ìˆ˜\" style=\"position:relative;\"><a href=\"#fallback-%ED%95%A8%EC%88%98\" aria-label=\"fallback í•¨ìˆ˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Fallback í•¨ìˆ˜?</h3>\n<p>Fallback í•¨ìˆ˜ëŠ” contractì—ì„œ í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œí‚¬ë•Œ í•¨ìˆ˜ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì‹¤í–‰ë˜ëŠ” functionì´ë‹¤.\r\n0.6ì´ì „ ë²„ì „ì—ì„œëŠ” fallbackì´ etherëŠ” ê²ƒê³¼ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ì˜ ëŒ€ë¹„ì±…ìœ¼ë¡œ ì‚¬ìš©ë˜ì—ˆì§€ë§Œ 0.6 ì´í›„ ë²„ì „ë¶€í„° fallbackì€ fallbackê³¼ receiveë¡œ ë‚˜ëˆ„ì–´ì¡Œë‹¤. 0.6ë¶€í„°ëŠ” fallbackì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  receiveë¥¼ í†µí•´ ì´ë”ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.</p>\n<hr>\n<h2 id=\"reentrancy-attackì¬ì§„ì…-ê³µê²©ì´ë€\" style=\"position:relative;\"><a href=\"#reentrancy-attack%EC%9E%AC%EC%A7%84%EC%9E%85-%EA%B3%B5%EA%B2%A9%EC%9D%B4%EB%9E%80\" aria-label=\"reentrancy attackì¬ì§„ì… ê³µê²©ì´ë€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reentrancy Attack(ì¬ì§„ì… ê³µê²©)ì´ë€?</h2>\n<p>Reentrancy Attackì€ contract Aê°€ í•˜ë‚˜ì˜ userë¡œì¨ contract B ì—ê²Œ transactionì„ ë³´ë‚¸ë‹¤. ì´ë•Œ contract Aê°€ ìš”ì²­ì— ëŒ€í•œ ì œì–´ê¶Œì„ ê°€ì§€ê²Œëœë‹¤. ê·¸ë ‡ê²Œ ë˜ë©´ contract Aê°€ ë³´ë‚¸ ì²«ë²ˆì§¸ ìš”ì²­ì´ ëë‚˜ê¸° ì „ì— ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ê³„ì†í•´ì„œ í˜¸ì¶œ í•  ìˆ˜ ìˆê²Œëœë‹¤. ì´ëŠ” ì¬ì§„ì…ì„ etherë¥¼ ë¹¼ì˜¬ ìˆ˜ ìˆê²Œ ëœë‹¤.</p>\n<hr>\n<h2 id=\"example-code\" style=\"position:relative;\"><a href=\"#example-code\" aria-label=\"example code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Example Code</h2>\n<p>ì˜ˆì‹œë¥¼ í•˜ë‚˜ ë³´ë„ë¡ í•˜ì!\r\nì²«ë²ˆì§¸ contract AëŠ” etherë¥¼ ë³´ê´€í•˜ëŠ” ê³³\r\në‘ë²ˆì§¸ contract BëŠ” Aë¥¼ ê³µê²©í•˜ëŠ” contractì´ë‹¤.</p>\n<p>ê·¸ëŒ€ë¡œ remixë¥¼ ì‚¬ìš©í•´ í…ŒìŠ¤íŠ¸í•´ë³´ë©´ ì´í•´ê°€ ë¹ ë¥¼ ê²ƒì´ë‹¤!</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\">\r\n<span class=\"token keyword\">contract</span> <span class=\"token class-name\">EtherStore</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">mapping</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">uint</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> balances<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">deposit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">payable</span> <span class=\"token punctuation\">{</span>\r\n        balances<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> msg<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">withdraw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token builtin\">uint</span> bal <span class=\"token operator\">=</span> balances<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>bal <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token punctuation\">(</span><span class=\"token builtin\">bool</span> sent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">.</span>call<span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">:</span> bal<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>sent<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Failed to send Ether\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        balances<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">getBalance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">view</span> <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>balance<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n    \r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">contract</span> <span class=\"token class-name\">Attack</span> <span class=\"token punctuation\">{</span>\r\n    EtherStore <span class=\"token keyword\">public</span> etherStore<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> _etherStoreAddress<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        etherStore <span class=\"token operator\">=</span> <span class=\"token function\">EtherStore</span><span class=\"token punctuation\">(</span>_etherStoreAddress<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">// Fallback is called when EtherStore sends Ether to this contract.</span>\r\n    <span class=\"token function\">fallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> <span class=\"token keyword\">payable</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span>etherStore<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>balance <span class=\"token operator\">>=</span> <span class=\"token number\">1</span> ether<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            etherStore<span class=\"token punctuation\">.</span><span class=\"token function\">withdraw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">attack</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> <span class=\"token keyword\">payable</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>value <span class=\"token operator\">>=</span> <span class=\"token number\">1</span> ether<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        etherStore<span class=\"token punctuation\">.</span>deposit<span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span> ether<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        etherStore<span class=\"token punctuation\">.</span><span class=\"token function\">withdraw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">// Helper function to check the balance of this contract</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">getBalance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">view</span> <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>balance<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><span style=\"color:grey\">ì¶œì²˜: <a href=\"https://solidity-by-example.org/hacks/re-entrancy/\">https://solidity-by-example.org/hacks/re-entrancy/</a></span></li>\n</ul>\n<p><strong>EtherStore contract</strong> ë¥¼ ë³´ë©´ depositê³¼ withdraw í•¨ìˆ˜ê°€ ì¡´ì¬í•œë‹¤.</p>\n<ul>\n<li>deposit í•¨ìˆ˜ë¥¼ ì›í•˜ëŠ” ë§Œí¼ì˜ etherë¥¼ ë³´ê´€í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” í•¨ìˆ˜ì´ë‹¤.</li>\n<li>withdraw í•¨ìˆ˜ëŠ” ìì‹ ì´ ë³´ê´€í•œ etherë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” í•¨ìˆ˜ì´ë‹¤.</li>\n</ul>\n<p><strong>Attack contract</strong> ì—ëŠ” attackê³¼ fallbackí•¨ìˆ˜ê°€ ì¡´ì¬í•œë‹¤.</p>\n<ul>\n<li>attack í•¨ìˆ˜ëŠ” ether í•˜ë‚˜ë¥¼ deposití•˜ê³  ì´í›„ ë°”ë¡œ withdraw í•œë‹¤</li>\n<li>fallback í•¨ìˆ˜ì—ëŠ” etherê°€ 1ì´ìƒ ë³´ê´€ë˜ì–´ ìˆë‹¤ë©´ withdrawí•¨ìˆ˜ë¥¼ ë‹¤ì‹œ ë¶€ë¥¸ë‹¤.</li>\n</ul>\n<p>í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ìˆœì„œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">- Attack.attack\r\n- EtherStore.deposit\r\n- EtherStore.withdraw\r\n- Attack fallback (receives 1 Ether)\r\n- EtherStore.withdraw\r\n- Attack.fallback (receives 1 Ether)\r\n- EtherStore.withdraw\r\n- Attack fallback (receives 1 Ether)\r\n- ...(ì´í›„ ë°˜ë³µ)</code></pre></div>\n<ol>\n<li>ê³µê²©ìê°€ attack í•¨ìˆ˜ë¥¼ í†µí•´ EtherStoreì— 1 etherë¥¼ deposití•œë‹¤</li>\n<li>ì´í›„ EtherStoreì— 1 etherë¥¼ ì°¾ê² ë‹¤ê³  withdraw í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.</li>\n<li>withdraw í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ë©´ attack í•¨ìˆ˜ì˜ fallback functionì´ í˜¸ì¶œëœë‹¤.(ì´ë”ë¥¼ ê°€ì ¸ì˜¤ê¸° ë•Œë¬¸ì—!)</li>\n<li>ì´í›„ fallback function ì•ˆì— ìˆëŠ” withdrawí•¨ìˆ˜ë¥¼ ì¬í˜¸ì¶œ í•˜ê²Œëœë‹¤.</li>\n<li>ì´í›„ 3-4 ê³¼ì •ì´ ë°˜ë³µë˜ë©° ì¬ì§„ì… ê³µê²©ì´ ì„±ê³µí•œë‹¤.</li>\n</ol>\n<p>ì´ì²˜ëŸ¼ ì¬ì§„ì… ê³µê²©ì„ í†µí•´ ë¶€ë‹¹í•œ ì´ë“ì„ ì·¨í•  ìˆ˜ ìˆê²Œëœë‹¤.</p>\n<hr>\n<h2 id=\"how-to-prevent\" style=\"position:relative;\"><a href=\"#how-to-prevent\" aria-label=\"how to prevent permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to prevent?</h2>\n<p>ê·¸ë ‡ë‹¤ë©´ reentrency attackì€ ì–´ë–»ê²Œ ì˜ˆë°© í•  ìˆ˜ ìˆì„ê¹Œ?</p>\n<p>Reentrency attackì€ ì˜ˆë°©í•˜ëŠ” ë°©ë²•ì€ ì´ 2ê°€ì§€ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.</p>\n<ol>\n<li>\n<p>openzepplineì˜ ReentrancyGuard contractì˜ noReentrant modifier ì‚¬ìš©í•˜ê¸°</p>\n<ul>\n<li>openzeppline LibraryëŠ” secure smart contract ê°œë°œì„ ìœ„í•œ Libraryì´ë‹¤.</li>\n<li>noReentrant modifierì˜ ì½”ë“œëŠ” ì´ëŸ¬í•˜ë‹¤.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\">    <span class=\"token keyword\">modifier</span> <span class=\"token function\">nonReentrant</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// On the first call to nonReentrant, _notEntered will be true</span>\r\n    <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>_status <span class=\"token operator\">!=</span> _ENTERED<span class=\"token punctuation\">,</span> <span class=\"token string\">\"ReentrancyGuard: reentrant call\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// Any calls to nonReentrant after this point will fail</span>\r\n    _status <span class=\"token operator\">=</span> _ENTERED<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">_</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// By storing the original value once again, a refund is triggered (see</span>\r\n    <span class=\"token comment\">// https://eips.ethereum.org/EIPS/eip-2200)</span>\r\n    _status <span class=\"token operator\">=</span> _NOT_ENTERED<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>í•¨ìˆ˜ ë’¤ì— noReentrantë¥¼ ë¶™í˜€ì£¼ëŠ” ê²ƒìœ¼ë¡œ ì‰¬ê²Œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.</p>\n</li>\n<li>\n<p>Check-Effects-Interaction íŒ¨í„´</p>\n</li>\n</ol>\n<ul>\n<li>í•¨ìˆ˜ ë‚´ì—ì„œ interactionì´ ì¼ì–´ë‚˜ê¸° ì „ checkì™€ effectë¥¼ ë‹¤ ì ìš©í•˜ëŠ” íŒ¨í„´ì´ë‹¤. ìœ„ ì˜ˆì œì˜ withdraw í•¨ìˆ˜ ê°™ì€ ê²½ìš° effect ë¶€ë¶„ì´ interaction ë¶€ë¶„ ë‹¤ìŒì— ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</li>\n<li>Check-Effects-Interaction íŒ¨í„´ì„ ì ìš©í•˜ê²Œ ë˜ë©´ interactioní•˜ê¸° ì „ì— ë¨¼ì € balanceì— ëŒ€í•œ ë°ì´í„°ê°€ ë°”ë€œìœ¼ë¡œ reentrencyí•˜ê²Œ ë˜ì–´ë„ requireë¬¸ì— ê±¸ë¦¬ê²Œ ëœë‹¤.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">function</span> <span class=\"token function\">withdraw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token builtin\">uint</span> bal <span class=\"token operator\">=</span> balances<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>bal <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token punctuation\">(</span><span class=\"token builtin\">bool</span> sent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">.</span>call<span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">:</span> bal<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// interaction ë¶€ë¶„!!</span>\r\n      <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>sent<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Failed to send Ether\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      balances<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// effect!!</span>\r\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h2 id=\"ë§ˆì¹˜ë©°\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"ë§ˆì¹˜ë©° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë§ˆì¹˜ë©°</h2>\n<p>â€œë¸”ë¡ì²´ì¸ì€ í•´í‚¹ ë‹¹í•˜ì§€ ì•ŠëŠ”ë‹¤!â€ ë¼ëŠ” ê²ƒì€ ë§ëŠ” ë§ì´ì§€ë§Œ ë¸”ë¡ì²´ì¸ ìœ„ì—ì„œ ë§Œë“¤ì–´ì§€ëŠ” smart contractëŠ” ê·¸ë ‡ì§€ ì•Šë‹¤. ì½”ë“œë¥¼ ì¡°ê¸ˆì´ë¼ë„ ì˜ëª» ì§œê²Œë˜ë©´ Reentrency attackê³¼ ë§ì€ ì·¨ì•½ì ë“¤ì´ ìƒê¸¸ ìˆ˜ ìˆë‹¤. ê·¸ëŸ¼ìœ¼ë¡œ ì•ìœ¼ë¡œ ì·¨ì•½ì ë“¤ì— ëŒ€í•´ ê³µë¶€í•´ smart contractë¥¼ ë§Œë“¤ë•Œ ìœ ì˜í•˜ë„ë¡ í•˜ì!!</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0%EC%A0%84\">ë“¤ì–´ê°€ê¸°ì „</a></p>\n<ul>\n<li><a href=\"#fallback-%ED%95%A8%EC%88%98\">Fallback í•¨ìˆ˜?</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#reentrancy-attack%EC%9E%AC%EC%A7%84%EC%9E%85-%EA%B3%B5%EA%B2%A9%EC%9D%B4%EB%9E%80\">Reentrancy Attack(ì¬ì§„ì… ê³µê²©)ì´ë€?</a></p>\n</li>\n<li>\n<p><a href=\"#example-code\">Example Code</a></p>\n</li>\n<li>\n<p><a href=\"#how-to-prevent\">How to prevent?</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">ë§ˆì¹˜ë©°</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"December 20, 2021","title":"(ì·¨ì•½ì  ì‹œë¦¬ì¦ˆ 1) Reentrancy Attack (ì¬ì§„ì… ê³µê²©)?","categories":"ì·¨ì•½ì ë¶„ì„","author":"í•œì„±ì›","emoji":"ğŸ§¢"},"fields":{"slug":"/smart_contract/reentrancy_attack/"}},"prev":{"id":"5f7f9e3c-6802-5000-9596-6c2e78ad5ff6","html":"<h1 id=\"-blocktimestamp\" style=\"position:relative;\"><a href=\"#-blocktimestamp\" aria-label=\" blocktimestamp permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ block.timestamp</h1>\n<h2 id=\"blocktimestampë€\" style=\"position:relative;\"><a href=\"#blocktimestamp%EB%9E%80\" aria-label=\"blocktimestampë€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>block.timestampë€?</h2>\n<p>block.timestampëŠ” msg.senderì²˜ëŸ¼ ë¸”ë¡ì²´ì¸ì—ì„œ ì œê³µí•´ì£¼ëŠ” global ë³€ìˆ˜ ì¤‘ í•˜ë‚˜ì´ë‹¤. ì´ëŠ” ë¸”ë¡ ìƒì„± ì‹œê°„ì„ ë‚˜íƒ€ë‚¸ë‹¤.\r\në¸”ë¡ì²´ì¸ì˜ timestampëŠ” ìƒì„± ì‹œì ì— ë°ì´í„°ê°€ ì¡´ì¬í–ˆë‹¤ëŠ” ì‚¬ì‹¤ì„ ì¦ëª…í•´ì£¼ê¸° ë•Œë¬¸ì— ë¸”ë¡ì²´ì¸ ìì²´ì— ë§¤ìš° ì¤‘ìš”í•˜ë‹¤.</p>\n<hr>\n<h2 id=\"ì™œ-ì·¨ì•½ì -ì‹œë¦¬ì¦ˆì—-ë“¤ì–´ê°”ì„ê¹Œ\" style=\"position:relative;\"><a href=\"#%EC%99%9C-%EC%B7%A8%EC%95%BD%EC%A0%90-%EC%8B%9C%EB%A6%AC%EC%A6%88%EC%97%90-%EB%93%A4%EC%96%B4%EA%B0%94%EC%9D%84%EA%B9%8C\" aria-label=\"ì™œ ì·¨ì•½ì  ì‹œë¦¬ì¦ˆì— ë“¤ì–´ê°”ì„ê¹Œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì™œ ì·¨ì•½ì  ì‹œë¦¬ì¦ˆì— ë“¤ì–´ê°”ì„ê¹Œ?</h2>\n<p>ë°”ë¡œ block.timestampëŠ” ì±„êµ´ì(miner)ë“¤ì—ê²Œ ì˜í–¥ì„ ë°›ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤. ì¦‰ block.timestampë¥¼ í†µí•´ randomì„ ìƒì„±í•˜ê±°ë‚˜ block.timestampì™€ ê´€ë ¨í•´ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ê°€ ìˆë‹¤ë©´ smart contractì—ê²Œ ì¢‹ì§€ ì•Šì€ ì˜í–¥ì„ ë¼ì¹  ìˆ˜ ìˆë‹¤.</p>\n<hr>\n<h2 id=\"example-code\" style=\"position:relative;\"><a href=\"#example-code\" aria-label=\"example code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Example code</h2>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">contract</span> <span class=\"token class-name\">Roulette</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token builtin\">uint</span> <span class=\"token keyword\">public</span> pastBlockTime<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">payable</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">spin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> <span class=\"token keyword\">payable</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>value <span class=\"token operator\">==</span> <span class=\"token number\">10</span> ether<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// must send 10 ether to play</span>\r\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>block<span class=\"token punctuation\">.</span>timestamp <span class=\"token operator\">!=</span> pastBlockTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// only 1 transaction per block</span>\r\n\r\n        pastBlockTime <span class=\"token operator\">=</span> block<span class=\"token punctuation\">.</span>timestamp<span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>block<span class=\"token punctuation\">.</span>timestamp <span class=\"token operator\">%</span> <span class=\"token number\">15</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token punctuation\">(</span><span class=\"token builtin\">bool</span> sent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">.</span>call<span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">:</span> <span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>balance<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>sent<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Failed to send Ether\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><span style=\"color:grey\">ì¶œì²˜: <a href=\"https://solidity-by-example.org/hacks/block-timestamp-manipulation/\">https://solidity-by-example.org/hacks/block-timestamp-manipulation/</a></span></p>\n<p>ìœ„ ì½”ë“œë¥¼ ì‹¤í–‰ì‹œì¼œ ë³¼ ìˆ˜ëŠ” ìˆì§€ë§Œ ì‹¤ì œ í•´í‚¹ ì‹¤ìŠµê¹Œì§€ í•´ë³´ëŠ” ê²ƒì€ ì–´ë ¤ìš¸ ê²ƒì´ë¼ê³  ìƒê°í•œë‹¤. ìš°ë¦¬ê°€ minerê°€ ë  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì—ã… ã… </p>\n<p>ìœ„ ì½”ë“œëŠ” ë£°ë«ì„ í†µí•´ etherë¥¼ ì–»ì„ ìˆ˜ ìˆëŠ” ê²Œì„ì´ë‹¤.\r\n10 etherë¥¼ contract accountì— ë³´ë‚´ê³  ë§Œì•½ timestampê°€ 15ì˜ ë°°ìˆ˜ë¼ë©´ CAì— ìˆëŠ” ëª¨ë“  etherë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.</p>\n<p>ì˜ˆë¥¼ ë“¤ì–´, CAì— 300 etherê°€ ìŒ“ì—¬ìˆë‹¤ê³  ìƒê°í•´ë³´ì! 2021/12/23 ì‹œì„¸ë¡œ 300 ehterëŠ” 14ì–µì´ ë„˜ëŠ” ëˆì´ë‹¤. ë§Œì•½ minerê°€ timestampë¥¼ ì¡°ì‘í•˜ëŠ”ë° ë“œëŠ” ë¹„ìš©ì´ 14ì–µë³´ë‹¤ ì ê²Œë“ ë‹¤ë©´ ì¡°ì‘ì„ ì‹œë„í•´ë³¼ë§Œ í•˜ë‹¤.</p>\n<hr>\n<h2 id=\"ì–´ë–»ê²Œí•˜ë©´-ì˜ˆë°©í• -ìˆ˜-ìˆì„ê¹Œ\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EB%96%BB%EA%B2%8C%ED%95%98%EB%A9%B4-%EC%98%88%EB%B0%A9%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\" aria-label=\"ì–´ë–»ê²Œí•˜ë©´ ì˜ˆë°©í•  ìˆ˜ ìˆì„ê¹Œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì–´ë–»ê²Œí•˜ë©´ ì˜ˆë°©í•  ìˆ˜ ìˆì„ê¹Œ?</h2>\n<p>block.timstampëŠ” ë¸”ë¡ìƒì„± ì‹œê°„ì´ í•„ìš”í•  ë•Œë§Œ ì‚¬ìš©í•˜ë©´ ëœë‹¤. randomì´ë‚˜ block.timestampê°€ ë“¤ì–´ê°€ ì¡°ê±´ì— ì˜í•´ì„œ etherê°€ ë˜ëŠ” ë°ì´í„°ê°€ ë³´ë‚´ì ¸ì„œëŠ” ì•ˆëœë‹¤.</p>\n<p>block.timestampì™€ ë§ˆì°¬ê°€ì§€ë¡œ <strong>now</strong>, <strong>block.hash</strong> ì˜ ì‚¬ìš©ë„ ë˜ë„ë¡ í”¼í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#blocktimestamp%EB%9E%80\">block.timestampë€?</a></li>\n<li><a href=\"#%EC%99%9C-%EC%B7%A8%EC%95%BD%EC%A0%90-%EC%8B%9C%EB%A6%AC%EC%A6%88%EC%97%90-%EB%93%A4%EC%96%B4%EA%B0%94%EC%9D%84%EA%B9%8C\">ì™œ ì·¨ì•½ì  ì‹œë¦¬ì¦ˆì— ë“¤ì–´ê°”ì„ê¹Œ?</a></li>\n<li><a href=\"#example-code\">Example code</a></li>\n<li><a href=\"#%EC%96%B4%EB%96%BB%EA%B2%8C%ED%95%98%EB%A9%B4-%EC%98%88%EB%B0%A9%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\">ì–´ë–»ê²Œí•˜ë©´ ì˜ˆë°©í•  ìˆ˜ ìˆì„ê¹Œ?</a></li>\n</ul>\n</div>","frontmatter":{"date":"December 22, 2021","title":"(ì·¨ì•½ì  ì‹œë¦¬ì¦ˆ 3) block.timestamp","categories":"ì·¨ì•½ì ë¶„ì„","author":"í•œì„±ì›","emoji":"ğŸ§¢"},"fields":{"slug":"/smart_contract/block_timestamp/"}},"site":{"siteMetadata":{"siteUrl":"https://holyhansss.github.io","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/smart_contract/over_under_flow/","nextSlug":"/smart_contract/reentrancy_attack/","prevSlug":"/smart_contract/block_timestamp/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}