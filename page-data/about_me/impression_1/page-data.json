{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/about_me/impression_1/",
    "result": {"data":{"cur":{"id":"e933b905-da42-51d8-b2ac-d86f1f06656e","html":"<h1 id=\"-30개의-글을-쓰면서-느낀점\" style=\"position:relative;\"><a href=\"#-30%EA%B0%9C%EC%9D%98-%EA%B8%80%EC%9D%84-%EC%93%B0%EB%A9%B4%EC%84%9C-%EB%8A%90%EB%82%80%EC%A0%90\" aria-label=\" 30개의 글을 쓰면서 느낀점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👋 30개의 글을 쓰면서 느낀점</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.222222222222214%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABJ0AAASdAHeZh94AAAAqUlEQVQoz51Q0QqDMAz0/z/Af/ITBGG+demwVeucbdUbKUTEbQo7CEmuyeVohhOs67rV3nssy/LBH5GdiYlAURTI8xzW2v8F94tKKZRliRjjtaA8cj4Gg0WICHVdo23b01nO2dXFeZ5hjIHWGs65nw6F2xzyf4UQt4vcf1sUXmb2c8mhNMPwRFXdEEKAaSzortH3LvVED0yTR9f1aBqLcXylYF4pSrwIvgGqeyYrndaJMwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"post_개수\"\n        title=\"post_개수\"\n        src=\"/static/f77fc401845fd3f68695745ec36a8c0f/37523/post_%EA%B0%9C%EC%88%98.png\"\n        srcset=\"/static/f77fc401845fd3f68695745ec36a8c0f/e9ff0/post_%EA%B0%9C%EC%88%98.png 180w,\n/static/f77fc401845fd3f68695745ec36a8c0f/f21e7/post_%EA%B0%9C%EC%88%98.png 360w,\n/static/f77fc401845fd3f68695745ec36a8c0f/37523/post_%EA%B0%9C%EC%88%98.png 720w,\n/static/f77fc401845fd3f68695745ec36a8c0f/13e20/post_%EA%B0%9C%EC%88%98.png 741w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>블로그를 시작한지 약 한달 반이 지났다. 초보 블로거로서 약 30개 정도의 블로그 글을 적으며 글쓴이로써 부족한 점을 많이 느낀다. 그래서 글을 적으며 배운점 및 느낀점을 적어내려가보려고 한다.</p>\n<p>이 블로그의 최초 목적은 기술 블로그였다. 내가 배우고 있는 기술에 대해 기록하는 것이 목적인. 그렇기에 내가 공부한 것을 토대로 글을 쓴다. 글을 쓰다 문득 느끼는 점은 나는 무엇을 위해 글을 쓰는가였다. 생각해보면 나는 아래 두가지 목적을 위해 글을 쓰기 시작하는 것 같다.</p>\n<ol>\n<li>나의 발전을 위하여</li>\n<li>남의 발전을 위하여</li>\n</ol>\n<h4 id=\"1번-나의-발전을-위하여\" style=\"position:relative;\"><a href=\"#1%EB%B2%88-%EB%82%98%EC%9D%98-%EB%B0%9C%EC%A0%84%EC%9D%84-%EC%9C%84%ED%95%98%EC%97%AC\" aria-label=\"1번 나의 발전을 위하여 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1번 나의 발전을 위하여.</h4>\n<p>나는 공부를 하면서 내가 공부했던 것들을 돌아볼때가 많다. 문제들을 해결해가다보면 겹치는 부분이 있고, 내가 공부했던 내용을 보면 이해가 더 잘된다. 기록은 나의 발전에 있어서 큰 기어를 하고 있다고 느낀다.</p>\n<p>아직 한달밖에 지나지 않았기에 정말 많은 발전이 있었다고는 말하지 못하겠다. 하지만 일년이 지난다면 다른 기술 블로거들이 말했던 것처럼 분명히 내 발전에 큰 도움이 되었다고 자신있게 말할 수 있을 것이라고 굳게 믿는다.</p>\n<h4 id=\"2번-남의-발전을-위하여\" style=\"position:relative;\"><a href=\"#2%EB%B2%88-%EB%82%A8%EC%9D%98-%EB%B0%9C%EC%A0%84%EC%9D%84-%EC%9C%84%ED%95%98%EC%97%AC\" aria-label=\"2번 남의 발전을 위하여 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2번 남의 발전을 위하여</h4>\n<p>남의 발전을 위하여. 다른 사람들이 내 글을 읽고 도움이 되면 좋겠다라는 생각을 종종했다. 다른 개발 분야(Frontend, Backend등)는 정보를 구하기 너무 쉽다. 인강도 많을 뿐더러 깊게 다루기 때문에 노력만한다면 초심자가 발을 들이기 쉬울 것 같다라는 생각을 했다.</p>\n<p>하지만 블록체인, EVM, Smart Contract과 같은 경우에는 다른 개발 분야에 비해 한국어로 되어있는 자료가 많지 않다. 물론 예전에 비해 한국어로 된 자료는 훨씬 많아졌지만, 더 깊은 이해를 위해서는 영어 유투브와 영어로된 자료들을 찾아보게 된다. 나는 미국에서 5년정도 살다왔기 때문에 큰 문제는 없지만, 영어를 힘들어하는 사람에게는 이보다 높은 진입장벽이 없다. 그렇기에 나의 글이 그들의 발전에 기여할 수 있을 것이라는 생각이 들었다.</p>\n<h4 id=\"기록자로써의-장점과-단점\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%A1%9D%EC%9E%90%EB%A1%9C%EC%8D%A8%EC%9D%98-%EC%9E%A5%EC%A0%90%EA%B3%BC-%EB%8B%A8%EC%A0%90\" aria-label=\"기록자로써의 장점과 단점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기록자로써의 장점과 단점</h4>\n<p>기록자로써 현재 나의 장점은 많은 글을 올리는 것이다. 최대한 공부한 내용을 다 전달하려고 노력한다. 하지만 나는 아직까지 나만을 위한 글을 쓰고있다는 생각이 든다. 다른 사람들이 잘 알아볼 수 있을까? 생각했을때 아직은 아닌 것 같다ㅠㅠ 하루 공부한 내용을 매일 기록하려다보니 내가 지치고 질이 떨어진 것 같다.</p>\n<p>어떻게 좋은 글을 빠르게 쓸 수 있을까? 앞으로 글을 쓸때 꼭 생각해야하는 부분이다. 사람들은 좋은 글을 찾는다. 그렇기에 위 2가지 목적을 이루기 위해서는 좋은 글을 많이 읽는 것과 좋은 글쓰는 것을 연습하는 방법밖에 없다.</p>\n<h4 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h4>\n<p>나 자신 앞으로도 화이팅ㅎ</p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#1%EB%B2%88-%EB%82%98%EC%9D%98-%EB%B0%9C%EC%A0%84%EC%9D%84-%EC%9C%84%ED%95%98%EC%97%AC\">1번 나의 발전을 위하여.</a></li>\n<li><a href=\"#2%EB%B2%88-%EB%82%A8%EC%9D%98-%EB%B0%9C%EC%A0%84%EC%9D%84-%EC%9C%84%ED%95%98%EC%97%AC\">2번 남의 발전을 위하여</a></li>\n<li><a href=\"#%EA%B8%B0%EB%A1%9D%EC%9E%90%EB%A1%9C%EC%8D%A8%EC%9D%98-%EC%9E%A5%EC%A0%90%EA%B3%BC-%EB%8B%A8%EC%A0%90\">기록자로써의 장점과 단점</a></li>\n<li><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">마무리</a></li>\n</ul>\n</div>","excerpt":"👋 30개의 글을 쓰면서 느낀점  블로그를 시작한지 약 한달 반이 지났다. 초보 블로거로서 약 30개 정도의 블로그 글을 적으며 글쓴이로써 부족한 점을 많이 느낀다. 그래서 글을 적으며 배운점 및 느낀점을 적어내려가보려고 한다. 이 블로그의 최초 목적은 기술 블로그였다. 내가 배우고 있는 기술에 대해 기록하는 것이 목적인. 그렇기에 내가 공부한 것을 토대로 글을 쓴다. 글을 쓰다 문득 느끼는 점은 나는 무엇을 위해 글을 쓰는가였다. 생각해보면 나는 아래 두가지 목적을 위해 글을 쓰기 시작하는 것 같다. 나의 발전을 위하여 남의 발전을 위하여 1번 나의 발전을 위하여. 나는 공부를 하면서 내가 공부했던 것들을 돌아볼때가 많다. 문제들을 해결해가다보면 겹치는 부분이 있고, 내가 공부했던 내용을 보면 이해가 더 잘된다. 기록은 나의 발전에 있어서 큰 기어를 하고 있다고 느낀다. 아직 한달밖에 지나지 않았기에 정말 많은 발전이 있었다고는 말하지 못하겠다. 하지만 일년이 지난다면 다른 기술…","frontmatter":{"date":"February 01, 2022","title":"30개의 글을 쓰면서 느낀점","categories":"나","author":"한성원","emoji":"🧢"},"fields":{"slug":"/about_me/impression_1/"}},"next":{"id":"e2daae35-e3b2-59dc-8d41-71dd41acfbfe","html":"<h1 id=\"-solidity-bytecode-and-opcode-basics\" style=\"position:relative;\"><a href=\"#-solidity-bytecode-and-opcode-basics\" aria-label=\" solidity bytecode and opcode basics permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👋 Solidity Bytecode and Opcode Basics</h1>\n<p>이 글은 내가 공부하면서 찾은 <a href=\"https://medium.com/@blockchain101/solidity-bytecode-and-opcode-basics-672e9b1a88c2\">이 글</a>을 변역하였다. 이 글은 ethernaut의 magicnumber의 저자가 작성한 글이며 bytecode와 opcode의 기본기에 대해서 다룬다. 나는 ethernaut 문제풀면서 이 개념에 접근하게 되었으며 공부하게 되었다. 글에는 내가 생각하는 부분이 포함되어있을 수도 있기 때문에, 내 글이 이해가 잘 되지 않는다면 <a href=\"https://medium.com/@blockchain101/solidity-bytecode-and-opcode-basics-672e9b1a88c2\">원문</a>을 읽어보는 것을 추천한다. 이미지 같은 경우 내가 공부하면서 얻은 최신이미지로 대체하였다.</p>\n<h3 id=\"시작\" style=\"position:relative;\"><a href=\"#%EC%8B%9C%EC%9E%91\" aria-label=\"시작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>시작</h3>\n<p>smart contract에 대해서 깊게 공부하면 할 수록 <code class=\"language-text\">PUSH1</code>, <code class=\"language-text\">SSTORE</code>, <code class=\"language-text\">CALLVALUE</code> 등과 같은 용어를 사용하게 될 것이다. 이러한 용어들은 무엇이고 우리는 그 용어들에 대해 알아야할까?</p>\n<p>이러한 용어를 알기 위해서는 이더리움 가상 머신(EVM)에 더 깊이 배워야 한다. 나는 이 주제에 대해 구글에 검색해 보았지만 관련 자료가 너무 적어 놀랐다. 아마 너 기술적 이어서일까? 그래서 이 글에서는 EVM 기초를 최대한 간단하게 설명해 보려고 한다.</p>\n<p>다른 유명한 프로그래밍 언어들(C, JAVA)과 마찬가지로 Solidity도 고급 프로그래밍 언어이다. 우리는 고급 프로그래밍 언어를 이해하고 작성하지만, 기계는 고급 프로그래밍언어를 이해하지 못한다. 그래서 solidity compiler를 사용해 EVM(기계)이 이해할 수 있는 언어로 변환시킨다. 이때 기계가 이해할 수 있는 언어는 Bytecode이다.</p>\n<!-- 우리가 Geth와 같은 이더리움 클라이언트를 설치하면 스마트 컨트랙트를 실행하기 위해 특별히 만들어진 경량 운영체제인 이더리움 버추얼 머신도 함께 나온다. -->\n<p>매우 간단한 contract를 예로 들어 보겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">pragma</span> <span class=\"token keyword\">solidity</span> <span class=\"token operator\">^</span><span class=\"token version number\">0.8.11</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">contract</span> <span class=\"token class-name\">MyContract</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token builtin\">uint</span> i <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">10</span> <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a href=\"https://remix.ethereum.org\">Remix IDE</a>에서 이 코드를 실행하고 contract 내용을 클릭하면 많은 정보를 볼 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 552px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 143.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAAACXBIWXMAABJ0AAASdAHeZh94AAACPklEQVRIx52WV3LbQBBEcRExAURmRM7MsmhTktP9j9KuHogQrXLA8mO0SxV28Cb1QsuLLzgcf2J/+IGyumA8iTDRY1lVjGeC8AjNsgtYTgFZ7aJ7QDcSTIxE1r42NTNo/FOWFxTlBbZToaxekOWf8TBYQTdieXNfI4jGjdDIP+LubcNRoBw6n9dMKxMiEibpEzx/g9X6gLp57ZyqmBAa0wR0PDVTGNPWTCvv3qrkkDmMk09I0rOs/hthmp3vI2S+bKeE45ZwvUryyL0/azAah+oOGd46OMLzGzHmk2RXZ6pha2wNEjFntPliK87o9LbSSiHTSRidpNNn8w0su5Q8Llc7DEeheg4Xyx2C8IR1cJDc6UaK1Wovzh8GayVKjS1DJzzMdbHcwvNrTPSWnOlQKY7G3mOobcgnRPGjOLKcUgrkuJVS+2i6HsOyc9hOAccpYduFULE/mQ7SKhWFB8PoURo5y84ygty7XiOkdfOCwTBQG72PMtSOYyrUg6FiUUwzEzKKQbN5RV2/YDbfilF4VaflN8LROBIHLBSJbun6E1q5VJN0bGbK13b3Da5X3zfL/3r7XfJFQlZ1t/8uAtteA8+y55S8q3mknsPbgxSN8SSUsG9vwh6EmRCRsKqf36r9VXqT+eT1yubuOy1dDj+StFdpKhUnfd/7WgSWc8yJSLMnOF4tdFl+lglRaZlOsV2/ljFjaFMzF0Ggev9piv5mTIkQXsO9yv7777D3vczn+ElD+dP+9yXQ52uB1ip9jl92Qm7bOUv+JgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"myContractDetail\"\n        title=\"myContractDetail\"\n        src=\"/static/b65d0aba2b4fb67f0f596ba0e8003621/08c0b/myContractDetail.png\"\n        srcset=\"/static/b65d0aba2b4fb67f0f596ba0e8003621/e9ff0/myContractDetail.png 180w,\n/static/b65d0aba2b4fb67f0f596ba0e8003621/f21e7/myContractDetail.png 360w,\n/static/b65d0aba2b4fb67f0f596ba0e8003621/08c0b/myContractDetail.png 552w\"\n        sizes=\"(max-width: 552px) 100vw, 552px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>이 경우 컴파일된 코드는 다음과 같습니다.(RunTime Cdoe)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">6080604052600080fdfea26469706673582212208d96441222a360f13b82dab7729b766da71f9e974dfc161fad4d0f49fc65b64664736f6c634300080b0033</code></pre></div>\n<p>이 긴 값들은 바이트코드라고도 알려진 최종 계약의 16진수 표현이다. 리믹스 브라우저의 “Web3 Deploy” 섹션에는 다음과 같이 나와있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> mycontractContract <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">web3<span class=\"token punctuation\">.</span>eth<span class=\"token punctuation\">.</span>Contract</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">var</span> mycontract <span class=\"token operator\">=</span> mycontractContract<span class=\"token punctuation\">.</span><span class=\"token function\">deploy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n     data<span class=\"token operator\">:</span> <span class=\"token string\">'0x60806040526018600055348015601457600080fd5b50603f8060226000396000f3fe6080604052600080fdfea26469706673582212208d96441222a360f13b82dab7729b766da71f9e974dfc161fad4d0f49fc65b64664736f6c634300080b0033'</span><span class=\"token punctuation\">,</span> \r\n     arguments<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n     <span class=\"token punctuation\">]</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n     from<span class=\"token operator\">:</span> web3<span class=\"token punctuation\">.</span>eth<span class=\"token punctuation\">.</span>accounts<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> \r\n     gas<span class=\"token operator\">:</span> <span class=\"token string\">'4700000'</span>\r\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e<span class=\"token punctuation\">,</span> contract</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\r\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">,</span> contract<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> contract<span class=\"token punctuation\">.</span>address <span class=\"token operator\">!==</span> <span class=\"token string\">'undefined'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n         console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Contract mined! address: '</span> <span class=\"token operator\">+</span> contract<span class=\"token punctuation\">.</span>address <span class=\"token operator\">+</span> <span class=\"token string\">' transactionHash: '</span> <span class=\"token operator\">+</span> contract<span class=\"token punctuation\">.</span>transactionHash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>간단히 말해 계약을 구축할 때 권장 가스가 4700,000인 16진수를 데이터 필드 아래에 배치하기만 하면 됩니다.\r\nEVM과 대화하려면 16진법을 생각해봐야한다. 왜 여러분의 지갑이나 transaction address 앞에 “0x”가 있는지 궁금해 본 적이 있지 않은가? 맞다, “0x”로 시작하는 것은 단순히 값이 16진수라는 것을 나타낸다. 16진수 앞에 “0x”를 두는 것은 필수는 아니다. 왜냐하면 EVM은 어떤 값이라도 16진수로 취급하기 때문이다.</p>\n<p>또한 opcode가 표시된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PUSH1 0x80 PUSH1 0x40 MSTORE PUSH1 0x0 DUP1 REVERT INVALID LOG2 PUSH5 0x6970667358 0x22 SLT KECCAK256 DUP14 SWAP7 DIFFICULTY SLT 0x22 LOG3 PUSH1 0xF1 EXTCODESIZE DUP3 0xDA 0xB7 PUSH19 0x9B766DA71F9E974DFC161FAD4D0F49FC65B646 PUSH5 0x736F6C6343 STOP ADDMOD SIGNEXTEND STOP CALLER </code></pre></div>\n<p>opcode는 사람이 읽을 수 있는 low level instruction(명령어)이다. 모든 opcode는 16진수로 되어있다. 예를 들어 <code class=\"language-text\">MSTORE</code>는 <code class=\"language-text\">0x52</code>, <code class=\"language-text\">SSTORE</code>은 <code class=\"language-text\">0x55</code> 등이다. 예전 <a href=\"http://gavwood.com/paper.pdf\">Ethereum Yellow Paper</a>(이더리움 기술 정의서)에 모든 solidity opcode와 16진수 값에 대해 나와있으니 확인해 보는 것을 추천한다.</p>\n<p>EVM은 Stack기반의 Machine이다. 간단히 설명하자면 프링글스 통에 프링글스 과자를 넣는다고 생각해보자. 마지막으로 넣은 과자 조각이 우리가 첫번째로 꺼내는 조각이 될 것이다. 우리는 컴퓨터 공학적인 용어로 LIFO(First In Last Out)라고 부른다.</p>\n<p>일반 산술에서, 우리는 수식을 다음과 같이 쓴다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// Answer is 14. we do multiplication before addition.\r\n10 + 2 * 2</code></pre></div>\n<p>stack 기반의 machine에서는 LIFO 원리로 작동한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2 2 * 10 + </code></pre></div>\n<p>이것은 <code class=\"language-text\">2</code>를 먼저 스택에 넣고, 그 다음에 또 다른 <code class=\"language-text\">2</code>를 넣고, 그 다음에 곱셈을 수행하라는 것을 의미한다. 결과는 스택 위에 <code class=\"language-text\">4</code>가 놓입니다. 이제 <code class=\"language-text\">4</code> 위에 숫자 <code class=\"language-text\">10</code>을 더하고 결국 두 숫자를 더한다. 스택의 최종 값은 <code class=\"language-text\">14</code>가 됩니다. 이러한 유형의 산술은 Postfix Notation 또는 <a href=\"https://en.wikipedia.org/wiki/Reverse_Polish_notation\">Reverse Polish Notation</a>.</p>\n<p>필자는 다행히 컴퓨터 공학 수업에서 배운 것이 기억나 쉽게 이해할 수 있었다. 어려운 개념은 아니기 때문에, 잘 모르겠다면 postfix notation에 관한 youtube 영상을 몇개 보고와도 잘 이해할 수 있을 것이다.</p>\n<p>스택에 데이터를 넣는 행위를 PUSH 명령어라고 하며 스택에서 데이터를 제거하는 행위를 POP 명령어라고 한다. 위의 예에서 볼 수 있는 가장 일반적인 opcode는 스택에 1바이트의 데이터를 넣는 것을 의미하는 “PUSH1”입니다.</p>\n<p>명령어는 다음과 같이 쓰인다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PUSH1 0x80</code></pre></div>\n<p>스택에 “0x80”의 1바이트 값을 넣는 것을 의미한다. 공교롭게도 “PUSH1”의 16진수 값도 “0x60”이 된다. 의무적 표기가 아닌 “0x”를 제거하면, 바이트코드로 이 논리를 “6080”으로 쓸 수 있다.</p>\n<p>조금 더 살펴보자</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PUSH1 0x80 PUSH1 0x40 MSTORE</code></pre></div>\n<p>우선 MSTORE(0x52)는 2개의 Input을 받고 Output을 내지 않는다. 위의 opcode는 다음을 의미한다.</p>\n<ol>\n<li>PUSH1(0x60): 0x80을 스택에 넣습니다.</li>\n<li>PUSH1(0x40): 0x40을 스택에 넣습니다.</li>\n<li>MSTORE(0x52): 0x60 메모리 공간을 할당하고 0x40 위치로 이동합니다.</li>\n</ol>\n<p>그 결과 바이트코드는 다음과 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">6080604052</code></pre></div>\n<p>사실 우리는 <code class=\"language-text\">6080604052</code>와 같은 마법같은 숫자를 어느 solidity bytecode에서든 볼수 있다. 필자가 실제로 ethernaut에 사용했던 code들을 전부 확인해 보니 모두 <code class=\"language-text\">6080604052</code>로 시작했다.<del>신기방기</del></p>\n<p>좀 더 복잡하게 만들어보자면 <code class=\"language-text\">0x40</code> 이나 <code class=\"language-text\">0x80</code>은 우리가 평상시 사용하는 40 또는 60으로 해석할 수 없다. 위에허 말했듯이 이는 16진수를 사용하고 있기 때문이다. <code class=\"language-text\">0x40</code>은 64, <code class=\"language-text\">0x60</code>은 96과 같다.</p>\n<p>간단히 말해서, “PUSH1 0x80 PUSH1 0x40 MSTORE”는 96바이트의 메모리를 할당하고 64바이트의 시작 부분으로 포인터를 이동하는 것이다. 현재 스크래치 공간은 64바이트, 임시 메모리 저장 공간은 32바이트입니다.\r\n<del>필자는 이 부분이 잘 이해가 안된다ㅠㅠ 관련해서 공부한 글 더 쓸 예정!</del></p>\n<p>EVM에는 데이터를 저장하는 3개의 장소가 있다. 첫번째로 stack이다. 위의 예와 같이 “PUSH” opcode를 사용하여 데이터를 저장한다. 두 번째로, 메모리(RAM)에서는 “MSTORE” opcode를 사용하고, 마지막으로 storage에 “SSTORE”를 사용하여 데이터를 저장한다. 데이터를 storage에 저장하는데 필요한 가스가 가장 비싸고 stack을 이용하는 것이 가장 저렴하다.</p>\n<h3 id=\"assembly-language\" style=\"position:relative;\"><a href=\"#assembly-language\" aria-label=\"assembly language permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Assembly Language</h3>\n<p>opcode를 이용해 전체 smart contract를 작성하는 것도 가능하다. 바로 여기서 ‘Solidity Assembly Language’가 필요합니다. 이해하기 어렵겠지만 가스를 절약하고 solidity만으로 할 수 없는 일을 하고 싶다면 유용할 수 있습니다.</p>\n<h3 id=\"summary\" style=\"position:relative;\"><a href=\"#summary\" aria-label=\"summary permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Summary</h3>\n<p>우리는 bytecode의 기본과 몇 개의 opcode만 다루었다. 아직 이야기되지 않은 않은 opcode가 너무 많지만, 우리는 적어도 전체적인 컨셉에 대해서 파악할 수 있었다고 생각한다. 우리가 심지어 solidity opcode를 배우는 데 신경써야 하는지에 대한 원래 질문을 거슬러 올라가면- 아마도 그렇다, 아니다.</p>\n<p>smart contract를 작성하기 위해 opcode를 알 필요가 없다. 반면에, EVM 오류 처리는 여전히 매우 원시적이며 Error가 일어났을 때 opcode를 살펴보는게 편리하다. 그렇기 때문에 더 배우는 것이 나쁠 것은 없다고 생각한다.</p>\n<!-- \r\n## a\r\n\r\na.sol -> a.abi, a.bin(bytecode) ->\r\nbytecode translated to opcode\r\nyellow paper안에 opcode들이 써있는 ex) push, pop, mstore 등등\r\n\r\ninitialize할때 initial code 와 runtime code로 나누어짐, initial code는 constructor등을 가지고 있음, runtime code에는 function 및 state들이 들어가 있음\r\n\r\nEVM은 stack기반이다. \r\n\r\n -->\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EC%8B%9C%EC%9E%91\">시작</a></li>\n<li><a href=\"#assembly-language\">Assembly Language</a></li>\n<li><a href=\"#summary\">Summary</a></li>\n</ul>\n</div>","frontmatter":{"date":"January 27, 2022","title":"Solidity Bytecode and Opcode Basics","categories":"EVM","author":"한성원","emoji":"🧢"},"fields":{"slug":"/EVM/SolidityBytecodeandOpcodeBasics/"}},"prev":{"id":"53248b34-8ebe-58d2-a38d-f05c5d2ab26a","html":"<h1 id=\"-1-recovery\" style=\"position:relative;\"><a href=\"#-1-recovery\" aria-label=\" 1 recovery permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👋 1. Recovery</h1>\n<p><strong>Difficulty 6/10</strong></p>\n<ul>\n<li>승리 조건</li>\n<li>코드 분석</li>\n<li>풀이</li>\n</ul>\n<p>순서로 진행 될 것이다.</p>\n<hr>\n<h2 id=\"들어가기-전\" style=\"position:relative;\"><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0-%EC%A0%84\" aria-label=\"들어가기 전 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>들어가기 전</h2>\n<p>필자는 이 문제를 풀기까지 거의 일주일 이상 걸린 것 같다. 그만큼 어려웠고 어려웠던만큼 배우는 것이 많았다.\r\n이 문제를 푸는 여러분도 문제를 통해 EVM에 대해 배우는 것이 많기를 바란다.\r\n이 문제는 <a href=\"https://medium.com/coinmonks/ethernaut-lvl-19-magicnumber-walkthrough-how-to-deploy-contracts-using-raw-assembly-opcodes-c50edb0f71a2\">이 글</a>을 기반으로 작성되었다.\r\n19번 문제를 풀때는 답을 찾아보고 왜 그 답이 올바른 답인지 찾는 과정으로 풀었다. 위 글은 19번의 답을 가장 잘 설명하고 있다고 생각하여 인용하였다.\r\n또한 내가 공부할때 봤던 사이트, 유투브 영상들의 리스트를 공유하니, 잘 모른다면 아래 자료들을 보고 공부해도 좋을 것 같다.</p>\n<ul>\n<li><a href=\"https://medium.com/@blockchain101/solidity-bytecode-and-opcode-basics-672e9b1a88c2\">Solidity Bytecode and Opcode Basics</a></li>\n<li><a href=\"https://blog.openzeppelin.com/deconstructing-a-solidity-contract-part-i-introduction-832efd2d7737/\">Openzeppelin Deconstructing a Solidity Contract</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=RxL_1AfV7N4\">EVM: From Solidity to byte code, memory and storage</a>(Consensys 엔지니어분들이 나와 설명해주셨다!!)</li>\n<li><a href=\"https://www.youtube.com/watch?v=HcOWNxL3Iy0\">EVM Bytecode ABI Gas and Gas Price</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=r4yKide6jiU\">Solidity Tutorial: Assembly</a>(EatTheBlocks)</li>\n<li>그리고 구글에서 Bytecode와 contract creation process등을 찾아보는 것을 추천한다!</li>\n</ul>\n<hr>\n<h2 id=\"승리-조건\" style=\"position:relative;\"><a href=\"#%EC%8A%B9%EB%A6%AC-%EC%A1%B0%EA%B1%B4\" aria-label=\"승리 조건 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>승리 조건</h2>\n<ul>\n<li>whatIsTheMeaningOfLife의 response contract인 MagicNumber에 올바른 번호(42)를 제공해주는 Solver를 만들어주면 된다.</li>\n<li>이번 문제에서는 10개 이하의 opcode를 사용해 해결해야 한다.</li>\n</ul>\n<hr>\n<h2 id=\"코드-분석\" style=\"position:relative;\"><a href=\"#%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D\" aria-label=\"코드 분석 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>코드 분석</h2>\n<p>이번 문제는 분석할 것이 많이 없다.\r\n내 생각에는 문제를 잘 이해하는 것이 더 중요하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">contract</span> <span class=\"token class-name\">MagicNum</span> <span class=\"token punctuation\">{</span>\r\n\r\n  <span class=\"token builtin\">address</span> <span class=\"token keyword\">public</span> solver<span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token keyword\">function</span> <span class=\"token function\">setSolver</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> _solver<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\r\n    solver <span class=\"token operator\">=</span> _solver<span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token comment\">/*\r\n    ____________/\\\\\\_______/\\\\\\\\\\\\\\\\\\_____        \r\n     __________/\\\\\\\\\\_____/\\\\\\///////\\\\\\___       \r\n      ________/\\\\\\/\\\\\\____\\///______\\//\\\\\\__      \r\n       ______/\\\\\\/\\/\\\\\\______________/\\\\\\/___     \r\n        ____/\\\\\\/__\\/\\\\\\___________/\\\\\\//_____    \r\n         __/\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\_____/\\\\\\//________   \r\n          _\\///////////\\\\\\//____/\\\\\\/___________  \r\n           ___________\\/\\\\\\_____/\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\_ \r\n            ___________\\///_____\\///////////////__\r\n  */</span>\r\n<span class=\"token punctuation\">}</span>\r\n</code></pre></div>\n<hr>\n<h2 id=\"풀이\" style=\"position:relative;\"><a href=\"#%ED%92%80%EC%9D%B4\" aria-label=\"풀이 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>풀이</h2>\n<p>이 문제에서 우리의 목표는 10개 이하의 opcode를 사용하여 Solver를 제공해주면 주는 것이다. 위에 ‘들어가기 전’에 관련해서 공부할 수 있는 링크를 달아두었지만 다시 한번 집고 넘어가도록 하겠다.</p>\n<h3 id=\"contract-creation-process계약-생성되는-과정\" style=\"position:relative;\"><a href=\"#contract-creation-process%EA%B3%84%EC%95%BD-%EC%83%9D%EC%84%B1%EB%90%98%EB%8A%94-%EA%B3%BC%EC%A0%95\" aria-label=\"contract creation process계약 생성되는 과정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Contract Creation Process(계약 생성되는 과정)</h3>\n<ol>\n<li>사용자가 또는 contract가 이더리움 네트워크에 transaction을<a href=\"https://holyhansss.github.io/EVM/evm/\">https://holyhansss.github.io/EVM/evm/</a> 보낸다. 이때 transaction에는 <code class=\"language-text\">to</code> field 는 비어있다. (관련해서는 <a href=\"\">이 글의 4번을</a> 참조하자)</li>\n<li>EVM은 Solidity로 작성된 코드를 bytecode로 컴파일하고, bytecode는 opcode로 변환된다. 이때 bytecode는 <code class=\"language-text\">초기화 코드</code>와 <code class=\"language-text\">런타임 코드</code>가 순차적으로 연결된다.</li>\n<li>contract creation단계에서는 stop 또는 return 명령어를 만날때 까지 초기화 코드만이 실행된다. 이때는 constructor()가 실행되고 contract는 주소를 가지게 된다.</li>\n<li>초기화 코드가 다 실행된 후에는 런타임 코드만 스택에 남아있게되고, 런타임 코드는 copycode라는 opcode를 통해 EVM으로 반환하게 된다.</li>\n<li>EVM은 반환된 opcode를 constructor에서 얻은 contract address의 state storage에 저장하게 된다. 그리고 이 opcode는 나중에 function이 호출 될 때마다 스택에 의해 실행될 런타임 opcode이다.</li>\n</ol>\n<h3 id=\"풀이-1\" style=\"position:relative;\"><a href=\"#%ED%92%80%EC%9D%B4-1\" aria-label=\"풀이 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>풀이</h3>\n<p>그렇다면 위 내용을 어떻게 사용 할 수 있을까?\r\n우리는 초기화 코드와 10 opcode이내의 런타임 opcode를 찾아 transaction을 보내면 된다!</p>\n<br/>\n<h4 id=\"runtime-code런타임-opcode\" style=\"position:relative;\"><a href=\"#runtime-code%EB%9F%B0%ED%83%80%EC%9E%84-opcode\" aria-label=\"runtime code런타임 opcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>runtime code(런타임 opcode)</h4>\n<p>우선 우리가 transaction에 보낼 런타임 opcode를 찾아보자!\r\n승리 조건에서 말했듯이 힌트에서 주어진 42를 return하는 Solver contract를 만들면 된다.\r\n42를 return 하기 위해서는 return opcode을 사용하면 된다.\r\nreturn은 2개의 argument(인수)을 필요로 한다.</p>\n<ul>\n<li><code class=\"language-text\">p</code>: 값이 메모리에 저장되는 위치 EX)0x0, 0x10, 0x20, 0x30…</li>\n<li><code class=\"language-text\">s</code>: 저장되는 데이터의 크기이다. 데이터의 크기는 32 bytes이며, 16진수로는 0x20이다.</li>\n</ul>\n<br/>\n<p>여기서 우리가 알아야 할 점은 값이 저장되어있어야 return을 사용할 수 있다는 것이다. 우리는 값을 저장하기 위해서 <code class=\"language-text\">mstore</code>사용할 것이다.</p>\n<p>mstore은 return 과 마찬가지로 2개의 argument(인수)를 필요로 한다.</p>\n<ul>\n<li><code class=\"language-text\">p</code>: 값이 메모리에 저장되는 위치 EX)0x0, 0x10, 0x20, 0x30…</li>\n<li><code class=\"language-text\">v</code>: 저장 할 값(42)</li>\n</ul>\n<ol>\n<li>먼저 mstore 부분을 bytecode로 나타내보겠다!</li>\n</ol>\n<p><code class=\"language-text\">60 = opcode push1</code>에 해당한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">6042  // v: push1 0x2A(2A는 16진수로 42이다.)\r\n6020  // p: push1 0x20(0x20 메모리 slot에 저장)\r\n52    // mstore(mstore을 나타내는 opcode)</code></pre></div>\n<ol start=\"2\">\n<li>다음으로 저장한 값을 return하면 된다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">6020  // s: push1 0x20(저장되는 데이터의 크기가 0x20이다. 0x20을 10진수로 나타내면 32 bytes에 해당한다)\r\n6020  // p: push1 0x20(0x20 메모리 slot에서 데이터를 불러온다)\r\nf3    // return(return을 나타내는 opcode)</code></pre></div>\n<p>opcode를 세어보면 총 10개의 opcode를 가지게 된다.\r\n승리 조건 중 10개 이하의 opcode를 사용하는 부분을 만족시키며 42를 return 할 수 있다. 위 과정을 하나의 합치면 <code class=\"language-text\">604260205260206020f3</code>라는 bytecode를 얻을 수 있다. 우리는 런타임 부분의 bytecode를 만들었다.</p>\n<h4 id=\"initialization-code초기화-opcode\" style=\"position:relative;\"><a href=\"#initialization-code%EC%B4%88%EA%B8%B0%ED%99%94-opcode\" aria-label=\"initialization code초기화 opcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Initialization code(초기화 opcode)</h4>\n<p>이제 transaction에 보낼 초기화 opcode를 찾아보자!\r\n초기화 opcode에서 우리는 runtime opcodes를 memory에 카피해야한다. copy한 후 return 시키면된다. 다행히 evm에는 <code class=\"language-text\">codecopy</code>라는 opcode가 존재한다. <code class=\"language-text\">codecopy</code>는 mstore, return과 다르게 3개의 arguments(인수)를 가진다.</p>\n<ul>\n<li><code class=\"language-text\">t</code>: 코드를 저장할 메모리의 위치(우리는 임의로 <code class=\"language-text\">0x00</code>을 사용 할 것이다)</li>\n<li><code class=\"language-text\">f</code>: <code class=\"language-text\">runtime opcodes</code>의 위치\n<ul>\n<li><code class=\"language-text\">runtime opcodes</code>는 <code class=\"language-text\">initialization opcodes</code>뒤에 오기 때문에 <code class=\"language-text\">initialization opcodes</code>가 다 나와야 알 수 있다.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">s</code>: <code class=\"language-text\">runtime opcodes</code>의 사이즈\n<ul>\n<li>우리의 runtime 코드는 <code class=\"language-text\">604260205260206020f3</code>로 10 bytes이다. 그리고 10 bytes는 16진수로 <code class=\"language-text\">0x0a</code>이다.</li>\n</ul>\n</li>\n</ul>\n<ol>\n<li><code class=\"language-text\">copycode</code>에 대한 opcodes</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">600a  // s: push1 0x0a (10 bytes)\r\n60??  // f: push1 0x?? (아직 우리는 runtime opcode가 어디에 있는지 알 수 없다)\r\n6000  // t: push1 0x00 (memory index 0을 목적지로 지정한다)\r\n39    // copycode opcode는 39이다.</code></pre></div>\n<ol start=\"2\">\n<li>메모리에서 runtime opcodes를 EVM으로 반환하는 bytecodes</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">600a  // s: push1 0x0a (return할 runtime opcode의 길이)\r\n6000  // p: push1 0x00 (메모리 0x00에서 접근)\r\nf3    // return to EVM</code></pre></div>\n<p>위에 만들어 놓은 <code class=\"language-text\">initialization opcodes</code>를 합치면 <code class=\"language-text\">600a60??600039600a6000f3</code>가 된다. 이제 <code class=\"language-text\">runtime opcode</code>의 시작 위치를 찾을 수 있다!</p>\n<p><code class=\"language-text\">initialization opcodes</code>가 총 12 bytes이기 때문이 <code class=\"language-text\">runtime opcode</code>는 12 byte에서부터 시작한다. 그리고 12을 16진수로 변경하면 <code class=\"language-text\">0x0c</code>이다. <code class=\"language-text\">initialization opcodes</code>의 위치에 <code class=\"language-text\">0x0c</code>를 넣어주면 다음과 같이 <code class=\"language-text\">initialization opcodes</code>를 만들 수 있다.</p>\n<p><code class=\"language-text\">600a600c600039600a6000f3</code></p>\n<p>이에 runtime까지 합친다면 <code class=\"language-text\">0x600a600c600039600a6000f3604260205260206020f3</code>가 된다! 이제 얻은 값을 사용해 문제를 풀면된다.</p>\n<br/>\n<p>아래 커맨드는 ethernaut console창에서 이루어진다\r\nctrl + shift + i를 눌러 console창을 활성화 시키자</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 우리가 찾은 bytecode 저장</span>\r\n<span class=\"token operator\">></span> <span class=\"token keyword\">var</span> bytecode <span class=\"token operator\">=</span> <span class=\"token string\">\"0x600a600c600039600a6000f3604260205260206020f3\"</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token comment\">// sendTransaction을 사용해 EVM에 contract creation transaction을 보낸다.</span>\r\n<span class=\"token operator\">></span> <span class=\"token keyword\">await</span> web3<span class=\"token punctuation\">.</span>eth<span class=\"token punctuation\">.</span><span class=\"token function\">sendTransaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> from<span class=\"token operator\">:</span> player<span class=\"token punctuation\">,</span> data<span class=\"token operator\">:</span> bytecode <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span>res</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<p>Etherscan에 들어가 내가 보낸 transaction을 확인하고 새로 만들어진 contract의 주소를 확인하여 magicNumber contract.setSolver에 보내주면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 만들어진 contract address를 parameter로 하여 보낸다.</span>\r\n<span class=\"token operator\">></span> <span class=\"token keyword\">await</span> contract<span class=\"token punctuation\">.</span><span class=\"token function\">setSolver</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"contract address\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>완료 후 ethernaut으로 돌아와 Submit instance를 누르고 조금 기다리면 block이 mine되고, 아래와 같이 뜨며 마무리된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">٩(- ̮̮̃-̃)۶ Well done, You have completed this level!!!</code></pre></div>\n<hr>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p>ethernaut문제 중 가장 어려웠던 문제이다. 위에서도 말했지만 어려웠기에 많이 배울 수 있었다. 이 문제를 통해 bytcode 및 opcode에 대한 이해도가 높아졌을 뿐더러 EVM contract creation process등등 많은 것을 얻을 수 있었다. 아마 이제는 좀 더 자신있게 <code class=\"language-text\">assembly</code>key를 사용할 수 있을 것 같다. 끝!!</p>\n<hr>\n<h2 id=\"ref\" style=\"position:relative;\"><a href=\"#ref\" aria-label=\"ref permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>REF</h2>\n<ul>\n<li>rinkeyb network ether faucet: <a href=\"https://faucets.chain.link/rinkeby\">https://faucets.chain.link/rinkeby</a></li>\n<li>ethernaut: <a href=\"https://ethernaut.openzeppelin.com/\">https://ethernaut.openzeppelin.com/</a></li>\n<li>remix IDE: <a href=\"https://remix.ethereum.org\">https://remix.ethereum.org</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0-%EC%A0%84\">들어가기 전</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%8A%B9%EB%A6%AC-%EC%A1%B0%EA%B1%B4\">승리 조건</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D\">코드 분석</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%92%80%EC%9D%B4\">풀이</a></p>\n<ul>\n<li>\n<p><a href=\"#contract-creation-process%EA%B3%84%EC%95%BD-%EC%83%9D%EC%84%B1%EB%90%98%EB%8A%94-%EA%B3%BC%EC%A0%95\">Contract Creation Process(계약 생성되는 과정)</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%92%80%EC%9D%B4-1\">풀이</a></p>\n<ul>\n<li><a href=\"#runtime-code%EB%9F%B0%ED%83%80%EC%9E%84-opcode\">runtime code(런타임 opcode)</a></li>\n<li><a href=\"#initialization-code%EC%B4%88%EA%B8%B0%ED%99%94-opcode\">Initialization code(초기화 opcode)</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">마무리</a></p>\n</li>\n<li>\n<p><a href=\"#ref\">REF</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"February 04, 2022","title":"(Ethernaut 취약점 18) MagicNumber","categories":"취약점분석","author":"한성원","emoji":"🧢"},"fields":{"slug":"/ethernaut/18_magicNumber_ethernaut/18_magicNumber_ethernaut/"}},"site":{"siteMetadata":{"siteUrl":"https://holyhansss.github.io","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/about_me/impression_1/","nextSlug":"/EVM/SolidityBytecodeandOpcodeBasics/","prevSlug":"/ethernaut/18_magicNumber_ethernaut/18_magicNumber_ethernaut/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}