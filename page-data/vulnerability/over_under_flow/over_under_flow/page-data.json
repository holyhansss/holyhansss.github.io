{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/vulnerability/over_under_flow/over_under_flow/",
    "result": {"data":{"cur":{"id":"957cc097-e5ab-5c01-a410-7e2216f8f744","html":"<h1 id=\"-over--underflow\" style=\"position:relative;\"><a href=\"#-over--underflow\" aria-label=\" over  underflow permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ Over &#x26; UnderFlow</h1>\n<h2 id=\"ë“¤ì–´ê°€ê¸°-ì „\" style=\"position:relative;\"><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0-%EC%A0%84\" aria-label=\"ë“¤ì–´ê°€ê¸° ì „ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë“¤ì–´ê°€ê¸° ì „</h2>\n<p>Overflowì™€ UnderflowëŠ” solidity 0.8.0 ë²„ì „ë¶€í„° ì•Œì•„ì„œ ì»¨íŠ¸ë¡¤ ë˜ê²Œ ë°”ë€Œì—ˆë‹¤.\r\n0.8.0 ì´í›„ ë²„ì „ì„ ì‚¬ìš©í•˜ì‹œëŠ” ë¶„ì€ ì•„ë˜ë¡œ ë‚´ë ¤ê°€ë„ ì¢‹ë‹¤.</p>\n<hr>\n<h2 id=\"overflowì™€-underflowë€\" style=\"position:relative;\"><a href=\"#overflow%EC%99%80-underflow%EB%9E%80\" aria-label=\"overflowì™€ underflowë€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>OverFlowì™€ UnderFlowë€</h2>\n<p>OverflowëŠ” ì§€ì •ëœ ì •ìˆ˜í˜•(int)ì˜ ìµœëŒ“ê°’ë³´ë‹¤ ì»¤ì¡Œì„ ë•Œ ë°œìƒí•œë‹¤.<br>\nUnderflowëŠ” ì§€ì •ëœ ì •ìˆ˜í˜•(uint)ì˜ ìµœì†Ÿê°’ë³´ë‹¤ ì‘ì•„ì¡Œì„ ë•Œ ë°œìƒí•œë‹¤.\r\nSolidityì—ì„œëŠ” unsigned Integer(uint)ë¥¼ ìì£¼ ì‚¬ìš©í•œë‹¤. uint256ì„ ê¸°ì¤€ìœ¼ë¡œ í–ˆì„ë•Œ ìµœëŒ€ê°’ì€ 2<sup>256</sup>-1ì´ê³  ìµœì†Œê°’ì€ 0ì´ë‹¤. ì¦‰ 2<sup>256</sup>-1ì— 1ì„ ë”í–ˆì„ë•Œ Overflow 0ì—ì„œ 1ì„ ëºì„ë•Œ underflowê°€ ì¼ì–´ë‚  ê²ƒì´ë‹¤.</p>\n<p>ExampleColdeë¥¼ ë³´ë©´ ë³´ë‹¤ ì‰½ê²Œ ì´í•´ í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.</p>\n<hr>\n<h2 id=\"example-code\" style=\"position:relative;\"><a href=\"#example-code\" aria-label=\"example code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Example Code</h2>\n<p>remix IDEì—ì„œ ì‹¤ìŠµì„ ì§„í–‰í•œë‹¤ë©´ ì´í•´ê°€ ë”ìš± ë¹ ë¥¼ê²ƒì´ë‹¤!</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token comment\">// SPDX-License-Identifier: MIT</span>\r\n<span class=\"token keyword\">pragma</span> <span class=\"token keyword\">solidity</span> <span class=\"token operator\">^</span><span class=\"token version number\">0.7.0</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 0.8.0 ì´ì „ ë²„ì „ì´ì–´ì•¼í•¨!</span>\r\n\r\n<span class=\"token keyword\">contract</span> <span class=\"token class-name\">OverflowUnderFlow</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token builtin\">int256</span> <span class=\"token keyword\">public</span> zero <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token builtin\">uint256</span> <span class=\"token keyword\">public</span> max <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token operator\">**</span><span class=\"token number\">256</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n    \r\n    <span class=\"token comment\">// zero will end up at 2**256-1</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">underflow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\r\n        zero <span class=\"token operator\">-=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n    <span class=\"token comment\">// max will end up at 0</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">overflow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">payable</span><span class=\"token punctuation\">{</span>\r\n        max <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><span style=\"color:grey\">ì¶œì²˜: <a href=\"https://medium.com/loom-network-korean/%EC%8A%A4%EB%A7%88%ED%8A%B8-%EC%BB%A8%ED%8A%B8%EB%9E%99%ED%8A%B8%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%B3%B4%ED%98%B8%ED%95%A0-%EA%B2%83%EC%9D%B8%EA%B0%80-%EC%86%94%EB%A6%AC%EB%94%94%ED%8B%B0%EC%9D%98-6%EA%B0%80%EC%A7%80-%EC%B7%A8%EC%95%BD%EC%A0%90-%EB%B0%8F-%EB%8C%80%EB%B9%84%EC%B1%85-1%EB%B6%80-c21d4e37034a\">https://medium.com/loom-network-korean/ìŠ¤ë§ˆíŠ¸-ì»¨íŠ¸ë™íŠ¸ë¥¼-ì–´ë–»ê²Œ-ë³´í˜¸í• -ê²ƒì¸ê°€-ì†”ë¦¬ë””í‹°ì˜-6ê°€ì§€-ì·¨ì•½ì -ë°-ëŒ€ë¹„ì±…-1ë¶€</a></span></p>\n<p>ìœ„ ì½”ë“œëŠ” 0.8.0 ì´ì „ ë²„ì „ë“¤ì—ê²ŒëŠ” ìœ„í—˜í•œ ì½”ë“œì´ë‹¤. zeroì—ì„œ underflow functionì„ ì‹¤í–‰ê¸°í‚¤ë©´ -1ë¡œ ë°”ë€ŒëŠ” ê²ƒì´ ì•„ë‹Œ 2<sup>256</sup>-1ë¡œ ë°”ë€Œê²Œ ëœë‹¤. ë§Œì•½ ì´ ì½”ë“œê°€ erc20ì™€ ê°™ì€ í† í°ì„ ë‹¤ë£¨ëŠ” ì½”ë“œì˜€ë‹¤ë©´ í° ì†ì‹¤ì„ ì…ì„ìˆ˜ë„ ìˆë‹¤.\r\nOverflowë„ ë§ˆì°¬ê°€ì§€ë¡œ max(2<sup>256</sup>-1) + 1ì„ í•˜ë©´ 2<sup>256</sup>ì´ ì•„ë‹Œ 0ìœ¼ë¡œ ë°”ë€Œê²Œ ëœë‹¤.</p>\n<hr>\n<h2 id=\"ì–´ë–»ê²Œ-overflowì™€-underflowë¥¼-ì˜ˆë°©í• -ìˆ˜-ìˆì„ê¹Œ\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EB%96%BB%EA%B2%8C-overflow%EC%99%80-underflow%EB%A5%BC-%EC%98%88%EB%B0%A9%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\" aria-label=\"ì–´ë–»ê²Œ overflowì™€ underflowë¥¼ ì˜ˆë°©í•  ìˆ˜ ìˆì„ê¹Œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì–´ë–»ê²Œ overflowì™€ underflowë¥¼ ì˜ˆë°©í•  ìˆ˜ ìˆì„ê¹Œ?</h2>\n<p>openzepplineì˜ SafeMath ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥ ë³´í¸í™”ë˜ì–´ìˆë‹¤.</p>\n<hr>\n<h2 id=\"080-ì´í›„-ë²„ì „ì—ì„œëŠ”-ì–´ë–»ê²Œ-ë‹¤ë¥¸ê°€\" style=\"position:relative;\"><a href=\"#080-%EC%9D%B4%ED%9B%84-%EB%B2%84%EC%A0%84%EC%97%90%EC%84%9C%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%8B%A4%EB%A5%B8%EA%B0%80\" aria-label=\"080 ì´í›„ ë²„ì „ì—ì„œëŠ” ì–´ë–»ê²Œ ë‹¤ë¥¸ê°€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>0.8.0 ì´í›„ ë²„ì „ì—ì„œëŠ” ì–´ë–»ê²Œ ë‹¤ë¥¸ê°€?</h2>\n<p>0.8.0 ì´í›„ ë²„ì „ì—ì„œëŠ” ìœ„ì™€ ê°™ì€ ì½”ë“œë¥¼ ì‘ì„±í•´ë„ ë¬¸ì œê°€ ë˜ì§€ ì•ŠëŠ”ë‹¤. 0.8.0 ì´í›„ ë²„ì „ì€ underflow ë˜ëŠ” overflowê°€ ì¼ì–´ë‚˜ë©´ ì¦‰ì‹œ revert í•´ë²„ë¦¬ê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ë˜ì„œ ë”°ë¡œ safe mathì™€ ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš© í•  í•„ìš”ê°€ ì—†ë‹¤.</p>\n<hr>\n<h2 id=\"ë§ˆë¬´ë¦¬\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"ë§ˆë¬´ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë§ˆë¬´ë¦¬</h2>\n<p>overflowì™€ underflowëŠ” ë‹¤ë¥¸ ì–¸ì–´ë¥¼ ë°°ìš°ë©´ì„œ ë°°ì› ë˜ ê²ƒì´ë¼ ê°œë… ìì²´ëŠ” ì‰¬ì› ë‹¤.\r\në‹¤ìŒ í¬ìŠ¤íŠ¸ì—ì„œëŠ” <strong>ì§§ì€ ì£¼ì†Œ ê³µê²©</strong> ì— ëŒ€í•´ì„œ ë‹¤ë£¨ì–´ ë³¼ ì˜ˆì •ì´ë‹¤.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0-%EC%A0%84\">ë“¤ì–´ê°€ê¸° ì „</a></li>\n<li><a href=\"#overflow%EC%99%80-underflow%EB%9E%80\">OverFlowì™€ UnderFlowë€</a></li>\n<li><a href=\"#example-code\">Example Code</a></li>\n<li><a href=\"#%EC%96%B4%EB%96%BB%EA%B2%8C-overflow%EC%99%80-underflow%EB%A5%BC-%EC%98%88%EB%B0%A9%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\">ì–´ë–»ê²Œ overflowì™€ underflowë¥¼ ì˜ˆë°©í•  ìˆ˜ ìˆì„ê¹Œ?</a></li>\n<li><a href=\"#080-%EC%9D%B4%ED%9B%84-%EB%B2%84%EC%A0%84%EC%97%90%EC%84%9C%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%8B%A4%EB%A5%B8%EA%B0%80\">0.8.0 ì´í›„ ë²„ì „ì—ì„œëŠ” ì–´ë–»ê²Œ ë‹¤ë¥¸ê°€?</a></li>\n<li><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">ë§ˆë¬´ë¦¬</a></li>\n</ul>\n</div>","excerpt":"ğŸ‘‹ Over & UnderFlow ë“¤ì–´ê°€ê¸° ì „ Overflowì™€ UnderflowëŠ” solidity 0.8.0 ë²„ì „ë¶€í„° ì•Œì•„ì„œ ì»¨íŠ¸ë¡¤ ë˜ê²Œ ë°”ë€Œì—ˆë‹¤.\r\n0.8.0 ì´í›„ ë²„ì „ì„ ì‚¬ìš©í•˜ì‹œëŠ” ë¶„ì€ ì•„ë˜ë¡œ ë‚´ë ¤ê°€ë„ ì¢‹ë‹¤. OverFlowì™€ UnderFlowë€ OverflowëŠ” ì§€ì •ëœ ì •ìˆ˜í˜•(int)ì˜ ìµœëŒ“ê°’ë³´ë‹¤ ì»¤ì¡Œì„ ë•Œ ë°œìƒí•œë‹¤. UnderflowëŠ” ì§€ì •ëœ ì •ìˆ˜í˜•(uint)ì˜ ìµœì†Ÿê°’ë³´ë‹¤ ì‘ì•„ì¡Œì„ ë•Œ ë°œìƒí•œë‹¤.\r\nSolidityì—ì„œëŠ” unsigned Integer(uint)ë¥¼ ìì£¼ ì‚¬ìš©í•œë‹¤. uint256ì„ ê¸°ì¤€ìœ¼ë¡œ í–ˆì„ë•Œ ìµœëŒ€ê°’ì€ 2256-1ì´ê³  ìµœì†Œê°’ì€ 0ì´ë‹¤. ì¦‰ 2256-1ì— 1ì„ ë”í–ˆì„ë•Œ Overflow 0ì—ì„œ 1ì„ ëºì„ë•Œ underflowê°€ ì¼ì–´ë‚  ê²ƒì´ë‹¤. ExampleColdeë¥¼ ë³´ë©´ ë³´ë‹¤ ì‰½ê²Œ ì´í•´ í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. Example Code remix IDEì—ì„œ ì‹¤ìŠµì„ ì§„í–‰í•œë‹¤ë©´ ì´í•´ê°€ ë”ìš± ë¹ ë¥¼ê²ƒì´ë‹¤! ì¶œì²˜: https://medium.com/loom-network-koâ€¦","frontmatter":{"date":"December 21, 2021","title":"(ì·¨ì•½ì  ì‹œë¦¬ì¦ˆ 2) Over & Under Flow?","categories":"ì·¨ì•½ì ë¶„ì„","author":"í•œì„±ì›","emoji":"ğŸ§¢"},"fields":{"slug":"/vulnerability/over_under_flow/over_under_flow/"}},"next":{"id":"5af0743e-deb7-5f3d-ae88-aa765fa5ca31","html":"<h1 id=\"-reentrancy-attack-ì¬ì§„ì…-ê³µê²©\" style=\"position:relative;\"><a href=\"#-reentrancy-attack-%EC%9E%AC%EC%A7%84%EC%9E%85-%EA%B3%B5%EA%B2%A9\" aria-label=\" reentrancy attack ì¬ì§„ì… ê³µê²© permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ Reentrancy Attack (ì¬ì§„ì… ê³µê²©)</h1>\n<h2 id=\"ë“¤ì–´ê°€ê¸°ì „\" style=\"position:relative;\"><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0%EC%A0%84\" aria-label=\"ë“¤ì–´ê°€ê¸°ì „ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë“¤ì–´ê°€ê¸°ì „</h2>\n<h3 id=\"fallback-í•¨ìˆ˜\" style=\"position:relative;\"><a href=\"#fallback-%ED%95%A8%EC%88%98\" aria-label=\"fallback í•¨ìˆ˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Fallback í•¨ìˆ˜?</h3>\n<p>Fallback í•¨ìˆ˜ëŠ” contractì—ì„œ í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œí‚¬ë•Œ í•¨ìˆ˜ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì‹¤í–‰ë˜ëŠ” functionì´ë‹¤.\r\n0.6ì´ì „ ë²„ì „ì—ì„œëŠ” fallbackì´ etherëŠ” ê²ƒê³¼ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ì˜ ëŒ€ë¹„ì±…ìœ¼ë¡œ ì‚¬ìš©ë˜ì—ˆì§€ë§Œ 0.6 ì´í›„ ë²„ì „ë¶€í„° fallbackì€ fallbackê³¼ receiveë¡œ ë‚˜ëˆ„ì–´ì¡Œë‹¤. 0.6ë¶€í„°ëŠ” fallbackì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  receiveë¥¼ í†µí•´ ì´ë”ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.</p>\n<hr>\n<h2 id=\"reentrancy-attackì¬ì§„ì…-ê³µê²©ì´ë€\" style=\"position:relative;\"><a href=\"#reentrancy-attack%EC%9E%AC%EC%A7%84%EC%9E%85-%EA%B3%B5%EA%B2%A9%EC%9D%B4%EB%9E%80\" aria-label=\"reentrancy attackì¬ì§„ì… ê³µê²©ì´ë€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reentrancy Attack(ì¬ì§„ì… ê³µê²©)ì´ë€?</h2>\n<p>Reentrancy Attackì€ contract Aê°€ í•˜ë‚˜ì˜ userë¡œì¨ contract B ì—ê²Œ transactionì„ ë³´ë‚¸ë‹¤. ì´ë•Œ contract Aê°€ ìš”ì²­ì— ëŒ€í•œ ì œì–´ê¶Œì„ ê°€ì§€ê²Œëœë‹¤. ê·¸ë ‡ê²Œ ë˜ë©´ contract Aê°€ ë³´ë‚¸ ì²«ë²ˆì§¸ ìš”ì²­ì´ ëë‚˜ê¸° ì „ì— ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ê³„ì†í•´ì„œ í˜¸ì¶œ í•  ìˆ˜ ìˆê²Œëœë‹¤. ì´ëŠ” ì¬ì§„ì…ì„ etherë¥¼ ë¹¼ì˜¬ ìˆ˜ ìˆê²Œ ëœë‹¤.</p>\n<hr>\n<h2 id=\"example-code\" style=\"position:relative;\"><a href=\"#example-code\" aria-label=\"example code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Example Code</h2>\n<p>ì˜ˆì‹œë¥¼ í•˜ë‚˜ ë³´ë„ë¡ í•˜ì!\r\nì²«ë²ˆì§¸ contract AëŠ” etherë¥¼ ë³´ê´€í•˜ëŠ” ê³³\r\në‘ë²ˆì§¸ contract BëŠ” Aë¥¼ ê³µê²©í•˜ëŠ” contractì´ë‹¤.</p>\n<p>ê·¸ëŒ€ë¡œ remixë¥¼ ì‚¬ìš©í•´ í…ŒìŠ¤íŠ¸í•´ë³´ë©´ ì´í•´ê°€ ë¹ ë¥¼ ê²ƒì´ë‹¤!</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\">\r\n<span class=\"token keyword\">contract</span> <span class=\"token class-name\">EtherStore</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">mapping</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">uint</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> balances<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">deposit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">payable</span> <span class=\"token punctuation\">{</span>\r\n        balances<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> msg<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">withdraw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token builtin\">uint</span> bal <span class=\"token operator\">=</span> balances<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>bal <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token punctuation\">(</span><span class=\"token builtin\">bool</span> sent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">.</span>call<span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">:</span> bal<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>sent<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Failed to send Ether\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        balances<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">getBalance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">view</span> <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>balance<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n    \r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">contract</span> <span class=\"token class-name\">Attack</span> <span class=\"token punctuation\">{</span>\r\n    EtherStore <span class=\"token keyword\">public</span> etherStore<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> _etherStoreAddress<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        etherStore <span class=\"token operator\">=</span> <span class=\"token function\">EtherStore</span><span class=\"token punctuation\">(</span>_etherStoreAddress<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">// Fallback is called when EtherStore sends Ether to this contract.</span>\r\n    <span class=\"token function\">fallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> <span class=\"token keyword\">payable</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span>etherStore<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>balance <span class=\"token operator\">>=</span> <span class=\"token number\">1</span> ether<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            etherStore<span class=\"token punctuation\">.</span><span class=\"token function\">withdraw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">attack</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> <span class=\"token keyword\">payable</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>value <span class=\"token operator\">>=</span> <span class=\"token number\">1</span> ether<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        etherStore<span class=\"token punctuation\">.</span>deposit<span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span> ether<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        etherStore<span class=\"token punctuation\">.</span><span class=\"token function\">withdraw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">// Helper function to check the balance of this contract</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">getBalance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">view</span> <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>balance<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><span style=\"color:grey\">ì¶œì²˜: <a href=\"https://solidity-by-example.org/hacks/re-entrancy/\">https://solidity-by-example.org/hacks/re-entrancy/</a></span></li>\n</ul>\n<p><strong>EtherStore contract</strong> ë¥¼ ë³´ë©´ depositê³¼ withdraw í•¨ìˆ˜ê°€ ì¡´ì¬í•œë‹¤.</p>\n<ul>\n<li>deposit í•¨ìˆ˜ë¥¼ ì›í•˜ëŠ” ë§Œí¼ì˜ etherë¥¼ ë³´ê´€í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” í•¨ìˆ˜ì´ë‹¤.</li>\n<li>withdraw í•¨ìˆ˜ëŠ” ìì‹ ì´ ë³´ê´€í•œ etherë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” í•¨ìˆ˜ì´ë‹¤.</li>\n</ul>\n<p><strong>Attack contract</strong> ì—ëŠ” attackê³¼ fallbackí•¨ìˆ˜ê°€ ì¡´ì¬í•œë‹¤.</p>\n<ul>\n<li>attack í•¨ìˆ˜ëŠ” ether í•˜ë‚˜ë¥¼ deposití•˜ê³  ì´í›„ ë°”ë¡œ withdraw í•œë‹¤</li>\n<li>fallback í•¨ìˆ˜ì—ëŠ” etherê°€ 1ì´ìƒ ë³´ê´€ë˜ì–´ ìˆë‹¤ë©´ withdrawí•¨ìˆ˜ë¥¼ ë‹¤ì‹œ ë¶€ë¥¸ë‹¤.</li>\n</ul>\n<p>í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ìˆœì„œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">- Attack.attack\r\n- EtherStore.deposit\r\n- EtherStore.withdraw\r\n- Attack fallback (receives 1 Ether)\r\n- EtherStore.withdraw\r\n- Attack.fallback (receives 1 Ether)\r\n- EtherStore.withdraw\r\n- Attack fallback (receives 1 Ether)\r\n- ...(ì´í›„ ë°˜ë³µ)</code></pre></div>\n<ol>\n<li>ê³µê²©ìê°€ attack í•¨ìˆ˜ë¥¼ í†µí•´ EtherStoreì— 1 etherë¥¼ deposití•œë‹¤</li>\n<li>ì´í›„ EtherStoreì— 1 etherë¥¼ ì°¾ê² ë‹¤ê³  withdraw í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.</li>\n<li>withdraw í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ë©´ attack í•¨ìˆ˜ì˜ fallback functionì´ í˜¸ì¶œëœë‹¤.(ì´ë”ë¥¼ ê°€ì ¸ì˜¤ê¸° ë•Œë¬¸ì—!)</li>\n<li>ì´í›„ fallback function ì•ˆì— ìˆëŠ” withdrawí•¨ìˆ˜ë¥¼ ì¬í˜¸ì¶œ í•˜ê²Œëœë‹¤.</li>\n<li>ì´í›„ 3-4 ê³¼ì •ì´ ë°˜ë³µë˜ë©° ì¬ì§„ì… ê³µê²©ì´ ì„±ê³µí•œë‹¤.</li>\n</ol>\n<p>ì´ì²˜ëŸ¼ ì¬ì§„ì… ê³µê²©ì„ í†µí•´ ë¶€ë‹¹í•œ ì´ë“ì„ ì·¨í•  ìˆ˜ ìˆê²Œëœë‹¤.</p>\n<hr>\n<h2 id=\"how-to-prevent\" style=\"position:relative;\"><a href=\"#how-to-prevent\" aria-label=\"how to prevent permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to prevent?</h2>\n<p>ê·¸ë ‡ë‹¤ë©´ reentrency attackì€ ì–´ë–»ê²Œ ì˜ˆë°© í•  ìˆ˜ ìˆì„ê¹Œ?</p>\n<p>Reentrency attackì€ ì˜ˆë°©í•˜ëŠ” ë°©ë²•ì€ ì´ 2ê°€ì§€ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.</p>\n<ol>\n<li>\n<p>openzepplineì˜ ReentrancyGuard contractì˜ noReentrant modifier ì‚¬ìš©í•˜ê¸°</p>\n<ul>\n<li>openzeppline LibraryëŠ” secure smart contract ê°œë°œì„ ìœ„í•œ Libraryì´ë‹¤.</li>\n<li>noReentrant modifierì˜ ì½”ë“œëŠ” ì´ëŸ¬í•˜ë‹¤.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\">    <span class=\"token keyword\">modifier</span> <span class=\"token function\">nonReentrant</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// On the first call to nonReentrant, _notEntered will be true</span>\r\n    <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>_status <span class=\"token operator\">!=</span> _ENTERED<span class=\"token punctuation\">,</span> <span class=\"token string\">\"ReentrancyGuard: reentrant call\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// Any calls to nonReentrant after this point will fail</span>\r\n    _status <span class=\"token operator\">=</span> _ENTERED<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">_</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// By storing the original value once again, a refund is triggered (see</span>\r\n    <span class=\"token comment\">// https://eips.ethereum.org/EIPS/eip-2200)</span>\r\n    _status <span class=\"token operator\">=</span> _NOT_ENTERED<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>í•¨ìˆ˜ ë’¤ì— noReentrantë¥¼ ë¶™í˜€ì£¼ëŠ” ê²ƒìœ¼ë¡œ ì‰¬ê²Œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.</p>\n</li>\n<li>\n<p>Check-Effects-Interaction íŒ¨í„´</p>\n</li>\n</ol>\n<ul>\n<li>í•¨ìˆ˜ ë‚´ì—ì„œ interactionì´ ì¼ì–´ë‚˜ê¸° ì „ checkì™€ effectë¥¼ ë‹¤ ì ìš©í•˜ëŠ” íŒ¨í„´ì´ë‹¤. ìœ„ ì˜ˆì œì˜ withdraw í•¨ìˆ˜ ê°™ì€ ê²½ìš° effect ë¶€ë¶„ì´ interaction ë¶€ë¶„ ë‹¤ìŒì— ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</li>\n<li>Check-Effects-Interaction íŒ¨í„´ì„ ì ìš©í•˜ê²Œ ë˜ë©´ interactioní•˜ê¸° ì „ì— ë¨¼ì € balanceì— ëŒ€í•œ ë°ì´í„°ê°€ ë°”ë€œìœ¼ë¡œ reentrencyí•˜ê²Œ ë˜ì–´ë„ requireë¬¸ì— ê±¸ë¦¬ê²Œ ëœë‹¤.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">function</span> <span class=\"token function\">withdraw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token builtin\">uint</span> bal <span class=\"token operator\">=</span> balances<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>bal <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token punctuation\">(</span><span class=\"token builtin\">bool</span> sent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">.</span>call<span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">:</span> bal<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// interaction ë¶€ë¶„!!</span>\r\n      <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>sent<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Failed to send Ether\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      balances<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// effect!!</span>\r\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h2 id=\"ë§ˆì¹˜ë©°\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"ë§ˆì¹˜ë©° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë§ˆì¹˜ë©°</h2>\n<p>â€œë¸”ë¡ì²´ì¸ì€ í•´í‚¹ ë‹¹í•˜ì§€ ì•ŠëŠ”ë‹¤!â€ ë¼ëŠ” ê²ƒì€ ë§ëŠ” ë§ì´ì§€ë§Œ ë¸”ë¡ì²´ì¸ ìœ„ì—ì„œ ë§Œë“¤ì–´ì§€ëŠ” smart contractëŠ” ê·¸ë ‡ì§€ ì•Šë‹¤. ì½”ë“œë¥¼ ì¡°ê¸ˆì´ë¼ë„ ì˜ëª» ì§œê²Œë˜ë©´ Reentrency attackê³¼ ë§ì€ ì·¨ì•½ì ë“¤ì´ ìƒê¸¸ ìˆ˜ ìˆë‹¤. ê·¸ëŸ¼ìœ¼ë¡œ ì•ìœ¼ë¡œ ì·¨ì•½ì ë“¤ì— ëŒ€í•´ ê³µë¶€í•´ smart contractë¥¼ ë§Œë“¤ë•Œ ìœ ì˜í•˜ë„ë¡ í•˜ì!!</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0%EC%A0%84\">ë“¤ì–´ê°€ê¸°ì „</a></p>\n<ul>\n<li><a href=\"#fallback-%ED%95%A8%EC%88%98\">Fallback í•¨ìˆ˜?</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#reentrancy-attack%EC%9E%AC%EC%A7%84%EC%9E%85-%EA%B3%B5%EA%B2%A9%EC%9D%B4%EB%9E%80\">Reentrancy Attack(ì¬ì§„ì… ê³µê²©)ì´ë€?</a></p>\n</li>\n<li>\n<p><a href=\"#example-code\">Example Code</a></p>\n</li>\n<li>\n<p><a href=\"#how-to-prevent\">How to prevent?</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">ë§ˆì¹˜ë©°</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"December 20, 2021","title":"(ì·¨ì•½ì  ì‹œë¦¬ì¦ˆ 1) Reentrancy Attack (ì¬ì§„ì… ê³µê²©)?","categories":"ì·¨ì•½ì ë¶„ì„","author":"í•œì„±ì›","emoji":"ğŸ§¢"},"fields":{"slug":"/vulnerability/reentrancy_attack/reentrancy_attack/"}},"prev":{"id":"fb9c5327-00bd-577e-aeb4-3402a45f6026","html":"<h1 id=\"-1-fallback\" style=\"position:relative;\"><a href=\"#-1-fallback\" aria-label=\" 1 fallback permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ 1. Fallback</h1>\n<p><strong>Difficulty 1/10</strong></p>\n<p>ì§ì ‘ í‘¼ Ethernauts í’€ì´ë¥¼ ì ì–´ë³´ë ¤ê³  í•œë‹¤. ì·¨ì•½ì ì— ê³µë¶€í–ˆë˜ ì·¨ì•½ì ì„ ì‹¤ì œë¡œ ê³µê²©í•´ë³´ë©° ë³µìŠµ ë° ì‹¤ìŠµì„ í•´ë³¼ìˆ˜ ìˆì–´ ì¢‹ì€ ê²ƒ ê°™ë‹¤.</p>\n<ul>\n<li>ìŠ¹ë¦¬ ì¡°ê±´</li>\n<li>ì½”ë“œ ë¶„ì„</li>\n<li>í’€ì´</li>\n</ul>\n<p>ìˆœì„œë¡œ ì§„í–‰ ë  ê²ƒì´ë‹¤.</p>\n<hr>\n<h2 id=\"ìŠ¹ë¦¬-ì¡°ê±´\" style=\"position:relative;\"><a href=\"#%EC%8A%B9%EB%A6%AC-%EC%A1%B0%EA%B1%B4\" aria-label=\"ìŠ¹ë¦¬ ì¡°ê±´ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ìŠ¹ë¦¬ ì¡°ê±´</h2>\n<ul>\n<li>contractì˜ ownershipì„ ëºì–´ì˜¤ê¸°</li>\n<li>contractì˜ balanceë¥¼ 0ìœ¼ë¡œ ë§Œë“¤ê¸°</li>\n</ul>\n<hr>\n<h2 id=\"ì½”ë“œ-ë¶„ì„\" style=\"position:relative;\"><a href=\"#%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D\" aria-label=\"ì½”ë“œ ë¶„ì„ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì½”ë“œ ë¶„ì„</h2>\n<p>ë¶„ì„ì€ ì£¼ì„ì—!</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token comment\">// SPDX-License-Identifier: MIT</span>\r\n<span class=\"token keyword\">pragma</span> <span class=\"token keyword\">solidity</span> <span class=\"token operator\">^</span><span class=\"token version number\">0.6.0</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">import</span> <span class=\"token string\">'@openzeppelin/contracts/math/SafeMath.sol'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">contract</span> <span class=\"token class-name\">Fallback</span> <span class=\"token punctuation\">{</span>\r\n\r\n    <span class=\"token keyword\">using</span> <span class=\"token class-name\">SafeMath</span> <span class=\"token keyword\">for</span> <span class=\"token builtin\">uint256</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// ê°ê°ì˜ addressë‹¹ ether ê¸°ì—¬ë„(contribution)</span>\r\n    <span class=\"token keyword\">mapping</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">uint</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> contributions<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// Fallback Contractì˜ owner address</span>\r\n    <span class=\"token builtin\">address</span> <span class=\"token keyword\">payable</span> <span class=\"token keyword\">public</span> owner<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">//constructor</span>\r\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// Deployerë¥¼ ownerë¡œ ì„¤ì •</span>\r\n        owner <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// Deployerì˜ ê¸°ì—¬ë„ë¥¼ 1000 etherë¡œ ì„¤ì •</span>\r\n        contributions<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1000</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> ether<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">//Ownerë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œí•˜ëŠ” modifier</span>\r\n    <span class=\"token keyword\">modifier</span> onlyOwner <span class=\"token punctuation\">{</span>\r\n            <span class=\"token comment\">// msg.senderê°€ ownerì¸ì§€ ì•„ë‹Œì§€ í™•ì¸</span>\r\n            <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>\r\n                msg<span class=\"token punctuation\">.</span>sender <span class=\"token operator\">==</span> owner<span class=\"token punctuation\">,</span>\r\n                <span class=\"token string\">\"caller is not the owner\"</span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">_</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">//contractì˜ ê¸°ì—¬ë„ë¥¼ ì˜¬ë¦´ ìˆ˜ ìˆëŠ” functionì´ë‹¤.</span>\r\n    <span class=\"token comment\">//payableë¡œ ì„ ì–¸ë˜ì–´ etherë¥¼ ì „ì†¡í•˜ê³  ë°›ì„ ìˆ˜ ìˆë‹¤.</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">contribute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">payable</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">//msg.senderê°€ ë³´ë‚¸ etherì˜ ì–‘ì´ 0.001 ì´í•˜ì¸ì§€ í™•ì¸</span>\r\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>value <span class=\"token operator\">&lt;</span> <span class=\"token number\">0.001</span> ether<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">//msg.senderì˜ ê¸°ì—¬ë„(contributions)ë¥¼ msg.valueë§Œí¼ ì˜¬ë¦°ë‹¤.</span>\r\n        contributions<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> msg<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">//ë§Œì•½ msg.senderì˜ contributionsê°€ ownerì˜ contributionsë³´ë‹¤ í¬ë‹¤ë©´ ownershipì´ transferëœë‹¤.</span>\r\n        <span class=\"token comment\">//ì´ˆê¸°ì— ownerì˜ contributionsì€ 1000 etherì´ê¸° ë•Œë¬¸ì— ownershipì„ ë°”ê¾¸ê¸° ìœ„í•´ì„œëŠ” 1000 etherì´ìƒì˜ ê¸°ì—¬í•´ì•¼í•œë‹¤.</span>\r\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>contributions<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> contributions<span class=\"token punctuation\">[</span>owner<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        owner <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">//ê¸°ì—¬ë„ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” view function</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">getContribution</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">view</span> <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">//msg.senderì˜ ê¸°ì—¬ë„ë¥¼ return í•œë‹¤.</span>\r\n        <span class=\"token keyword\">return</span> contributions<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">//contractê°€ ê°€ì§€ê³  ìˆëŠ” ëª¨ë“  balance(ether)ë¥¼ ownerì—ê²Œ ì „ì†¡í•œë‹¤.</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">withdraw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> onlyOwner <span class=\"token punctuation\">{</span>\r\n        owner<span class=\"token punctuation\">.</span><span class=\"token function\">transfer</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>balance<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">//payableë¡œ ì„ ì–¸ë˜ì–´ etherë¥¼ ì „ì†¡í•˜ê³  ë°›ì„ ìˆ˜ ìˆë‹¤.</span>\r\n    <span class=\"token comment\">//receive function</span>\r\n    <span class=\"token function\">receive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> <span class=\"token keyword\">payable</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">//msg.senderì˜ msg.valueê°€ 0ë³´ë‹¤ í¬ê³  ê¸°ì—¬ë„(contributions)ê°€ 0ë³´ë‹¤ í°ì§€ í™•ì¸í•œë‹¤</span>\r\n        <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>value <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> contributions<span class=\"token punctuation\">[</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">//ownerë¥¼ msg.senderë¡œ ë°”ê¾¼ë‹¤.</span>\r\n        owner <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h2 id=\"í’€ì´\" style=\"position:relative;\"><a href=\"#%ED%92%80%EC%9D%B4\" aria-label=\"í’€ì´ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í’€ì´</h2>\n<p>ìš°ë¦¬ëŠ” 2ê°€ì§€ì˜ ë¬¸ì œë¥¼ í’€ì–´ì•¼ í•œë‹¤.</p>\n<ol>\n<li>contractì˜ ownershipì„ ëºì–´ì˜¤ê¸°</li>\n<li>contractì˜ balanceë¥¼ 0ìœ¼ë¡œ ë§Œë“¤ê¸°</li>\n</ol>\n<p>ì°¨ë¡€ì°¨ë¡€ í’€ì–´ë³´ê² ë‹¤.\r\nì½”ë“œë¥¼ ë´¤ì„ ë–„ contractì˜ ownershipì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” ë°©ë²•ì€ 2ê°€ì§€ê°€ ìˆë‹¤.</p>\n<ul>\n<li>contribute()</li>\n<li>receive()</li>\n</ul>\n<ol>\n<li>contribute()ë¥¼ ì´ìš©í•´ ownerê°€ ë˜ë ¤ë©´ ì´ˆê¸° ownerì˜ contributions 1000 etherë³´ë‹¤ ë” í° ëˆì„ contractë¡œ ë³´ë‚´ì•¼ í•œë‹¤.</li>\n<li>í•˜ì§€ë§Œ contribute()ì˜ requireì„ ë³´ë©´ í•œë²ˆì— 0.001 etherì´í•˜ì˜ etherë§Œ ë³´ë‚¼ ìˆ˜ ìˆê²Œ ë˜ì–´ìˆë‹¤. contractì—ì„œ ì˜ë„í•œëŒ€ë¡œ ownerê°€ ë˜ë ¤ë©´ <strong>1,000,000 + a</strong> ë²ˆ ì „ì†¡í•´ì•¼í•œë‹¤.</li>\n<li>ì´ ë°©ë²•ì€ ë¹„ìš©ë„ ë§ì´ë“¤ê³  ì—„ì²­ë‚œ ì‹œê°„ì´ ê±¸ë¦¬ê¸° ë•Œë¬¸ì— receive í•¨ìˆ˜ë¥¼ í™•ì¸í•´ë³´ì!</li>\n<li>receive í•¨ìˆ˜ë¥¼ ë³´ë©´ msg.valueë‚˜ 0ë³´ë‹¤ í¬ê³  contributionsê°€ 0ë³´ë‹¤ í¬ë©´ ownerë¥¼ msg.senderë¡œ ë°”ê¿€ ìˆ˜ ìˆë‹¤.</li>\n<li>ê·¸ë ‡ë‹¤ë©´ contribute() í˜¸ì¶œí•´ ì‘ì€ ê°’ì„ ë³´ë‚´ì–´ contributionsë¥¼ 0ì„ ì´ˆê³¼í•˜ê²Œ ë§Œë“ ë‹¤ìŒ receiveí•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ownerë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.</li>\n</ol>\n<p>ëª¨ë“  ì½”ë“œëŠ” consoleì°½ì—ì„œ ì´ë£¨ì–´ì§„ë‹¤.\r\nctrl + shift + ië¥¼ ëˆŒëŸ¬ consoleì°½ì„ í™œì„±í™” ì‹œí‚¤ì</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//0.001ë³´ë‹¤ ì‘ì€ 0.0001ì„ ë³´ë‚¸ë‹¤.</span>\r\n<span class=\"token keyword\">await</span> contract<span class=\"token punctuation\">.</span>contribute<span class=\"token punctuation\">.</span><span class=\"token function\">sendTransaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>value<span class=\"token operator\">:</span><span class=\"token function\">toWei</span><span class=\"token punctuation\">(</span><span class=\"token string\">'0.0001'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token comment\">//ë‚˜ì˜ contributionì„ í™•ì¸í•œë‹¤.</span>\r\n<span class=\"token function\">fromWei</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">await</span> contract<span class=\"token punctuation\">.</span><span class=\"token function\">getContribution</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token comment\">//contractì˜ balanceë¥¼ í™•ì¸í•œë‹¤.</span>\r\n<span class=\"token keyword\">await</span> <span class=\"token function\">getBalance</span><span class=\"token punctuation\">(</span>instance<span class=\"token punctuation\">)</span>\r\n<span class=\"token comment\">//ëª¨ë‘ 0.0001ê³¼ ê°™ì„ ê²ƒì´ë‹¤!</span>\r\n\r\n<span class=\"token comment\">//ë‚˜ì˜ contributionì´ 0ì„ ì´ˆê³¼í–ˆìœ¼ë‹ˆ recevice()ë¥¼ ì‹¤í–‰ ì‹œí‚¬ ìˆ˜ ìˆëŠ” ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œë‹¤.</span>\r\ncontract<span class=\"token punctuation\">.</span><span class=\"token function\">sendTransaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>value<span class=\"token operator\">:</span><span class=\"token function\">toWei</span><span class=\"token punctuation\">(</span><span class=\"token string\">'0.0001'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token comment\">//contractì˜ owner addressë¥¼ í™•ì¸í•œë‹¤.</span>\r\n<span class=\"token keyword\">await</span> contract<span class=\"token punctuation\">.</span><span class=\"token function\">owner</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token comment\">//ë‚˜ì˜ addressë¥¼ í™•ì¸í•œë‹¤.</span>\r\nplayer\r\n<span class=\"token comment\">//play(ë‚˜)ì´ ownerê°€ ëœ ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.</span>\r\n</code></pre></div>\n<p>ì´ë ‡ê²Œ ownershipì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆì—ˆë‹¤.</p>\n<p>ë‹¤ìŒìœ¼ë¡œ contractì˜ balanceë¥¼ 0ìœ¼ë¡œ ë§Œë“¤ê¸°ì´ë‹¤.\r\ncontractì˜ balanceë¥¼ 0ì„ë¡œ ë§Œë“¤ê¸°ëŠ” ë§¤ìš° ì‰½ë‹¤!\r\nownerë§Œ callí•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ì¸ withdrawì„ callí•˜ê¸°ë§Œ í•˜ë©´ ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//withdrawí•œë‹¤.</span>\r\n<span class=\"token keyword\">await</span> contract<span class=\"token punctuation\">.</span><span class=\"token function\">withdraw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token comment\">//contractì˜ balanceê°€ 0ì´ ëœê²ƒì„ í™•ì¸í•œë‹¤.</span>\r\n<span class=\"token keyword\">await</span> <span class=\"token function\">getBalance</span><span class=\"token punctuation\">(</span>instance<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Submit instanceë¥¼ ëˆ„ë¥´ê³  ì¡°ê¸ˆ ê¸°ë‹¤ë¦¬ë©´ blockì´ mineë˜ê³ , ë‹¤ìŒê³¼ ê°™ì´ ëœ¨ë©´ì„œ ë‹¤ìŒ levelë¡œ ë„˜ì–´ê°ˆ ìˆ˜ ìˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABJ0AAASdAHeZh94AAACfklEQVQ4y1WTiY7jNhBE/f/fFSBAkGMm4x2P14csWfdFirRknf0CUd5kI6BR7KJUeA1Su9Oh4nRQ3L2GKDD4l4bLUbkKfYN31jS6Z32WRZwWpsfLH9yKB5fUOq0fA9M0sbvdevxg4B4ORPGAf++5XHuuXk+UDPhBj7EzICzL4rQ0Pdf8gVc8XHBQtpS2Z5pGdn/uhb++Cfuj8HUR3g/Cb+8Lv38Ih7Pw9imUSl6BG2FYdbz7mo9A8+YrvoUNsXpuhOcUThmENcQKggq8Aq7F5t1KaLr/B64097LlXrWOcF3rdtgIL2bAsyM3O3F/TFztyLEZOZnx396MC8h/gXnz5HtiOKeWU2q5Zpa86TfCTwk4SMh3ibhKylEiPsRnLz4XSfmSkFrsCsgiiwuM686N+Rk17O+aY2zI9GvkTG7k4pGLTyUxpdzJ5UYiZ6drryShE8MLkMr27iDWkdcTXlX9GFnPH5j5gJn/Rs9v2PmImv+gmn+lnH7Bznv0/I6Zj8jcrJeHVD8d3VdsOESGU2Kc5wgZLzD5MH7B5CFT+OqPMJ0R59+ct0weSEFlOvyidZSOsGxRP+6h9BXS12yqtvXQvPoKaWNkWD3tir5At08i1ROrjqjuSPQT3Y6vQBUjOkZUuGkVILbYtPKR/IwUHqITt4+OsXlCqVuqx+D+msoOtP38CmwKxFSIyhBbI02JdHbzTL3VuvfqeSi6KqepFcZ2NN2I6Ub6acFay050sYWsutZPH0u1UuVIESHlOkUOVtFkKfHlSpKUbtz1ypjnRNM07CRNkSxH4gRJUiTNkCxDqgoJIyTPkSBAgjvruxQFY5rz9AKepaIbJp7DzLSIC/wHAO0qYjzyzD0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"fallback finish\"\n        title=\"fallback finish\"\n        src=\"/static/68592aa21598d925b557a56b988fc3bf/37523/fallback_finish.png\"\n        srcset=\"/static/68592aa21598d925b557a56b988fc3bf/e9ff0/fallback_finish.png 180w,\n/static/68592aa21598d925b557a56b988fc3bf/f21e7/fallback_finish.png 360w,\n/static/68592aa21598d925b557a56b988fc3bf/37523/fallback_finish.png 720w,\n/static/68592aa21598d925b557a56b988fc3bf/4b446/fallback_finish.png 877w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<hr>\n<h2 id=\"ë§ˆë¬´ë¦¬\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"ë§ˆë¬´ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë§ˆë¬´ë¦¬</h2>\n<p>ì–¼ë§ˆì „ì— ê³µë¶€í–ˆë˜ king of Ether(DOS with unexpected revert)ê°€ ìƒê°ë‚œë‹¤. revertë¥¼ í†µí•´ í•˜ëŠ” ownershipì„ ê°€ì ¸ì˜¤ëŠ”ê±´ ì•„ë‹ˆì—ˆì§€ë§Œ ë¹„ìŠ·í•œ ì ì´ ë§ì€ ê²ƒ ê°™ì•˜ë‹¤. ê³ ì‘ 1ë‹¨ê³„ë¥¼ ì™„ë£Œí•œ ê²ƒì´ì§€ë§Œ ê²Œì„ì„ í†µí•´ ë°°ìš°ë‹ˆ ë” ì¬ë°ŒëŠ” ê²ƒ ê°™ë‹¤. ì•ìœ¼ë¡œë„ í™”ì´íŒ…!</p>\n<hr>\n<h2 id=\"ê¸°íƒ€-ì •ë³´\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%ED%83%80-%EC%A0%95%EB%B3%B4\" aria-label=\"ê¸°íƒ€ ì •ë³´ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ê¸°íƒ€ ì •ë³´</h2>\n<ul>\n<li>rinkeyb network ether faucet: <a href=\"https://faucets.chain.link/rinkeby\">https://faucets.chain.link/rinkeby</a></li>\n<li>ethernaut: <a href=\"https://ethernaut.openzeppelin.com/\">https://ethernaut.openzeppelin.com/</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EC%8A%B9%EB%A6%AC-%EC%A1%B0%EA%B1%B4\">ìŠ¹ë¦¬ ì¡°ê±´</a></li>\n<li><a href=\"#%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D\">ì½”ë“œ ë¶„ì„</a></li>\n<li><a href=\"#%ED%92%80%EC%9D%B4\">í’€ì´</a></li>\n<li><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">ë§ˆë¬´ë¦¬</a></li>\n<li><a href=\"#%EA%B8%B0%ED%83%80-%EC%A0%95%EB%B3%B4\">ê¸°íƒ€ ì •ë³´</a></li>\n</ul>\n</div>","frontmatter":{"date":"December 22, 2021","title":"(Ethernauts ì·¨ì•½ì  ê³µë¶€) 1. Fallback","categories":"ì·¨ì•½ì ë¶„ì„","author":"í•œì„±ì›","emoji":"ğŸ§¢"},"fields":{"slug":"/ethernauts/1_fallback_ethernauts/1_fallback_ethernauts/"}},"site":{"siteMetadata":{"siteUrl":"https://holyhansss.github.io","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/vulnerability/over_under_flow/over_under_flow/","nextSlug":"/vulnerability/reentrancy_attack/reentrancy_attack/","prevSlug":"/ethernauts/1_fallback_ethernauts/1_fallback_ethernauts/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}